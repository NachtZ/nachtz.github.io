<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="https://nachtz.github.io">
  <title>一元硬币</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="北京邮电大学本科11级，目前研究生就读于北京邮电大学可信分布式计算与服务教育部重点实验室。">
<meta property="og:type" content="website">
<meta property="og:title" content="一元硬币">
<meta property="og:url" content="https://nachtz.github.io/index.html">
<meta property="og:site_name" content="一元硬币">
<meta property="og:description" content="北京邮电大学本科11级，目前研究生就读于北京邮电大学可信分布式计算与服务教育部重点实验室。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一元硬币">
<meta name="twitter:description" content="北京邮电大学本科11级，目前研究生就读于北京邮电大学可信分布式计算与服务教育部重点实验室。">
  
    <link rel="alternative" href="/atom.xml" title="一元硬币" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.2d7529.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="https://raw.githubusercontent.com/NachtZ/odl_test/master/11970866.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">NachtZ</a></h1>
		</hgroup>
		
		<p class="header-subtitle">希望能比别人努力一点点，幸运一点点。</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/DPDK/">DPDK</a></li>
	        
				<li><a href="/tags/Leetcode/">Leetcode</a></li>
	        
				<li><a href="/tags/Snort/">Snort</a></li>
	        
				<li><a href="/tags/Golang/">Golang</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/NachtZ" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="http://weibo.com/nachtz" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/nachtz" title="zhihu"><i class="icon-zhihu"></i></a>
		        
					<a class="mail" target="_blank" href="mailto:nachtz@outlook.com" title="mail"><i class="icon-mail"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="https://raw.githubusercontent.com/NachtZ/odl_test/master/11970866.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">NachtZ</h1>
			</hgroup>
			
			<p class="header-subtitle"><i class="icon icon-quo-left"></i>希望能比别人努力一点点，幸运一点点。<i class="icon icon-quo-right"></i></p>
			
			
			
				
			
				
			
				
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/NachtZ" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/nachtz" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/nachtz" title="zhihu"><i class="icon-zhihu"></i></a>
			        
						<a class="mail" target="_blank" href="mailto:nachtz@outlook.com" title="mail"><i class="icon-mail"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 70%">
				
				
					<li style="width: 20%"><a href="/">主页</a></li>
		        
					<li style="width: 20%"><a href="/tags/DPDK/">DPDK</a></li>
		        
					<li style="width: 20%"><a href="/tags/Leetcode/">Leetcode</a></li>
		        
					<li style="width: 20%"><a href="/tags/Snort/">Snort</a></li>
		        
					<li style="width: 20%"><a href="/tags/Golang/">Golang</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-data_struct_and_ag" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/01/data_struct_and_ag/">数据结构与算法</a>
    </h1>
  

        
        <a href="/2017/03/01/data_struct_and_ag/" class="archive-article-date">
  	<time datetime="2017-03-01T05:19:02.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-01</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>整理和自己总结的部分数据结构和算法。</strong></p>
<h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><h3 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h3><p>特点是FIFO。是一种常见的数据结构。可用链表和数组实现。<br>操作 | 链表实现复杂度 | 数组实现复杂度<br>— | — | —<br>出队 | 1 | n<br>入队 | n | 1<br>扩容 | n | n</p>
<p>出队时，链表只需要给出链头并将链头重新指向即可，而数组则需要进行一次全数组移动的操作。<br>入队时，链表需要遍历一遍链表，数组则不需要。<br>扩容时，链表是需要遍历一次，而数组需要进行一次拷贝。</p>
<h3 id="树"><a href="#树" class="headerlink" title="树"></a>树</h3><p>树的子树还是树；<br>度：节点的子树个数；<br>树的度：树中任意节点的度的最大值；<br>兄弟：两节点的parent相同；<br>层：根在第一层，以此类推；<br>高度：叶子节点的高度为1，根节点高度最高；<br>有序树：树中各个节点是有次序的；<br>森林：多个树组成；  </p>
<h4 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h4><p>二叉树的数组存储下标公式：第i个节点的左右子节点是2i+1, 2i+2<br>满二叉树的深度为k，节点数是2的k次方-1<br>先序遍历：先访问根节点，再访问左节点，再访问右节点<br>中序遍历：左-&gt;根-&gt;右<br>后序遍历：左-&gt;右-&gt;根<br>中序遍历+另外一种遍历可以还原一棵二叉树。  </p>
<p>二叉查找树：</p>
<ol>
<li>左子树的所有节点值都小于根节点值，右子树所有节点值都大于根节点值。  </li>
<li>左右子树也为二叉查找树。  </li>
<li>所有节点值都不重复。  </li>
<li>先序遍历是递增序，后序是递减序。  </li>
<li>插入和删除操作。  </li>
</ol>
<h4 id="红黑树-有点看不懂-先放着"><a href="#红黑树-有点看不懂-先放着" class="headerlink" title="红黑树 (有点看不懂,先放着)"></a>红黑树 (有点看不懂,先放着)</h4><p><a href="https://github.com/julycoding/The-Art-Of-Programming-By-July/blob/master/ebook/zh/03.01.md" target="_blank" rel="external">某blog</a><br>一种平衡二叉查找树。C++ stl 中set, multiset, map , multimap(muti允许内部有重复元素)用了红黑树。<br>红黑树是每个节点都带有颜色属性的二叉查找树，颜色或红色或黑色。在二叉查找树强制一般要求以外，对于任何有效的红黑树我们增加了如下的额外要求:  </p>
<ol>
<li>节点是红色或黑色。    </li>
<li>根节点是黑色。<br>3 每个叶节点（NIL节点，空节点）是黑色的。<br>4 每个红色节点的两个子节点都是黑色。(从每个叶子到根的所有路径上不能有两个连续的红色节点)  </li>
<li>从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点。  </li>
</ol>
<p>关键性质: 从根到叶子的最长的可能路径不多于最短的可能路径的两倍长。结果是这个树大致上是平衡的。因为操作比如插入、删除和查找某个值的最坏情况时间都要求与树的高度成比例，这个在高度上的理论上限允许红黑树在最坏情况下都是高效的，而不同于普通的二叉查找树。  </p>
<h5 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h5><p>旋转是为了让失去平衡的红黑树（比如插删操作后，左右子树的高度不一致了。）重新恢复平衡。<br>如图：<br><img src="http://hi.csdn.net/attachment/201012/31/8394323_1293757535O5W5.jpg" alt="i am pic"></p>
<blockquote>
<p>左旋，如图所示（左-&gt;右），以x-&gt;y之间的链为“支轴”进行，<br> 使y成为该新子树的根，x成为y的左孩子，而y的左孩子则成为x的右孩子。</p>
</blockquote>
<h5 id="重新着色"><a href="#重新着色" class="headerlink" title="重新着色"></a>重新着色</h5><p>旋转后红黑色颜色特性被破坏了。需要重新着色。</p>
<h3 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h3><p><a href="http://dongxicheng.org/structure/heap/" target="_blank" rel="external">某blog</a><br>也叫优先队列，是完全二叉树。大顶堆（小顶堆）是父节点大于（小于）两个子节点的值，且两个子节点也都是一个大顶堆（小顶堆）。<br>堆的数组表示：<strong>下标从1开始</strong>。对一个节点t，他的父节点为t/2，左孩子节点是2t，右孩子节点2t+1.<br>保持堆的性质（heapfy）：左右子树都必须已经是堆(这里，只有一个节点的树显然是堆)。将root 与left, right比较，最大的值与root交换，比如是right，然后递归调整右子树。<br>数组转堆：数组长度为n，从堆的最后一个非叶子节点n/2的地方开始，往前进行heapfy操作。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">BuildHeap</span><span class="params">(<span class="keyword">int</span> A[],)</span>  </span></div><div class="line"> &#123;    </div><div class="line">            <span class="keyword">int</span> i;</div><div class="line">            <span class="keyword">for</span>(i = HEAP_SIZE(A)/<span class="number">2</span>; i&gt;=<span class="number">1</span>; i--)    </div><div class="line">               Heapify(A, i); </div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<h4 id="优先队列（priority-queue）"><a href="#优先队列（priority-queue）" class="headerlink" title="优先队列（priority queue）"></a>优先队列（priority queue）</h4><p>优先队列是一种基于堆实现的数据结构。其特性是队列中的元素是按照从大到小排列的。  </p>
<p><strong>pop操作</strong>：获取队列中的最大值   </p>
<p>步骤有三步，时间复杂度为o(lg n)：  </p>
<ol>
<li>从堆中取堆顶元素，对应的是堆底层数据存储结构数组A[1]（注意，A[0]是不用留空的。）</li>
<li>将数组A最后一个元素A[n]放在A[1]的位置，同时将数组长度置为n-1.</li>
<li>对数组从上往下往下进行heapfy操作。</li>
</ol>
<p><strong>push 操作</strong>：往队列中加入一个数。<br>步骤有两步，时间复杂度为o(lg n):</p>
<ol>
<li>在数组A尾部放入这个树。</li>
<li>对该数组至下往上进行heapfy操作。<figure class="highlight zephir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">void Insert(<span class="keyword">int</span> A[], <span class="keyword">int</span> i)   &#123;  <span class="comment">//i为插入的值</span></div><div class="line">    <span class="keyword">int</span> n=++HEAP_SIZE(A);     </div><div class="line">    A[n] = <span class="number">-99999</span>;<span class="comment">//小无穷</span></div><div class="line">     <span class="keyword">int</span> p = n;</div><div class="line">     <span class="keyword">while</span>(p &gt;<span class="number">1</span> &amp;&amp; A[<span class="keyword">PARENT</span>(p)] &lt; i)  &#123;</div><div class="line">       A[p] = A[<span class="keyword">PARENT</span>(p)];</div><div class="line">       p = <span class="keyword">PARENT</span>(p);</div><div class="line">      &#125;</div><div class="line">      A[p]=i;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h3><p><a href="http://wenku.baidu.com/link?url=2EZUKGYzfpAZoYgx7h6SCHNqmBD8DOqHluQbtiVATV4ONrdvBKgQhLBenGjvrMhpSTDbcU-HubODxTKbTwdwC04kTekr0LIKdVRGcKeOq_e" target="_blank" rel="external">某文库</a></p>
<p>FILO。<br>懒得打字了。线性表的储存罢了。<br>对栈的操作，感觉更像是一种特殊的约定。他们的操作更像是在线性的数组上认为的添加限制。即加入时只能加到数组头，移出时只能移除数组尾部。</p>
<h3 id="另，计算机的堆区和栈区"><a href="#另，计算机的堆区和栈区" class="headerlink" title="另，计算机的堆区和栈区"></a>另，计算机的堆区和栈区</h3><p><strong>堆区和栈区实际上不属于数据结构与算法的范畴了，应该是操作系统的部分。但是名字一样在这也补一个。懒得提炼直接复制了。</strong><br><a href="http://blog.csdn.net/slj_win/article/details/8608436" target="_blank" rel="external">某blog</a><br>一、预备知识—程序的内存分配<br>一个由c/C++编译的程序占用的内存分为以下几个部分<br>1、栈区（stack）— 由编译器自动分配释放   ，存放函数的参数值，局部变量的值等。其操作方式类似于数据结构中的栈。<br>2、堆区（heap） — 一般由程序员分配释放， 若程序员不释放，程序结束时可能由OS回收     。注意它与数据结构中的堆是两回事，分配方式倒是类似于链表，呵呵。<br>3、全局区（静态区）（static）—，全局变量和静态变量的存储是放在一块的，初始化的全局变量和静态变量在一块区域，      未初始化的全局变量和未初始化的静态变量在相邻的另一块区域。 - 程序结束后有系统释放<br>4、文字常量区—常量字符串就是放在这里的。 程序结束后由系统释放<br>5、程序代码区—存放函数体的二进制代码。   </p>
<p>二、堆和栈的理论知识<br>2.1申请方式<br>stack:<br>由系统自动分配。 例如，声明在函数中一个局部变量 int b; 系统自动在栈中为b开辟空间<br>heap:<br>需要程序员自己申请，并指明大小，在c中malloc函数<br>如p1 = (char <em>)malloc(10);<br>在C++中用new运算符<br>如p2 = (char </em>)malloc(10);<br>但是注意p1、p2本身是在栈中的。  </p>
<p>2.2<br>申请后系统的响应<br>栈：只要栈的剩余空间大于所申请空间，系统将为程序提供内存，否则将报异常提示栈溢出。<br>堆：首先应该知道操作系统有一个记录空闲内存地址的链表，当系统收到程序的申请时，<br>会遍历该链表，寻找第一个空间大于所申请空间的堆结点，然后将该结点从空闲结点链表中删除，并将该结点的空间分配给程序，另外，对于大多数系统，会在这块内存空间中的首地址处记录本次分配的大小，这样，代码中的delete语句才能正确的释放本内存空间。另外，由于找到的堆结点的大小不一定正好等于申请的大小，系统会自动的将多余的那部分重新放入空闲链表中。   </p>
<p>2.3申请大小的限制<br>栈：在Windows下,栈是向低地址扩展的数据结构，是一块连续的内存的区域。这句话的意思是栈顶的地址和栈的最大容量是系统预先规定好的，在WINDOWS下，栈的大小是2M（也有的说是1M，总之是一个编译时就确定的常数），如果申请的空间超过栈的剩余空间时，将提示overflow。因 此，能从栈获得的空间较小。<br>堆：堆是向高地址扩展的数据结构，是不连续的内存区域。这是由于系统是用链表来存储的空闲内存地址的，自然是不连续的，而链表的遍历方向是由低地址向高地址。堆的大小受限于计算机系统中有效的虚拟内存。由此可见，堆获得的空间比较灵活，也比较大。   </p>
<p>2.4申请效率的比较：<br>栈由系统自动分配，速度较快。但程序员是无法控制的。<br>堆是由new分配的内存，一般速度比较慢，而且容易产生内存碎片,不过用起来最方便.<br>另外，在WINDOWS下，最好的方式是用VirtualAlloc分配内存，他不是在堆，也不是在栈是直接在进程的地址空间中保留一快内存，虽然用起来最不方便。但是速度快，也最灵活。  </p>
<p>2.5堆和栈中的存储内容<br>栈： 在函数调用时，第一个进栈的是主函数中后的下一条指令（函数调用语句的下一条可执行语句）的地址，然后是函数的各个参数，在大多数的C编译器中，参数是由右往左入栈的，然后是函数中的局部变量。注意静态变量是不入栈的。<br>当本次函数调用结束后，局部变量先出栈，然后是参数，最后栈顶指针指向最开始存的地址，也就是主函数中的下一条指令，程序由该点继续运行。<br>堆：一般是在堆的头部用一个字节存放堆的大小。堆中的具体内容有程序员安排。  </p>
<h2 id="排序算法"><a href="#排序算法" class="headerlink" title="排序算法"></a>排序算法</h2><h3 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h3><p>思路：在一个有序的序列中，插入一个新的数，让这个序列依然有序。<br>插入排序是稳定的排序，即在一个序列中，如果有两个数相等，那么他们之间的前后顺序在排序后不变。<br>复杂度： 一般情况o(n2)，最优情况排好序的情况o(n),最差情况o(n2)，数列为逆序。<br>算法：<br><img src="http://img.my.csdn.net/uploads/201301/03/1357220939_7742.png" alt="pic"><br><img src="http://img.my.csdn.net/uploads/201301/10/1357799464_6962.GIF" alt="递归版">  </p>
<h3 id="冒泡"><a href="#冒泡" class="headerlink" title="冒泡"></a>冒泡</h3><p>思想：通过两两交换，像水中的泡泡一样，小的先冒出来，大的后冒出来。是稳定排序。<br>复杂度：o(n2)，没有最优或最差情况。<br>算法：<br><img src="http://img.my.csdn.net/uploads/201301/03/1357220942_6357.png" alt="pic">  </p>
<h3 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h3><p>思路：在数列中，每次选择一个最小的值，放到新排列数列的最后面。<br>不稳定排序。<br>复杂度：o(n2)<br>算法：<br><img src="http://img.my.csdn.net/uploads/201301/10/1357793648_7622.GIF" alt="pic"></p>
<h3 id="归并"><a href="#归并" class="headerlink" title="归并"></a>归并</h3><p>思路：分治思想解决排序。<br>是稳定排序。<br>复杂度：o(n lgn)。<br>伪代码：<br><figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mergeSort<span class="comment">(A,i,j)</span>&#123;</div><div class="line">    <span class="keyword">if</span> i &lt; j </div><div class="line">     mid = <span class="comment">(i+j)</span>/<span class="number">2</span></div><div class="line">     mergeSort<span class="comment">(A,i,mid)</span></div><div class="line">     mergeSort<span class="comment">(A, mid+1,j)</span></div><div class="line">     merge<span class="comment">(A,i,m,g)</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>其中，merge的操作就是将两个基本有序的数列合并到一起。这个过程需要额外的一个数组来做临时变量。<br>算法：<br><img src="http://img.my.csdn.net/uploads/201301/03/1357220944_1498.png" alt="pic"></p>
<h3 id="快速"><a href="#快速" class="headerlink" title="快速"></a>快速</h3><p><strong>基本是必考的排序。</strong><br>思路：利用分治的思想，将大问题化为两个小问题，然后再合并。首先在一个已排序的序列中，随便选择一个数。然后将比这个数大的放在这个数右边，小的放在左边。然后对这两个子区间再排序。<br>是不稳定的排序。<br>复杂度：o(nlgn) 没有最优情况，最差情况是每次选择都选择到了数组的最值，这个时候分区最不平衡。一般的实现上来讲，会发生在排序的数列是逆序或者所有数列都是相等的时候。<br>解决方法是三值取中法。<br>算法：<br><img src="http://img.my.csdn.net/uploads/201301/03/1357220950_4864.png" alt="pic"></p>
<h3 id="堆-1"><a href="#堆-1" class="headerlink" title="堆"></a>堆</h3><p>思路：利用最大堆和最小堆进行排序。将数组整理为堆，然后每次弹出堆顶即可。<br>复杂度：o(nlg n)  </p>
<p><img src="http://img.my.csdn.net/uploads/201301/03/1357220958_2074.png" alt="pic"></p>
<h3 id="基底"><a href="#基底" class="headerlink" title="基底"></a>基底</h3><p>思路：从个位到高位，对于每一位进行排序，而每一位的排序，都视为计数排序。<br>是稳定的排序，需要额外的空间。<br>例图：<br><img src="http://img.my.csdn.net/uploads/201301/03/1357220964_6225.png" alt="pic"><br>复杂度：o((n+k)d)  </p>
<p>算法：<br><img src="http://img.my.csdn.net/uploads/201301/03/1357220967_7660.png" alt="pic"></p>
<h3 id="桶"><a href="#桶" class="headerlink" title="桶"></a>桶</h3><p>思路：先预筛选再进行排序。把一个大的复杂的数列先按大小范围把不同元素放到不同的桶里面。然后对不同桶里面的数进行排序。<br>稳定排序，需要额外的空间。<br>复杂度：最优情况是o(n)，这个时候所有的元素均匀分布到各个桶里面，而且桶内元素正好有序。最坏情况是全部元素都分到一个桶里面，为o(n2)或者o(nlg n)如果桶内排序用的是快排的话。<br>算法：<br><img src="http://img.my.csdn.net/uploads/201301/03/1357220972_2232.png" alt="pic"></p>
<h3 id="计数"><a href="#计数" class="headerlink" title="计数"></a>计数</h3><p>思路：利用数组的下标进行统计的排序。这个算法速度快(o(n),基本上这种有一定使用条件的排序算法速度上都会优于通用的排序方法。)，需要额外的空间，不适用于有负数的排序和数组中含有特别大的数的数列。<br>复杂度：o(n+k)，k为数列中最大的数。需要额外的空间复杂度。o(k)<br>是不稳定的排序。本质上是先统计在根据统计还原。和原来的数组已经没有关系了。<br>算法：<br><img src="http://img.my.csdn.net/uploads/201301/03/1357220962_8346.png" alt="pic"></p>
<h3 id="睡眠"><a href="#睡眠" class="headerlink" title="睡眠"></a><del>睡眠</del></h3><p><del>这是来搞笑的。= =</del><br><del>构造n个线程，它们和这n个数一一对应。初始化后，线程们开始睡眠，等到对应的数那么多个时间单位后各自醒来，然后输出它对应的数。这样最小的数对应的线程最早醒来，这个数最早被输出。</del></p>
<h2 id="算法补遗"><a href="#算法补遗" class="headerlink" title="算法补遗"></a>算法补遗</h2><p><a href="http://blog.csdn.net/chinabhlt/article/details/47420391" target="_blank" rel="external">查找算法</a></p>
<h3 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h3><p>思路：折办查找，元素必须是有序的才可以。用给定值k先与中间结点的关键字比较，中间结点把线形表分成两个子表，若相等则查找成功；若不相等，再根据k与该中间结点关键字的比较结果确定下一步查找哪个子表，这样递归进行，直到查找到或查找结束发现表中没有这样的结点。<br>复杂度: o(lg n)<br>算法：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//二分查找（折半查找），版本1</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">BinarySearch1</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> value, <span class="keyword">int</span> n)</span></span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">int</span> low, high, mid;</div><div class="line">  low = <span class="number">0</span>;</div><div class="line">  high = n<span class="number">-1</span>;</div><div class="line">  <span class="keyword">while</span>(low&lt;=high)</div><div class="line">  &#123;</div><div class="line">    mid = (low+high)/<span class="number">2</span>;</div><div class="line">    <span class="keyword">if</span>(a[mid]==value)</div><div class="line">      <span class="keyword">return</span> mid;</div><div class="line">    <span class="keyword">if</span>(a[mid]&gt;value)</div><div class="line">      high = mid<span class="number">-1</span>;</div><div class="line">    <span class="keyword">if</span>(a[mid]&lt;value)</div><div class="line">      low = mid+<span class="number">1</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">//二分查找，递归版本</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">BinarySearch2</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> value, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">int</span> mid = low+(high-low)/<span class="number">2</span>;<span class="comment">//这种求mid的写法是为了防止溢出，因为high+low是有可能溢出的。</span></div><div class="line">  <span class="keyword">if</span>(a[mid]==value)</div><div class="line">    <span class="keyword">return</span> mid;</div><div class="line">  <span class="keyword">if</span>(a[mid]&gt;value)</div><div class="line">    <span class="keyword">return</span> BinarySearch2(a, value, low, mid<span class="number">-1</span>);</div><div class="line">  <span class="keyword">if</span>(a[mid]&lt;value)</div><div class="line">    <span class="keyword">return</span> BinarySearch2(a, value, mid+<span class="number">1</span>, high);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="partition中位数"><a href="#partition中位数" class="headerlink" title="partition中位数"></a>partition中位数</h3><p>这个算法是在乱序的数组中查找中位数的算法。<br>利用快排关键字的查找方法<br>a.随机选取一个关键字key，将序列二分；<br>b.若关键字的下标大于N/2，则继续对序列的左半部分执行partition；<br>c.若关键字的下标小于N/2，则继续对序列的右半部分执行partition；<br>d.若关键字的下标等于N/2，则返回key。<br>算法复杂度是o(nlg n)?.</p>
<h3 id="基于流的中位数"><a href="#基于流的中位数" class="headerlink" title="基于流的中位数"></a>基于流的中位数</h3><p>提炼一下就是利用大小堆来存储这个流的数。在存储的过程中，大堆保存中位数左边的数，小堆保存中位数右边的数。在拿到流中的数时，动态调整（在新到达的数，大堆顶，小堆顶三个数中比较，然后选则将新的数送到哪个堆中）。需要取中位数数时只要取两个堆顶即可。<br>给一个数据流，找出中位数，由于数据流中的数据并不是有序的，所以我们首先应该想个方法让其有序。如果我们用vector来保存数据流的话，每进来一个新数据都要给数组排序，很不高效。所以之后想到用multiset这个数据结构，是有序保存数据的，但是它不能用下标直接访问元素，找中位数也不高效。这里用到的解法十分巧妙，我们使用大小堆来解决问题，其中大堆保存右半段较大的数字，小堆保存左半段较小的数组。这样整个数组就被中间分为两段了，由于堆的保存方式是由大到小，我们希望大堆里面的数据是从小到大，这样取第一个来计算中位数方便。我们用到一个小技巧，就是存到大堆里的数先取反再存，这样由大到小存下来的顺序就是实际上我们想要的从小到大的顺序。当大堆和小堆中的数字一样多时，我们取出大堆小堆的首元素求平均值，当小堆元素多时，取小堆首元素为中位数</p>
<h3 id="最短路径"><a href="#最短路径" class="headerlink" title="最短路径"></a>最短路径</h3><p>迪杰斯特拉<br><img src="http://img1.ph.126.net/z7OUHIYlh8DKy4hVeaxQTw==/2746069872806980093.jpg" alt="pic"><br><img src="http://img1.ph.126.net/lTlHnmZqqcxVti2nnAJJMA==/1374723786354996526.jpg" alt="pic"></p>
<h3 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h3><p>不知道该怎么讲，丢个连接<a href="http://blog.jobbole.com/83949/" target="_blank" rel="external">dp</a></p>
<h3 id="蓄水池抽样"><a href="#蓄水池抽样" class="headerlink" title="蓄水池抽样"></a>蓄水池抽样</h3><h5 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h5><p>从一个长度未知或者很长的序列中随机抽取出k个元素，保证k个元素的输出是完全随机的。<br>构造一个可以放置k个元素的蓄水池，将序列的前k个元素放入蓄水池类，然后从第k+1个元素开始，以k/n的概率来决定钙元素是否需要被替换到水池中。</p>
<h5 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h5><p>伪代码如下：<br><figure class="highlight ocaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="type">Init</span> : a reservoir <span class="keyword">with</span> the size： k</div><div class="line">        <span class="keyword">for</span>    i= k+<span class="number">1</span> <span class="keyword">to</span> <span class="type">N</span></div><div class="line"></div><div class="line">            <span class="type">M</span>=random(<span class="number">1</span>, i);</div><div class="line">            <span class="keyword">if</span>( <span class="type">M</span> &lt; k)</div><div class="line">                 <span class="type">SWAP</span> the <span class="type">Mth</span> <span class="keyword">value</span> <span class="keyword">and</span> ith <span class="keyword">value</span></div><div class="line">       <span class="keyword">end</span> <span class="keyword">for</span></div></pre></td></tr></table></figure></p>
<h5 id="证明"><a href="#证明" class="headerlink" title="证明"></a>证明</h5><ol>
<li>对于第i个数(i&lt;k)，在前k步被选中的概率是1， 从第k+1步开始，i不被选中的概率为k/k+1,那么读到第n个数时， 第i个数(i&lt;k)被选中的概率 = 被选中的概率 <em> 以后每一步都不被换走的概率,即<br>`1 </em> k/k+1 * k+1/k+2 …n-1/n = k/n`</li>
<li>对于第j个数(j&gt;=k)被选中的概率为： 在他出现时被选中的概率 <em> 在他出现以后不被换走的概率,即:<br>`k/j </em> j /j+1 。。。n-1/n = k/n`</li>
</ol>
<h3 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h3><p><a href="http://blog.csdn.net/zmazon/article/details/8262185" target="_blank" rel="external">看大佬</a></p>
<h3 id="拉格朗日四平方和定理"><a href="#拉格朗日四平方和定理" class="headerlink" title="拉格朗日四平方和定理"></a>拉格朗日四平方和定理</h3><p>拉格朗日四平方和定理<br><strong>Leetcode 279 perfect squares</strong><br>四平方和定理说明每个正整数均可表示为4个整数的平方和。</p>
<p>任何形为4n+1的素数都能表示为两个平方数之和。<br>用dp[i]表示i的正数组成情况时：<br><code>dp[i*i] = 1;</code><br><code>dp[i*i + a] = dp[a]+1;</code><br>利用这个来进行dp递推公式的推导。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">min</span>(<span class="params"><span class="keyword">int</span> a, <span class="keyword">int</span> b</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span> (a&gt;b)</div><div class="line">            <span class="keyword">return</span> b;</div><div class="line">        <span class="keyword">return</span> a;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">numSquares</span>(<span class="params"><span class="keyword">int</span> n</span>) </span>&#123;</div><div class="line">        <span class="keyword">int</span> *dp = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i!=n+<span class="number">1</span>;++i)dp[i] = <span class="number">4</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i*i&lt;=n;++i)&#123;</div><div class="line">            dp[i*i] = <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> a = <span class="number">0</span>;a!=n+<span class="number">1</span>;++a)&#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> b = <span class="number">0</span>;b*b&lt;=a;++b)&#123;</div><div class="line">                dp[a] = min(dp[a],dp[a-b*b]+<span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> dp[n];</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="kmp和manacher"><a href="#kmp和manacher" class="headerlink" title="kmp和manacher"></a>kmp和manacher</h3><h4 id="kmp"><a href="#kmp" class="headerlink" title="kmp"></a>kmp</h4><h5 id="算法思想"><a href="#算法思想" class="headerlink" title="算法思想"></a>算法思想</h5><p>kmp算法的思想是利用额外的信息量来避免不必要的匹配。假设我们匹配两个串分别到了i,j时发现不匹配了。正常的算法是将计数器重新计算到匹配的开头加1.但是这么做就浪费了串0~i-1 和串0~j-1之间的串都相等的这个信息量。kmp的思路就是要利用这个额外的信息量将匹配的窗口尽量的滑动到最远。<br><img src="http://img.blog.csdn.net/20130924000026250" alt="kmp1"><br><img src="http://img.blog.csdn.net/20130924000843031" alt="kmp2"></p>
<h5 id="额外的信息量"><a href="#额外的信息量" class="headerlink" title="额外的信息量"></a>额外的信息量</h5><p>额外的信息量是指前缀函数。<br>比如对于字符串<code>ABCDABD</code>而言。其前缀函数的信息是：</p>
<table>
<thead>
<tr>
<th>表头</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7   </th>
</tr>
</thead>
<tbody>
<tr>
<td>搜索词</td>
<td>A</td>
<td>B</td>
<td>C</td>
<td>D</td>
<td>A</td>
<td>B</td>
<td>D   </td>
</tr>
<tr>
<td>部分匹配词</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>0    </td>
</tr>
</tbody>
</table>
<p>求取这个next的代码如下：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] getNext(String b)  </div><div class="line">&#123;  </div><div class="line">    <span class="keyword">int</span> len=b.length();  </div><div class="line">    <span class="keyword">int</span> j=<span class="number">0</span>;  </div><div class="line">          </div><div class="line">    <span class="keyword">int</span> <span class="keyword">next</span>[]=<span class="keyword">new</span> <span class="keyword">int</span>[len+<span class="number">1</span>];<span class="comment">//next表示长度为i的字符串前缀和后缀的最长公共部分，从1开始  </span></div><div class="line">    <span class="keyword">next</span>[<span class="number">0</span>]=<span class="keyword">next</span>[<span class="number">1</span>]=<span class="number">0</span>;  </div><div class="line">          </div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;len;i++)<span class="comment">//i表示字符串的下标，从0开始  </span></div><div class="line">    &#123;<span class="comment">//j在每次循环开始都表示next[i]的值，同时也表示需要比较的下一个位置  </span></div><div class="line">        <span class="keyword">while</span>(j&gt;<span class="number">0</span>&amp;&amp;b.charAt(i)!=b.charAt(j))j=<span class="keyword">next</span>[j];  </div><div class="line">        <span class="keyword">if</span>(b.charAt(i)==b.charAt(j))j++;  </div><div class="line">        <span class="keyword">next</span>[i+<span class="number">1</span>]=j;  </div><div class="line">    &#125;  </div><div class="line">          </div><div class="line">    <span class="keyword">return</span> <span class="keyword">next</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="字符串匹配"><a href="#字符串匹配" class="headerlink" title="字符串匹配"></a>字符串匹配</h5><p>字符串匹配的过程和获取额外信息的函数是基本一致的。都是依照next[j]来进行（匹配失败时）下标的移动。<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">public void search(String <span class="keyword">original, </span>String find, int next[]) &#123;  </div><div class="line">    int <span class="keyword">j </span>= <span class="number">0</span><span class="comment">;  </span></div><div class="line">    for (int i = <span class="number">0</span><span class="comment">; i &lt; original.length(); i++) &#123;  </span></div><div class="line">        while (<span class="keyword">j </span>&gt; <span class="number">0</span> &amp;&amp; <span class="keyword">original.charAt(i) </span>!= find.charAt(<span class="keyword">j)) </span> </div><div class="line">            <span class="keyword">j </span>= next[<span class="keyword">j]; </span> </div><div class="line">        if (<span class="keyword">original.charAt(i) </span>== find.charAt(<span class="keyword">j)) </span> </div><div class="line">            <span class="keyword">j++; </span> </div><div class="line">        if (<span class="keyword">j </span>== find.length()) &#123;  </div><div class="line">            System.out.println(<span class="string">"find at position "</span> + (i - <span class="keyword">j)); </span> </div><div class="line">            System.out.println(<span class="keyword">original.subSequence(i </span>- <span class="keyword">j </span>+ <span class="number">1</span>, i + <span class="number">1</span>))<span class="comment">;  </span></div><div class="line">            <span class="keyword">j </span>= next[<span class="keyword">j]; </span> </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><a href="http://blog.csdn.net/yutianzuijin/article/details/11954939/" target="_blank" rel="external">Reference</a></p>
<h4 id="manacher-回文子串"><a href="#manacher-回文子串" class="headerlink" title="manacher 回文子串"></a>manacher 回文子串</h4><h5 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h5><p>在o(n)的时空复杂度内，求出以每个字符为中心的最长回文有多长。这个算法可以求出包括奇数和偶数的回文串。算法的核心思想就是<strong>利用已经匹配的最右位置和对应的对称中心来跳过已经进行过的比较</strong>。</p>
<h5 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h5><ol>
<li>在每两个字符中插入一个分隔符。这个分隔符在原文中没有出现，一般是用<code>#</code>.</li>
<li><p>然后用一个辅助数组P来记录以每个中心为最长回文传的信息。</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">before : waaabwswfd</div><div class="line">after : <span class="comment"># w # a # a # a # b # w # s # w # f # d #</span></div><div class="line">P:     <span class="number"> 1 </span>2<span class="number"> 1 </span>2<span class="number"> 3 </span>2<span class="number"> 1 </span>2<span class="number"> 1 </span>2<span class="number"> 1 </span>2<span class="number"> 1 </span>4<span class="number"> 1 </span>2<span class="number"> 1 </span>2<span class="number"> 1 </span>2 1</div></pre></td></tr></table></figure>
</li>
<li><p>P[id]-1就是该回文子串在原串中的长度</p>
</li>
<li>在扫描的时候，线性的从左往右扫描。在扫描的时候，用mx在记录i在之前的回文串查找过程中，查找到的最右的位置，以及取到这个最右值时的字符位置id。</li>
<li><p><img src="http://img.blog.csdn.net/20160319170757295" alt="pic"></p>
</li>
<li><p>关键的比较：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="built_in">i</span> &lt; mx)</div><div class="line">            p[ i ] = min( p[  <span class="number">2</span> * id  -  i ], mx - <span class="built_in">i</span> );</div></pre></td></tr></table></figure>
</li>
</ol>
<p>2*id-i求得是i关于id对称的点。这个对称点上的回文子串的长度在目前以及匹配到的结果中，和i点事一样的。（除非碰到了左边界或右边界）</p>
<h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;  </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;  </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;  </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;utility&gt;  </span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;  </div><div class="line">  </div><div class="line"><span class="keyword">char</span> s[<span class="number">1000</span>];  </div><div class="line"><span class="keyword">char</span> s_new[<span class="number">2000</span>];  </div><div class="line"><span class="keyword">int</span> p[<span class="number">2000</span>];  </div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">Init</span><span class="params">()</span>  </span></div><div class="line">&#123;  </div><div class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(s);  </div><div class="line">    s_new[<span class="number">0</span>] = <span class="string">'$'</span>;  </div><div class="line">    s_new[<span class="number">1</span>] = <span class="string">'#'</span>;  </div><div class="line">    <span class="keyword">int</span> j = <span class="number">2</span>;  </div><div class="line">  </div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)  </div><div class="line">    &#123;  </div><div class="line">        s_new[j++] = s[i];  </div><div class="line">        s_new[j++] = <span class="string">'#'</span>;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    s_new[j] = <span class="string">'\0'</span>;<span class="comment">//别忘了哦  </span></div><div class="line">  </div><div class="line">    <span class="keyword">return</span> j;<span class="comment">//返回s_new的长度  </span></div><div class="line">&#125;  </div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">Manacher</span><span class="params">()</span>  </span></div><div class="line">&#123;  </div><div class="line">    <span class="keyword">int</span> len = Init();<span class="comment">//取得新字符串长度并完成向s_new的转换  </span></div><div class="line">    <span class="keyword">int</span> maxLen = <span class="number">-1</span>;<span class="comment">//最长回文长度  </span></div><div class="line">      </div><div class="line">    <span class="keyword">int</span> id;  </div><div class="line">    <span class="keyword">int</span> mx = <span class="number">0</span>;  </div><div class="line">  </div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++)  </div><div class="line">    &#123;  </div><div class="line">        <span class="keyword">if</span> (i &lt; mx)  </div><div class="line">            p[i] = min(p[<span class="number">2</span> * id - i], mx - i);<span class="comment">//需搞清楚上面那张图含义,mx,2 * id - i的含义  </span></div><div class="line">        <span class="keyword">else</span>  </div><div class="line">            p[i] = <span class="number">1</span>;  </div><div class="line">  </div><div class="line">        <span class="keyword">while</span> (s_new[i - p[i]] == s_new[i + p[i]])<span class="comment">//不需边界判断，因为左有'$',右有'\0'  </span></div><div class="line">            p[i]++;  </div><div class="line">  </div><div class="line">  </div><div class="line">        <span class="keyword">if</span> (mx &lt; i + p[i])<span class="comment">//我们每走一步i，都要和mx比较，我们希望mx尽可能的远，这样才能更有机会执行if (i &lt; mx) 这句代码，从而提高效率  </span></div><div class="line">        &#123;  </div><div class="line">            id = i;  </div><div class="line">            mx = i + p[i];  </div><div class="line">        &#125;  </div><div class="line">  </div><div class="line">        maxLen = max(maxLen, p[i] - <span class="number">1</span>);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="keyword">return</span> maxLen;  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></div><div class="line">&#123;  </div><div class="line">    <span class="keyword">while</span> (<span class="built_in">printf</span>(<span class="string">"请输入字符串：\n"</span>))  </div><div class="line">    &#123;  </div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s);  </div><div class="line">        <span class="built_in">printf</span>(<span class="string">"最长回文长度为 %d\n\n"</span>, Manacher());  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Leetcode</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">Algorithm</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/01/data_struct_and_ag/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-SDN_defense4all" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/23/SDN_defense4all/">Defense4All 粗翻</a>
    </h1>
  

        
        <a href="/2017/02/23/SDN_defense4all/" class="archive-article-date">
  	<time datetime="2017-02-23T05:24:31.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-02-23</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言：Defense4All-粗翻"><a href="#前言：Defense4All-粗翻" class="headerlink" title="前言：Defense4All 粗翻"></a>前言：Defense4All 粗翻</h2><hr>
<p><strong>对<a href="https://wiki.opendaylight.org/view/Defense4All:Tutorial" target="_blank" rel="external">Defense4All:Tutorial</a>的粗翻，基于Google翻译加上自己修改。旨在为自己毕设提供一种设计思路。</strong>  </p>
<h2 id="Defense4All：教程"><a href="#Defense4All：教程" class="headerlink" title="Defense4All：教程"></a>Defense4All：教程</h2><p>内容<br> [ 隐藏 ]<br>1 简介<br>2 Defense4All设计<br>3 部署替代<br>4 Defense4All在ODL环境中<br>5 框架视图<br>6 应用视图<br>7 ODL代表视图<br>8 基本控制流程<br>9 配置和设置流程<br>10 攻击检测流程<br>11 攻击减轻流程<br>12 问题和故障排除<br>13 连续性<br>14 维护和升级<br>15 新术语和概念<br>16 其他信息<br>16.1 安全和隐私<br>16.2 兼容性<br>16.3 性能和可伸缩性信息<br>16.4 参考资料</p>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>将可疑流量从正常网络路径转移到专用攻击缓解设备来进行清洗和威胁检测是一个普遍的DoS攻击环节和威胁检测策略。这些基础架构也被称为安全中心或者清洗中心，主要由第3层到第7层DoS攻击缓解设备组成。这些清洗中心可以以路径外（OOP）方式（不内嵌在本地业务流）部署在网络内的专用远程站点，因此将流量转移到这些中心是必要的。在流量清洗过程期间，攻击缓解基础设施识别并丢弃恶意IP分组，并将合法IP分组转发回其原始目标网络目的地。清洗中心可以位于企业网络，数据中心或云中，也可以作为运营商基础设施的一部分。一般来说，OOP系统中的DDoS防护包括以下主要元素：</p>
<ul>
<li>在正常时期收集被保护网络的流量统计和对流量统计特征的学习。 受保护网络的正常流量基线是由这些收集的统计信息构建的。</li>
<li>认为偏离正常流量基线的流量异常可能是DoS攻击。</li>
<li>将可疑流量从其正常路径转移到缓解（清洗）中心，用于流量清洗，选择性源阻塞等。从清洗中心出来的干净流量被重新发往到原始目的地中。</li>
</ul>
<h2 id="Defense4All设计"><a href="#Defense4All设计" class="headerlink" title="Defense4All设计"></a>Defense4All设计</h2><p>Defense4All是一种SDN安全应用程序，用于检测和缓解在不同SDN拓扑中的DoS和DDoS攻击。它实现了基于可编程流的SDN环境的OOP模式下的DoS防护。管理员可以配置Defense4All以保护某些网络和服务器，程序中将之称为受保护网络或受保护对象（POs​​）。Defense4All利用SDN功能来统计指定的流量，并在每个网络位置，为每个配置中的PO，安装针对不同协议的计数流。然后Defense4All监控所有配置的PO的流量，汇总来自所有相关网络位置的读取操作，速率和平均值。如果在特定PO的协议（例如TCP，UDP，ICMP或其余流量）中检测到与正常学习的流量行为的偏差，则Defense4All在目标PO中宣布发现基于该种协议的攻击。Defense4All在安装计数流后至少需要一个星期的学习时间，在这期间Defense4All不检测攻击。为了缓解检测到的攻击，Defense4All执行以下过程：</p>
<ol>
<li>它确认DefensePro设备是否处于正常状态，并选择和正常工作的设备进行连接（如果DefensePro没有启动或没有心跳活动连接，则不会执行流量转移）。有关详细信息，请参阅“连续性”部分。</li>
<li>Defense4All使用安全策略和攻击流量的正常速率来配置DefensePro。后者能提升DefensePro对攻击的缓解。</li>
<li>Defense4All开始从DefensePro中监测和记录系统日志。只要它继续从DefensePro接收关于此攻击的攻击通知，Defense4All就会继续转移流量来继续进行攻击缓解，即使Vexternal FlowFilter计数器不提示流量中包含任何攻击。</li>
<li>Defense4All通过创建一对Vexternals并将它们映射到与DefensePro连接的所选物理PFS端口对，将所选的物理DefensePro连接映射到相关的VTN。并且会自动学习和保留VLAN标记（如果存在）。如果Defense4All已经在VTN中创建并映射了具有相同VLAN的一对Vexternals，则相同的对也被重新用于新流量的转移（而不是为相同的VTN和VLAN创建新的Vexternals）。</li>
<li>Defense4All在每个北向Vexternal中安装较高优先级的流过滤条目，通过该过滤条目，将攻击流量转移重定向到“北向DP-In Vexternal”。它还选择连接到所有Vexternals的Vbr的活北接口之一（可以有一个具有相同VLAN的Vbr）。Defense4All将来自“DP-Out Vexternal”的流量重新注入到选定的Vbr接口。（<strong> 这句话看不懂 </strong>）当Defense4All确定攻击已结束（没有来自PFC FlowFilter计数器或来自DefensePro的指示）时，它会恢复先前的流量：它停止监视有关流量的DefensePro syslog，它会删除流量转移流表项，删除“DP-In和DP-Out Vexternals“（如果这是此VTN和VLAN中的最后一次攻击），并从DefensePro中删除安全配置。Defense4All然后返回到正常监控。</li>
</ol>
<p>在此版本中，Defense4All作为单个实例（非集群）运行，但它集成了以下主要容错功能：</p>
<ul>
<li>它作为Linux服务运行，如果失败，它会自动重新启动。</li>
<li>有状态服务，会将最新的运行状态保存在可靠存储中，并能恢复运行。</li>
<li>它带有一个有重启和重置功能的健康跟踪器，以解决某些逻辑和老化的错误。<br>Defense4All监控DefensePro的状态，连接到DefensePro的交换机，在各种VTN中的相关Vbr(虚拟网桥)，这些Vbr的北向接口和北Vexternals。它依此调整，取消和（重新）发起攻击流量转移。下图说明了任何给定PO的可能状态。Radware的DefensePro（DP）是具体化的AMS的示例。 </li>
</ul>
<p><img src="https://wiki.opendaylight.org/view/File:Pn_possible_states.jpg" alt="图1：Defense4All攻击减轻的工作流程"></p>
<p>PN可能状态</p>
<h2 id="部署替代"><a href="#部署替代" class="headerlink" title="部署替代"></a>部署替代</h2><p>Defense4All支持“短转移”，即AMS（攻击减轻系统）连接到边缘路由器，从而实现只用一跳进行流量重定向。另请参见图3中的PE1和DefensePro 2。“长转向”，即AMS清洗中心位于网络中的任意远程位置，将在未来的Defense4All版本中添加。参见下图中的PE2和DefensePro 1。Defense4All支持自动和手动转移模式。手动模式即在转移前需要向用户进行确认。</p>
<p><img src="https://wiki.opendaylight.org/images/e/e5/Redirection_alternatives.jpg" alt="Defense4All部署流量重定向替代"></p>
<h2 id="基于ODL的Defense4All"><a href="#基于ODL的Defense4All" class="headerlink" title="基于ODL的Defense4All"></a>基于ODL的Defense4All</h2><p>Defense4All是一种用于检测和缓解DDoS攻击的SDN应用程序。应用程序通过ODC北向REST API与OpenDaylight控制器通信。通过这个API，Defense4All执行两个主要任务：</p>
<ul>
<li>监控受保护流量的行为 - 应用程序在所选网络位置中设置流条目以读取每个PN的流量统计（从多个位置聚集针对给定PN收集的统计）。</li>
<li><p>将攻击流量转移到选定的AMS - 应用程序在选定的网络位置中设置流条目，以将流量转移到所选的AMS。当攻击完成时，应用程序将删除这些流条目，从而返回到正常操作和流量监控。<br>Defense4All可以与设定好的AMS通信 - 例如，动态配置它们，监视它们，或者收集和操作来自AMS的攻击统计。AMS的API不是标准化的，在任何情况下都超出了OpenDaylight工作设计的范围。Defense4All包含一个参考实现可插拔驱动程序，与Radware的DefensePro AMS通信。应用程序提供其北向REST和CLI API，以允许其管理器：</p>
</li>
<li><p>控制和配置应用程序（运行时参数，ODC连接，域中的AMS，PN等等）。</p>
</li>
<li><p>从Defense4All和其他来源（如ODC，AMS）统一获取报告数据 - 操作或安全，当前或历史。<br><img src="https://wiki.opendaylight.org/images/thumb/5/5b/D4A_in_odl.jpg/900px-D4A_in_odl.jpg" alt="Defense4在OpenDaylight环境中的所有逻辑定位"><br>Defense4All包括一个SDN应用程序框架和Defense4All应用程序本身，打包为一个单一的实体。应用程序集成到框架中是可插入的，因此任何其他SDN应用程序都可以受益于公共框架服务。这种架构的主要优点是：</p>
</li>
<li><p>更快的应用程序开发和更改 - 框架包含用于多个应用程序的公共代码，复杂元素（例如集群和存储库服务）只需要实现一次就能复用。</p>
</li>
<li>更快，更灵活地部署在不同的环境，形式因素，满足不同的NFR - 框架掩盖SDN应用因素，如所需的数据生存性，规模和弹性，可用性，安全性。</li>
<li>更强的鲁棒性 - 复杂的框架代码实现和测试一次，更清晰的关注分离导致更稳定的代码，框架可以主动增加鲁棒性，没有额外的代码在应用程序逻辑（如周期性应用程序循环）。</li>
<li>统一管理的共同方面 - 共同的外观和感觉。<br>框架视图<br><img src="https://wiki.opendaylight.org/images/thumb/b/bb/Framework_view.jpg/1350px-Framework_view.jpg" alt="从框架的角度看Defense4All结构"><br>框架包含以下元素：</li>
</ul>
<p><strong>FrameworkMain</strong> - 框架根点包含对所有框架模块和全局存储库的引用，以及部署的SDN应用程序的根（在当前版本中，框架只能容纳一个应用程序）。这也是启动，停止或重置框架（连同其管辖的应用程序）的Web服务器，运行Jersey RESTful Web服务框架的Jetty Web服务器，使用Jackson解析器解析JSON编码参数。REST Web服务器为框架运行一个servlet，同时为每个已部署的应用程序（目前只有一个）运行单独一个servlet。所有REST和CLI API都通过此REST Web服务器提供服务。 </p>
<p><strong>FrameworkRestService</strong> - 构成响应框架REST请求（获取最新的Flight Recorder记录，执行恢复出厂设置等）的框架servlet的一组类。FrameworkRestService针对FrameworkMgmtPoint调用控制和配置方法，并且报告它直接从相关存储库检索信息。它调用专门的FlightRecorder的方法来获取Flight Recorder。 </p>
<p><strong>FrameworkMgmtPoint</strong> - 驱动器控制和配置命令（启动，停止，重置，设置主机的地址，等等）的点。FrameworkMgmtPoint反过来按照正确的顺序调用其他相关模块的方法。它将生命周期请求（开始，停止，重置）直接转发到FrameworkMain，以按正确的顺序驱动它们。 </p>
<p><strong>Defense4All应用程序</strong> - 任何SDN应用程序（在本例中为Defense4All）都应该Implement/extendAppRoot对象。SDN应用程序没有“main”，并且它们的生命周期（启动，停止，重置）由对应用程序根对象操作的框架管理，然后应用程序根对象驱动应用程序中的所有生命周期操作。此模块还包含回框架的引用，允许应用程序使用框架服务（例如创建Repo并记录Flight Record）和常见实用程序。 </p>
<p><strong>通用类和实用程序</strong> - 一个方便的类和实用程序库，任何框架或SDN应用程序模块都可以从中受益。示例包括包装线程服务（用于异步，定期或后台执行），字符串的短散列和用户确认。 </p>
<p><strong>存储库服务</strong> - 框架理念中的关键元素之一是将计算状态与计算逻辑分离。所有持久状态都应该存储在一组存储库中，然后可以在不知道计算逻辑（框架或应用程序）的情况下进行复制，缓存，分发。存储库服务包括RepoFactory和Repo或其等价物 - EntityManager。RepoFactory负责与底层存储库插件服务建立连接，实例化新的请求存储库，并返回对现有存储库的引用。所选的底层存储库服务是通过Cassandra NoSQL DB的Hector Client。Repo呈现单个DB表的抽象。它使得能够只用表键就能读取整个表，（表仅由单个主键索引），记录单个单元，以及依照控制要求写入记录。并能够写入子记录（仅具有单元的一部分）。在这种情况下，显示的单元格覆盖存储库中的现有单元格。存储库中的其他单元格保持不变。与关系数据库（其中所有列都必须预先指定（在模式设计中）相反），Repo利用底层Cassandra支持来在相同的表中包含不同列的集合（记录），其中一些列可能甚至没有预先定义。此外，具有新列的单元可以在运行中添加或移除。RepoFactory和Repo（以及它的等价物Entity Manager）构成了一个基于与Cassandra Repository集群通信的Hector客户端库之上，针对框架和SDN应用程序目标的方便的库。Cassandra集群伸缩，跨Cassandra集群成员分发数据，以及配置读/写热切和一致性大部分封装在此层中。 </p>
<p><strong>日志记录和Flight Recorder服务</strong> - 日志记录服务使用Log4J库记录错误，警告，跟踪或提示消息。这些日志主要用为Defense4All开发人员所用。管理员可以从错误日志中获取有关故障的其他详细信息。FlightRecorder记录由Defense4All模块记录的所有航班记录，包括从外部网络元件（如ODC和AMS）接收的信息。然后，它允许用户或管理员通过REST API或CLI获取该信息。航班记录可以按类别（可以指定零个或多个）和时间范围进行过滤。FlightRecorder将所有航班记录存储在其自己的Repo中（其他repo从存储在其他区域的记录库中使用有效时间范围检索获取这些记录）。由于所有航班记录都存储在Cassandra中，Defense4All可以保留的航班记录数量仅受所有Cassandra服务器的底层持久存储容量的限制，因此即使在单个Cassandra实例上，也可以保留几个月的历史信息。 </p>
<p><strong>HealthTracker</strong> - 在Defense4All的运行时进行统一健康状况并响应严重恶化的行为。任何模块在感测到其中或任何其他模块中的意外和/或错误行为时，可以在HealthTracker中记录“健康问题”，并提供健康问题的症状。这不会直接触发Defense4All终止。这意味着在短时间内聚合的许多健康问题可能意味着Defense4All存在问题，但是偶发性和/或间歇性操作性“打嗝”可以被忽略，即使Defense4All保持小于100％可操作管理员可以始终将其重置以完全恢复）。结果，每个非永久性健康问题都随着时间的推移逐渐减弱。如果Defense4Al健康恶化低于预定义阈值，HealthTracker会根据健康问题的性质触发响应操作。重启可以治愈瞬态问题，因此HealthTracker触发Defense4All终止（作为Linux服务运行，Defense4All自动重新启动）。要从更永久的问题中恢复，HealthTracker可能还会触发Defense4All重置。如果这没有帮助，下次HealthTracker尝试更深层次的重置。作为最后手段，可以建议管理员执行出厂重置。 </p>
<p><strong>ClusterMgr</strong> - 当前未实现，<strong>所以不翻译了，保留机翻</strong>。此模块负责管理一个Defense4All集群（与Cassandra或ODC集群分开，建模为单独的层集群）。集群的Defense4All提高了高可用性和可扩展性。Defense4All框架或应用程序中的任何模块都可以向ClusterMgr注册集群操作，指定其功能是由单个还是由多个/所有活动实例（在不同的Defense4All集群成员上运行）执行。当集群成员资格更改时，ClusterMgr会通知每个模块中的每个实例其在该模块的集群操作中的角色。如果存在单个活动实例，则会通知该实例在集群中的角色，而所有其他实例都会通知它们处于待机模式。如果有多个活动实例，则通知每个活动实例关于该范围中的活动实例数及其逻辑枚举。所有状态都存储在一个全局可访问和共享的存储库中，所以模块的任何实例都是无状态的，并且可以在每个成员更改后执行任何角色。例如，在成员资格变化N之后，实例可以被枚举为7中的2个，作为执行工作的相关部分的结果。在成员变化N + 1，相同的实例可以枚举6中的5，并且执行分配给5而不是2的工作部分。跳过对等消息服务，ClusterMgr可以提供用于更协调的跨实例操作。 </p>
<p>Defense4All应用程序是高度可插拔的。它可以适应不同版本的ODC和不同AMS的不同攻击检测机制，不同攻击缓解驱动程序和驱动程序（称为代表）。Defense4All应用程序包括“核心”模块和实现定义明确的Defense4All应用程序API的“可插拔”模块。</p>
<p>应用程序视图<br><img src="https://wiki.opendaylight.org/images/thumb/3/35/D4a_application_view.jpg/1350px-D4a_application_view.jpg" alt="Defense4All Defense4All应用程序结构"><br>以下是对Defense4All应用程序模块的描述：</p>
<p><strong>DFAppRoot</strong> - Defense4All应用程序的根模块。Defense4All应用程序没有“main”，它的生命周期（启动，停止，重置）由对此模块操作的框架管理，从而驱动Defense4All应用程序中的所有生命周期操作。DFAppRoot还包含对所有Defense4All应用程序模块（核心和可插入），全局存储库和回到框架的引用的引用，从而允许Defense4All应用程序模块使用框架服务（例如创建Repo并记录航班记录）和公用实用程序。</p>
<p><strong>DFRestService</strong> - 构成Defense4All应用程序servlet的一组类，用于响应Defense4All应用程序REST请求。DFRestService针对DFMgmtPoint调用控制和配置方法，并且报告它直接从相关存储库检索信息。对于飞行记录，它调用针对FlightRecorder的方法。</p>
<p><strong>DFMgmtPoint</strong> - 驱动器控制和配置命令（如addams和addpn）的点。DFMgmtPoint反过来按照正确的顺序调用其他相关模块的方法。</p>
<p><strong>ODL Reps</strong> - 用于不同版本的ODC的可插拔模块集。包括两个子模块中的两个功能：相关流量的统计收集和流量转移。这两个子模块遵循StatsCollectionRep DvsnRep API。ODL Reps在图6和其后的描述中详细描述。</p>
<p><strong>SDNStatsCollector</strong> - 负责在指定的网络位置（物理或逻辑）为每个PN设置“计数器”。计数器是ODC可用的网络交换机和路由器中的一组OpenFlow流条目。SDNStatsCollector定期从这些计数器收集统计信息，并将它们馈送到SDNBasedDetectionMgr（请参阅下面的描述）。模块使用SDNStatsCollectionRep设置计数器并从这些计数器读取最新的统计信息。stat报告由读取时间，计数器规范，PN标签和trafficData信息列表组成，其中每个trafficData元素包含在计数器位置中为<code>&lt;protocol，port，direction&gt;</code>配置的流条目的最新字节和分组值。协议可以是<code>{tcp，udp，icmp，other ip}</code>，端口是任何第4层端口，方向可以是<code>{inbound，outbound}</code>。</p>
<p><strong>SDNBasedDetectionMgr</strong> - 用于可插拔基于SDN的检测器的容器。它将从SDNStatsCollector接收的统计信息报告给插入的基于SDN的检测器。它还从关于结束攻击的攻击分辨点（参见下面的描述）馈送所有基于SDN的检测器通知（以允许检测机制的重置）。</p>
<p><strong>RateBasedDetector子模块</strong> - 该检测器针对每个PN了解其随时间的正常流量行为，并在检测到流量异常时通知AttackDecisionPoint（参见下面的描述）。对于每个PN的每个协议{TCP，UDP，ICMP，其他IP}，RateBasedDetector保持字节和分组的最新速率和指数移动平均值（基线）以及最后读取时间。检测器保持每个计数器的这些值以及每个PN的所有计数器的聚合。在两个计算级别（计数器和PN聚合）的组织允许更好的可扩展性（例如使用集群ODC，其中每个实例负责从一部分网络交换机获得统计数据，并绕过ODC单实例映像API）。这样的组织还使得能够进行更精确的统计收集（避免在非常小的时间间隔期间收集所有统计的困难）。统计在计数器级处理，并且在PN级定期聚合。持续检测到流量异时，RateBasedDetector通知AttackDecisionPoint进行攻击检测。然后，在一段时间内没有异常，就通知检测器停止该攻击检测。检测器可以指定检测持续时间，在该检测持续时间内检测有效。之后，检测过期，但可以“延长”另一个关于相同攻击的通知。</p>
<p><strong>AttackDecisionPoint</strong> - 此模块负责在攻击生命周期内应对攻击。它可以从多个检测器接收攻击检测信息。Defense4All支持RateBasedDetector，外部检测器（未来版本可用）和基于AMS的检测器参考实现（基于Radware的DefensePro）。在当前版本中，AttackDecisionPoint完全尊重每次检测（最大检测器置信度和最大检测置信度）。它为每次检测到新攻击的流量（PN，协议和端口）声明一个新的攻击，并且为现有（已声明的）攻击增加更多的检测。模块定期检查所有攻击的状态。只要至少有一个未到期的检测（每个检测都有一个到期时间），就会继续声明攻击。如果对于给定攻击的所有检测都过期，则AttackDecisionPoint声明攻击已经结束。模块通知MitigationMgr（见下面的描述）开始减轻任何新的声明的攻击。它通知MitigationMgr停止缓解已结束的攻击，并通知detectMgr重置对攻击刚刚结束的流量的统计计算。</p>
<p><strong>MitigationMgr</strong> - 用于驱动可插拔攻击缓解程序的容器。MitigationMgr维护所有攻击缓解，并负责通知来自AttackDecisionPoint的攻击缓解请求的结果。它包含预先排好序列的MitigationDriver子模块，并尝试按照该顺序满足每个攻击缓解。如果MitigationDriveri向MitigationMgr指示它不缓解一个攻击缓解（由于每个PN偏好，AMS资源的不可用性，网络问题等），MitigationMgr将尝试通过MitigationDriveri + 1进行缓解。如果没有插入的MitigationDrivers处理缓解，则它仍处于“未缓解”状态。</p>
<p><strong>MitigationDriverLocal</strong> - 此缓解驱动程序负责在其管理范围内使用AMS来驱动攻击缓解。当请求缓解攻击时，此缓和剂执行以下步骤顺序：</p>
<ol>
<li>它向可插入DvsnRep（见下面的描述）咨询关于从每个相关网络位置的每个管理的AMS的拓扑可行的转移选项。在此版本中，转移始终从安装统计计数器的位置执行。</li>
<li>MitigationDriverLocal在所有可行选项中选择一个AMS（在第一个版本中，只选择列表中的第一个）。</li>
<li>在指示将业务转移到每个AMS之前，它随机分配所有AMS（每个转向源可以有与其相关联的不同AMS）。这是通过插入AMSRep完成的。</li>
<li>MitigationDriverLocal指示DvsnRep，将来自每个源NetNode（在此版本中，NetNode为SDN交换机）的流量转移到与该NetNode相关联的AMS。转移可以仅用于入站流量，也可以用于入站和出站流量。</li>
<li>攻击缓解驱动程序通知AMSBasedDetector开始监视所有AMS中的攻击状态，并将攻击检测馈送到AttackDecisionPoint。</li>
<li>在未来版本中，MitigationDriverLocal会监视所有AMS和网络拓扑的相关部分的运行状况，可以重新选择AMS（如果该AMS缓解失败），或者依照网络拓扑变动重新选择AMS。<br>当缓解应该结束时，MitigationDriverLocal通知AMSBasedDetector停止监视已结束攻击的攻击状态，通知DvsnRep停止对所有AMS的流量转移以进行此缓解，最后通知AMSRep可选地清除每个缓冲中的所有缓解相关配置集相关的AMS。</li>
</ol>
<p><strong>AMSBasedDetector</strong> - 此可选模块（可以打包为AMSRep的一部分）负责监视/查询AMS的攻击缓解。注册为检测器，此模块然后可以通知AttackDecisionPoint有关攻击持续和结束。它仅监视指定的AMS，并且仅监视指定（攻击的）流量。</p>
<p><strong>AMSRep</strong> - 用于不同AMS的可插拔模块。该模块遵守AMSRep API。它可以支持所有引入的AMS的配置（永久或在攻击缓解之前/之后）。它还可以接收/查询安全信息（攻击状态），以及操作信息（健康，负载）。AMSRep模块是完全可选的 - AMS可以在外部配置和监控。在许多情况下，攻击可以继续通过SDN计数器单独监控。Defense4All包含与Radware的DefensePro AMS通信的参考实现AMSRep。</p>
<h2 id="ODL代表视图"><a href="#ODL代表视图" class="headerlink" title="ODL代表视图"></a>ODL代表视图</h2><p><img src="https://wiki.opendaylight.org/images/thumb/5/54/D4a_odl_reps_view.jpg/1350px-D4a_odl_reps_view.jpg" alt="Defense4All Defense4All ODL Reps结构"><br>上图描述了Defense4All应用程序ODL Reps模块集结构。不同版本的OFC可以用ODL Reps模块集的不同版本实现。ODLReps包括两个功能：相关流量的统计收集和流量转移。这两个功能或任一功能可以在给定部署中使用。因此，它们在与ODC通信，并保存ODC的所有一般信息（见下文）具有相通之处。</p>
<p>ODL Reps支持两种类型的SDN交换机：sdn-hybrid，支持SDN和传统路由; sdn-native，支持仅SDN路由。在传统路由中，通过对预设流表和动作“send to normal”的流条目进行计数来计算sdn混合交换机上的流量。在sdn-native交换机上计数流量需要一个显式路由操作（将流量发送到哪个输出端口）。Defense4All通过要求一个sdn本地交换机避免学习所有路由表，该交换机或多或少是相对于流量路由的有线路径（即，进入端口1的流量通常退出端口2，进入端口3的流量通常退出端口4反之亦然）。<strong>（Defense4All avoids learning all routing tables by requiring an sdn-native switch which is more or less a bump-in the wire with respect to traffic routing (that is, traffic entering port 1 normally exits port 2 and traffic entering port 3 normally exits port 4 and vice versa).）</strong>这种交换机允许简单地对流条目进行编程，以便计数流量或者将流量转移到附接的AMS /从附接的AMS转移流量。当Defense4All编写具有包括端口1的选择标准的流量计数流条目时，其操作被输出到端口2，并且类似地被输出从3到4.在未来的版本中，该限制被排除。</p>
<p>以下是子模块的描述：</p>
<p><strong>StatsCollectionRep</strong> - 该模块遵守StatsCollectionRep API。其主要任务是：</p>
<ul>
<li>在网络中提供计数器展示位置NetNodes。提供的NetNodes是为PN定义的所有NetNode。这基本上映射了哪些SDN交换给定PN流的业务。</li>
<li>在选定的NetNodes中添加一个平时计数器，以收集给定PN的统计信息。StatsCollectionRep为每个PN中的NetNode创建一个单独的计数器。（总体上，NetNode可以具有用于不同PN的多个计数器;并且PN可以在为给定PN指定的NetNode中具有多个计数器）。StatsCollectionRep将NetNode中的计数器的安装转换为为NetNode端口中的每个“北向接口”编程四个流条目（对于TCP，UDP，ICMP和其余IP），从客户端到受保护的PN进入SDN交换机。例如，StatsCollectionRep对具有三个端口的SDN交换机中的给定PN 12流条目添加，其中PN的入站业务进入OFS。并且，如果指定另一个NetNode（SDN交换机）使该PN的入站流量通过两个端口进入，则StatsCollectionRep在该第二个NetNode中为该PN添加八个流条目。</li>
<li>删除一个平时计数器。</li>
<li>读取指定计数器的最新计数器值。StatsCollectionRep返回在每个方向上（每个方向上当前只支持“从北向南”）为每个协议端口计数的最新字节和分组的向量，以及从ODC接收到读取的时间。</li>
</ul>
<p><strong>DvsnRep</strong> - 该模块遵守DvsnRep API。其主要任务是：</p>
<ul>
<li>将指定NetNode的转移属性返回给定的AMS。在这个版本中，如果这样的转移是拓扑可行的（AMS直接附加到指定的NetNode被建模的SDN交换机上，则返回空属性，否则不返回任何属性，这在将来的版本中留有用于远程转移的空间，每个远程AMS的拓扑成本，例如延迟，带宽预留和成本）。</li>
<li>通过AMS转发（攻击）来自指定NetNode的流量。因此，新的流条目优先于和平时段的流条目。DvsnRep编程流条目，以将每个“北向接口”的入站攻击流量（如果PN需要的话，也可以为所有流量）转移到AMS“北”端口。如果已经为该PN指定了“对称转移”（对于入站和返回，出站业务），DvsnRep编程另一组流条目以将来自每个“南业务端口”的受攻击（或所有）流量转移到AMS“南”港口。在sdn混合交换机部署中，DvsnRep为从AMS南端口返回的入站流量添加流条目，并将操作发送到正常，并且类似地，它为来自AMS北端口的出站返回流量添加流条目，也送正常。在SDN本地交换机中，操作是发送到正确的输出端口，但是如果这种情况下，过程对于确定正确的端口更复杂。北端口MAC学习用于从分组中的源/目的MAC确定正确的输出端口。这种流条目的方案适用于TCP，UDP和ICMP攻击。对于“其他IP”攻击，流条目编程更复杂，这里为了清楚起见而被抑制。被编程为转移（但仍然计数）业务的流条目的集合包括“攻击业务量楼层”。可能有许多攻击流量楼层，所有这些都优先于和平时间统计收集楼层（通过编程较高优先级流条目）。额外的攻击（除了“其他IP”攻击，这是一种特殊情况，在此被抑制）创建具有高于先前设置的攻击流量楼层的优先级流量楼层。攻击可以完全或部分地“早期”攻击（例如，通过TCP的TCP端口80，反之亦然），或者不连接（例如TCP和UDP）。统计收集来自所有交通楼层，包括平时和攻击。基于SDN的检测器将所有统计数据聚合为总速率，从而确定攻击是否仍在进行中。（请注意，黯淡的和平时间计算的交通可能显示零利率，并且计数由较高优先权楼层计数器补充）。<strong>在细看</strong></li>
<li>结束转移。DvsnRep删除相关的攻击流量层（即从NetNode中删除其所有流条目）。注意，这既不影响已移除楼层“上方”的流量层，也不影响“下面的流量层”。此外，基于SDN的检测器从剩余楼层的计数器接收相同的累计费率，因此其操作也不受影响。</li>
</ul>
<p><strong>ODLCommon</strong> - 此模块包含编程ODC中流条目所需的所有常见元素。这允许通过StatsCollectionRep和DvsnRep对配置的ODC（在该版本中，至多一个）进行相干编程。例如ODLCommon实例化与ODC的连接，维护分配给每个ODC的编程流条目和cookie的列表。它还维护对DFAppRoot和FrameworkMain的引用。为每个受保护链路添加sdn本地NetNode时ODLCommon（输入到输出端口对）添加2个流条目，以在两个端口之间传输流量（进入北端口的流量路由到南端口，反之亦然）。ODLCommon为连接到AMS的每个端口添加两个流条目，以阻止返回ARP流量（以便在未配置AMS的情况下避免ARP洪泛）。该“公共业务层”流条目被设置为具有最低优先级。他们的柜台既不是统计收集也不是交通分流。当删除NetNode时，ODLCommon删除此公共流量底层流条目。</p>
<p><strong>FlowEntryMgr</strong> - 此模块提供了一个API，用于对ODC管理的SDN交换机中的流条目执行操作，并检索有关ODC管理的所有节点的信息。流条目操作包括在指定的NetNode（SDN交换机/路由器）中添加指定的流条目，移除流条目，切换流条目，获得流条目的详细信息以及读取由流条目收集的统计信息。FlowEntryMgr使用连接器模块与ODC通信。</p>
<p><strong>连接器</strong> - 此模块提供了包括REST通信的与ODC通信的基本API调用。在使用指定的ODC初始化连接详细信息后，连接器允许从ODC获取或删除数据，以及将数据发布或放入ODC。</p>
<p><strong>ODL REST Pojos</strong> - 此组Java类是ODC REST API的一部分，指定参数的Java类和与ODC交互的结果。</p>
<h2 id="基本控制流程"><a href="#基本控制流程" class="headerlink" title="基本控制流程"></a>基本控制流程</h2><p>控制流在逻辑上根据模块运行时依赖性排序，因此如果模块A依赖于模块B，则应在模块A之前初始化模块B，并在模块A之后终止。Defense4All应用程序模块依赖于大多数Framework模块，WebServer除外。</p>
<ul>
<li>启动 - Defense4All初始化所有模块并重新应用以前配置的基础架构和安全设置，从持久性存储库获取它们。在启动过程结束时，Defense4All恢复其先前的操作。</li>
<li>终止 - 重新启动 - Defense4All将任何相关数据保存到稳定的存储库中，并自行终止。如果终止是重新启动，则自动重新启动机制重新启动Defense4All。否则（如升级）Defense4All不会自动重启。</li>
<li>复位 - 在此流程中，所有模块都复位为出厂设置。这意味着将删除所有动态获取的数据以及用户配置。<h2 id="配置和设置流程"><a href="#配置和设置流程" class="headerlink" title="配置和设置流程"></a>配置和设置流程</h2></li>
<li>OFC（OpenFlowController = ODC） - 当DFMgmtPoint从DFRestService接收到添加OFC的请求时，它首先在OFC的Repo中添加OFC记录，然后通知ODLStatsCollectionRep和ODLDvsnRep，它们又通知ODL发起到添加的OFC（ODC）。ODL实例化用于与ODC通信的REST客户端。</li>
</ul>
<ul>
<li>NetNode - 可以添加多个NetNodes。每个NetNode对交换机或类似的网络设备及其流量端口，受保护的链路和与AMS的连接建模。当DFMgmtPoint从DFRestService接收到添加NetNode的请求时，它首先在NetNodes Repo中记录添加的NetNode，然后通知ODLStatsCollectionRep和ODLDvsnRep，然后通知MitigationMgr。ODLStatsCollectionRep和ODLDvsnRep然后通知ODL，并且ODL安装低优先级流条目以在受保护链路的端口对之间传递流量。MitigationMgr通知MitigationDriverLocal，它更新其NetNode-AMS连接组以从给定的NetNodes中转移AMS的一致性分配。</li>
</ul>
<ul>
<li>AMS - 可以添加多个AMS。当DFMgmtPoint从DFRestService接收到添加AMS的请求时，它首先在AMS的Repo中记录添加的AMS，然后通知AMSRep。AMSRep可以选择在添加的AMS中预配置保护功能，并开始监控其运行状况。</li>
</ul>
<ul>
<li>PN - 可以添加多个PN。当DFMgmtPoint从DFRestService接收到添加PN的请求时，它首先在PN的Repo中记录添加的PN，通知MitigationMgr，然后最终通知DetectionMgr。MitigationMgr通知MitigationDriverLocal，然后通知AMSRep。AMSRep可以预配置此PN的AMS以及其EventMgr以接受与该PN的业务相关的事件。DetectionMgr通知RateBasedDetector，然后通知StatsCollector。StatsCollector查询ODLStatsCollectionRep可能放置此PN的统计信息收集计数器。ODLStatsCollectionRep返回为此PN配置的所有NetNodes（如果没有配置，则返回当前已知为Defense4All的所有NetNodes）。StatsCollector“选择”计数器位置选项（此版本中唯一可用的选项）。对于每个NetNode，它然后询问ODLStatsCollectionRep以创建用于主题PN的计数器。计数器本质上是在每个北通信端口上针对感兴趣的协议（TCP，UDP，ICMP和其余IP）设置的一组流条目。计数器被给予优先级，并且这构成了平时通信量楼层（通过周期性地读取所有计数器流条目通信量计数值来监视通信量）。因为PN可以在重新启动时被重新引入，或者网络拓扑的改变可能需要重新计算计数器位置，所以一些/所有计数器可能已经就位。仅添加新计数器。不再删除的计数器。ODLStatsCollectionRep根据NetNode类型配置流条目。对于混合NetNodes，流条目操作是“发送到正常”（继续到传统路由），而对于本地NetNodes，操作是匹配输出端口（在每个受保护的链路中）。OdlStatsCollectionRep调用ODL来创建每个指定的流条目。后者调用FlowEntryMgr和Connector将请求发送到ODC。</li>
</ul>
<h2 id="攻击检测流程"><a href="#攻击检测流程" class="headerlink" title="攻击检测流程"></a>攻击检测流程</h2><p>周期性地，StatsCollector请求ODL StatsCollectionRep向ODC查询每个配置的PN的每个集合计数器的最新统计。ODLStatsCollectionRep调用FlowEntryMgr以获取计数器中每个流条目的统计信息。后者调用连接器从ODC获取所需的统计信息。</p>
<p>ODLStatsCollectionRep将获得的结果聚合在stats（每个协议的最新字节和包读取）向量中，并返回该向量。StatsCollector将每个计数器stats向量提供给DetectionMgr，然后它将stats向量转发到RateBasedDetector。RateBasedDetector维护每个计数器的统计信息以及每个PN的聚合计数器统计信息。统计信息包括先前读取的时间，以及对于每个协议的最新速率和指数平均值。</p>
<p>RateBasedDetector检查与平均值的显着和延长的最新速率偏差，并且如果在PN聚合等级中发现这样的偏差，则它通知攻击判断点关于攻击检测。只要偏差继续，RateBasedDetector继续通知AttackDecisionPoint关于检测。它为每个检测通知设置到期时间，并且可重复的通知基本上延长检测到期。</p>
<p>AttackDecisionPoint尊重所有检测。如果它已经声明对该协议端口的攻击，则AttackDecisionPoint将附加检测与该现有攻击相关联。否则，它会创建一个新的攻击，并通知MitigationMgr缓解该攻击（如下所述）。AttackDecisionPoint定期检查每个实时攻击的所有检测的状态。如果所有检测已过期，AttackDecisionPoint声明攻击结束，并通知MitigationMgr停止缓解攻击。</p>
<h2 id="攻击缓解流程"><a href="#攻击缓解流程" class="headerlink" title="攻击缓解流程"></a>攻击缓解流程</h2><p>MitigationMgr在接收到来自AttackDecisionPoint的缓解通知时，尝试找到插入的MitigationDriver来处理缓解。目前，它只请求插入MitigationDriverLocal。</p>
<p>MitigationDriverLocal检查是否存在已知，实时和可用的AMS，受攻击（或所有）流量可以从受攻击流量流经的NetNodes转向。它选择一个合适的AMS并在将攻击流量转移到所选择的AMS之前对其进行配置。例如，MitigationDriverLocal从Repo检索相关的协议平均值，并通过AMSRep在AMS中配置它们。</p>
<p>MitigationDriverLocal然后请求ODLDvsnRep将来自PN流量流经的每个NetNode的受攻击的PN协议端口（或所有PN）流量转移到所选择的AMS。</p>
<p>ODLDvsnRep创建新的最高优先级流量层（其包含优先级高于先前设置的流量层中的任何流条目的流条目）。流量层包含所有流条目，以转移和计数从每个入口/北行流量端口到AMS的流量，并且从AMS返回到相关输出（南向）端口。可选地，转向可以是“对称的”（在两个方向上），在这种情况下，流条目被添加以将流量从南向端口转移到AMS中，并且从AMS返回到北向端口。注意，StatsCollector将此添加的流量地板视为任何其他<strong>（？）</strong>，并将获取的统计信息从此层传递到DetectionMgr / RateBasedDetector。因为对于给定的PN，流量底板被聚合（在相同的NetNode中以及在NetNodes中），所以合并的速率保持与转移之前相同。与ODLStatsCollectionRep一样，ODLDvsnRep也使用较低级别的模块在所需的NetNodes中安装流条目。</p>
<p>最后，MitigationDriverLocal通知AMSRep可选地开始监视此攻击，并通知AttackDecisionPoint如果攻击继续或新的攻击发展。AMSRep可以通过AMSBasedDetector模块来实现。</p>
<p>如果MitigationDriverLocal找不到合适的AMS，或无法配置其任何缓解步骤，则它将中止缓解尝试，异步通知MitigationMgr。减缓措施然后保持在“无资源”状态。</p>
<p>当MitigationMgr接收到停止缓解攻击的通知时，它会将此通知转发到相关（且目前是唯一的）MitigationDriver，MitigationDriverLocal。MitigationDriverLocal在缓解开始时反转动作。它通知AMSRep停止监视此攻击，取消被攻击流量的转移，最后通知AMSRep可选地删除预缓解配置。</p>
<h2 id="问题和故障排除"><a href="#问题和故障排除" class="headerlink" title="问题和故障排除"></a>问题和故障排除</h2><p>(defense4all已经停止开发了，所以这部分无所谓了)<br>除了下面列出的过程，还参考Defense4All日志有关您遇到的具体问题的信息。Defense4All日志位于/var/log/Defense4All/server.log。</p>
<p>Defense4All无法启动 - 如果WebServer无法启动，请检查是否与端口号存在冲突。Defense4All使用端口8086.如果RepoFactory无法初始化，请检查Cassandra服务是否正在运行（sudo服务Cassandra停止/启动/重新启动）。如果Defense4All无法初始化，则问题可能在于系统资源（如线程或内存）。尝试重新启动机器。另一个问题可能会损坏Cassandra DF DB（键空间）。如果是，请尝试执行还原或重置（请参阅准则）。</p>
<p>Defense4All无法终止 - 可能是其WebServer崩溃。在这种情况下停止Defense4All的唯一方法是使用以下命令杀死其JVM Linux进程：kill -9 <defense4all-jvm-process-number></defense4all-jvm-process-number></p>
<p>Defense4All无法重置 - 启动Defense4All的一些问题也可能适用于重置。具体来说，Cassandra服务应该重置。如果重置失败，您可能需要手动清除Cassandra，如下所示：</p>
<p>卡桑德拉 - 克利<br>drop keyspace DF;<br>放弃;<br>Defense4All无法添加OFC - 检查故障原因（REST或CLI）。除了不正确的参数之外，问题可能是添加的PFC不存在或在API中指定的可寻址性（地址+端口）或安全性（用户+密码）。此外，Cassandra服务应该启动。</p>
<p>Defense4All无法添加NetNode - 检查故障原因（REST或API）。除了不正确的参数，Cassandra服务可能已关闭。</p>
<p>Defense4All无法添加AMS - 检查故障原因（REST或API）。除了不正确的参数，Cassandra服务可能已关闭。另外，问题可能在于AMS不存活或未连接。</p>
<p>Defense4All无法删除AMS - 检查故障原因（REST或API）。除了不正确的参数，Cassandra服务可能已关闭。另外，问题可能在于AMS不存活或未连接。</p>
<p>Defense4All无法添加PO - 检查失败原因（REST或API）。除了不正确的参数，Cassandra服务可能已关闭。此外，问题可能是PFC可能不存在并连接。</p>
<p>Defense4All无法删除PO - 检查失败原因（REST或API）。除了不正确的参数外，Cassandra服务可能已关闭。此外，问题可能是DF_GLOBAL_PNS表（列族）已损坏，因此应该完全删除，如下所示：</p>
<p>Cassandra-cli<br>使用DF;<br>截断列族DF_GLOBAL_PNS;<br>另一个问题可能是控制器没有启动，所以Defense4All无法删除它已经设置。</p>
<p>Defense4All无法检索/转储/清理飞行记录器日志记录 - 检查故障原因（REST或API）。除了不正确的参数外，Cassandra服务可能已关闭。此外，问题可能是FWORK_FLIGHT_RECORDER_EVENTS或FWORK_FLIGHT_RECORDER_SLICES表（列族）已损坏，因此两者都应完全删除，如下所示：</p>
<p>Cassandra-cli“<br>使用DF;<br>截断列族FWORK_FLIGHT_RECORDER_EVENTS;<br>截断列族FWORK_FLIGHT_RECORDER_SLICES;<br>警告：截断这些列族将导致当前存储在Cassandra中的所有航班记录的丢失。</p>
<p>Defense4All无法检索攻击或缓解 - 检查失败原因（REST或API）。除了不正确的参数外，Cassandra服务可能已关闭。此外，问题可能是DF_GLOBAL_ATTACKS / DF_GLOBAL_MITIGATIONS表（列族）已损坏，因此应该完全删除，如下所示：</p>
<p>Cassandra-cli<br>使用DF;<br>截断列族DF_GLOBAL_ATTACKS或DF_GLOBAL_MITIGATIONS;<br>警告：截断这些列族将导致丢失当前攻击和缓解的所有记录。在这种情况下，流量重定向流条目可能需要从所有相关的NetNodes手动删除（寻找优先级5X，7X，9X，等等，与action重定向）。</p>
<p>Defense4All操作错误和故障 - 根据错误/故障的性质，外部实体（Cassandra，PFC，NetNodes，AMS）的活性可能需要检查/重新启动。如果是内部Defense4All错误，应按此顺序尝试以下恢复步骤：</p>
<p>Defense4All重启<br>重新启动Defense4All宿主机<br>Defense4All重置并可能还原到较早的状态（以及手动清理由Defense4All设置的流条目和AMS配置）。<br>未检测到攻击 - 检查Defense4All日志，以查看在stats收集和检测机制中是否记录了任何错误。检查PFC和相关NetNodes是否存活。检查与平均值相比的最新速率。平均值可能偏斜，但重置Defense4All在攻击期间没有帮助，因为Defense4All将获得歪斜的平均值。等待攻击结束，然后重置Defense4All，并重新添加受攻击的PO。</p>
<p>缓解状态NO_RESOURCES - 这意味着Defense4All mitigationDriverLocal无法驱动此缓解，因为内部Defense4All错误或缺少AMS资源。如果确实没有AMS资源，则不需要恢复。否则检查相关AMS的活性。还要检查Cassandra是否正在运行，如果PFC已启动，并且如果相关的NetNode正在运行。如果存在Defense4All内部错误（根据Defense4All日志），则可能会在DF_GLOBAL_ATTACKS / DF_GLOBAL_MITIGATIONS表（列系列）中出现损坏，因此应全部删除，如下所示：</p>
<p>Cassandra-cli<br>使用DF;<br>截断列族DF_GLOBAL_ATTACKS或DF_GLOBAL_MITIGATIONS;<br>后续检测将重新创建相关的攻击和缓解记录。如果这没有帮助，请重新启动Defense4All。</p>
<p>缓解未终止 - 清除此缓解中的外部元素，如下所示：</p>
<p>手动删除相关攻击。<br>重新启动Defense4All。<br>重置Defense4All。<br>连续性<br>服务连续性（而不是高可用性）在这里定义为在存在中断事件的情况下以可承受的成本提供所需级别的服务的能力，其中</p>
<p>中断事件可以是加载，更改，逻辑错误，故障和灾难，管理操作（如升级），外部攻击等。<br>服务级别可以包括响应时间，吞吐量，数据/操作的生存性，安全/隐私等。对于每种类型的事件，在不同的事件处理阶段，所需的服务级别可以针对每个服务功能而不同。<br>成本可以包括人（数量，专业知识），设备（硬件，软件），设施（空间，电力）。<br>集群和容错 - 集群有助于解决可伸缩性和高可用性。如果其中一个集群成员失败，另一个集群成员可以快速承担其责任。这克服了成员故障，成员托管机器故障和成员网络连接故障。Defense4All集群安排在未来版本。在版本1.0中，Defense4All作为Linux可重新启动服务运行，因此如果它失败，托管Linux操作系统恢复Defense4All。这可以克服间歇性/偶发性Defense4All故障。Defense4All宿主机的故障意味着更长的时间和温和的额外的人类努力恢复机器及其托管的Defense4All。如果机器无法启动，Defense4All可以在网络中的另一台机器上启动。为了确保Defense4All恢复其操作（而不是从头开始重新启动），必须在该计算机上预加载Defense4All（最新或更早）状态快照。非集群环境会影响从机器故障中恢复的时间和人力。时间因素不那么重要，因为Defense4All运行路径不足，所以其较长的非可用性期间意味着较长的时间来检测和减轻新的攻击。</p>
<p>状态持久性 - Defense4All保持在同一台机器上运行的Cassandra DB中的状态。在版本1.0中，仅配置一个Cassandra实例集群。只要本地稳定存储不会崩溃，Linux4重新启动Defense4All服务就能使Defense4All从Cassandra快速检索其最新状态并恢复其最新操作。在发生故障和重新启动承载Defense4All的机器时也会发生同样的情况。采取Defense4All状态备份，并在另一台机器上恢复允许恢复该机器上的Defense4All操作。多节点Cassandra集群（计划用于未来版本）将增加状态持久性，同时减少恢复时间和工作量。</p>
<p>重新启动过程 - 当Defense4All（re）启动时，它首先检查保存的配置数据，并对所有相关模块重新执行配置步骤，驱动任何相关的外部编程和/或配置操作（例如针对PFC或AMS设备），例如，重新添加PO。此配置重放和原始配置之间的唯一区别是，保留任何动态获取的数据，例如所有PO统计信息。这允许轻松达到内部一致性，特别是在Defense4All或其主机计算机崩溃的情况下。当针对外部实体重放配置动作派生时，例如添加缺失的PO统计计数器，并且去除不再需要的计数器，也达到与外部实体的一致性。Defense4All变得可操作（启动其Web服务器），让您或一些其他组件根据可能的更改完成Defense4All缺少的配置，而Defense4All关闭。这导致达到端到端的一致性。</p>
<p>Reset - Defense4All允许您重置其动态获取的数据和配置信息（恢复出厂设置）。这使您能够克服许多逻辑错误和错误配置。注意，Defense4All重新启动或故障转移不会克服这样的问题。因此，这种机制是对重新启动 - 故障转移机制的补充，通常应该作为最后手段应用。</p>
<p>故障隔离和健康跟踪器 - 在Defense4All中，故障隔离以立即恢复或补偿（尽可能多）失败的形式发生，并在称为健康跟踪器的特殊模块中记录故障。除了少数实质性故障（例如无法启动框架），任何模块中的任何故障都不会立即导致Defense4All停止。相反，每个模块在其范围内记录每个故障，提供严重性规范和故障持久性的指示。如果所有故障的组合严重性（永久或临时）超过全局设置的阈值，HealthTracker会触发Defense4All关闭（并由Linux进行复原）。以后，永久或重复的临时故障将导致HealthTracker触发Defense4All软动态和动态重置（动态获取的数据）或建议管理员执行恢复出厂设置（也包括配置信息）。</p>
<p>状态备份和恢复 - 管理员可以对Defense4All状态进行快照，将备份保存在其他位置，然后恢复到原始或新的Defense4All位置。这允许克服某些逻辑错误和错误配置，以及承载Defense4All的机器的永久故障。要快照Defense4All状态，请执行以下操作：</p>
<p>停顿（关闭）Defense4All，导致当前状态刷新到稳定的存储）。避免在恢复时执行任何配置更改，避免新的状态更改。<br>获取Defense4All DB - “DF”的Cassandra快照：有关备份还原准则，请参阅 <a href="http://www.datastax.com/docs/1.0/operations/backup_restore。" target="_blank" rel="external">http://www.datastax.com/docs/1.0/operations/backup_restore。</a><br>将快照文件复制到所需的存储归档。<br>要将Defense4All备份恢复到目标计算机，请执行以下操作：</p>
<p>在目标计算机中恢复所需的已保存快照（与备份相同或不同）。有关Cassandra备份 - 恢复指南，请参阅<a href="http://www.datastax.com/docs/1.0/operations/" target="_blank" rel="external">http://www.datastax.com/docs/1.0/operations/</a> backup_restore。<br>在该机器上启动Cassandra。<br>在该机器上启动Defense4All。<br>维护和升级<br>关于升级的一个关键问题是数据的格式是否改变。未来版本的Defense4All将必须通过以下两种方式之一处理更改的数据格式：</p>
<p>作为升级过程的一部分，自动升级存储库中的状态格式<br>需要Defense4All重置，然后删除所有现有存储库表，然后创建新格式的表。<br>有关升级的另一个关键问题是与外部实体的兼容性：OFC，NetNodes和AMS。升级版本中的StatsCollectionRep，DvsnRep和AmsRep必须能够处理其外部实体，无论是从头开始还是从先前设置的配置和在运行时获得的数据。</p>
<p>Defense4All升级过程包括：</p>
<p>备份它的状态<br>或者出厂重置它<br>停止它<br>升级任何外部实体<br>升级它<br>（Re）启动它<br>要降级Defense4All：</p>
<p>出厂复位<br>停下来<br>降级任何外部实体<br>降级它<br>在升级之前恢复其备份状态<br>启动它<br>因为在这个版本Defense4All没有集群，集群滚动升级不适用这里。</p>
<p>新术语和概念<br>AMS - 攻击减轻系统，用于检测，减轻和报告网络攻击。例如，Radware的DefensePro是一种能够检测，减轻和报告大量网络攻击的AMS。<br>攻击 - 怀疑或检测到PN上的DDoS或其他网络攻击。攻击可以是网络链路，目的地址，协议或第4层端口的任何组合。Defense4All维持攻击生命周期，其中它试图根据每个主题PN的规范来减轻攻击。<br>检测 - 检测到监控的交通异常的指示。检测具有到期时间，并且可以更新。<br>缓解 - 正在执行以缓解给定攻击的活动。在本版本中，所有攻击都通过将攻击流量转移到DefensePro来缓解，并将干净的流量重新注入VTN。<br>NetNode - 模拟交换机或类似的网络设备，以及其流量端口，受保护的链路和与AMS的连接。NetNode指定一个或多个PN的业务通常流过（如果不被重定向）和/或AMS连接到的感兴趣的网络位置。在和平时间Defense4All通过该PN的业务流在每个网络中设置PN的计数器。攻击Defense4All选择一个或多个连接到引入的NetNodes的AMS，并将攻击/所有流量重定向到连接到这些NetNode的AMS。<br>OFC - 支持OpenFlow网络编程的SDN控制器（OFC代表OpenFlow控制器）。OpenDaylight控制器为支持OpenFlow的网络设备和其他网络设备提供这种风格。<br>受保护网络（PN） - 这是具有给定保护规范的用户定义的受保护网络元素。网络由两部分的任意组合指定：1）网络地址范围（并且可选地仅协议L4端口），以及2）指定业务流经过的网络链路。两个部分（但不是两者）中的任一个可以是未指定的。在版本1.0中，仅实现了第二部分。保护规范指示与对主题PN的攻击的检测和缓解相关的属性的范围。<br>受保护对象（PO​​） - 在Defense4All中，受保护网络（PN）称为受保护对象（PO​​）。<br>保护链路 - 交换机中的一组入口 - 出口端口。Defense4All通过要求在网络拓扑中设置为“bump-in-the-wire”的sdn-native开关，避免学习所有路由表。Defense4All程序使未攻击的流量进入其中一个入口 - 出口对端口以退出另一个。<br>sdn-hybrid和sdn- native - 有两种类型的SDN交换机：sdn-hybrid，它支持SDN和传统路由，sdn-native支持仅SDN路由。在sdn混合交换机上计数流量可以通过对具有期望的流量选择标准的流条目进行编程来完成，并且动作被发送到正常，意味着继续传统路由。对sdn本机交换机上的流量计数需要显式路由操作（将流量发送到哪个输出端口）。Defense4All通过需要一个sdn本地交换机来避免学习所有路由表，该交换机或多或少是相对于流量路由的线路，意味着进入端口1的业务通常退出端口2，进入端口3的业务通常退出端口4，反之亦然。这样的开关允许简单地对流条目进行编程，以便计数流量或将流量转移到附接的AMS /从附接的AMS转移流量。当Defense4All对包含端口1的选择标准的流量计数流条目进行编程时，其操作将输出到端口2，类似于3到4.此限制预计在将来的版本中取消。另请参阅受保护的链接项。<br>流量楼层 - 在给定的NetNode上Defense4All程序的一组流条目。不同的PN具有它们自己的业务层用于和平时间攻击检测，以及用于攻击缓解的业务重定向。攻击流量楼层包含优先级高于该PN的所有先前设置的攻击缓解流量楼层的流条目，以及平时流量楼层（其包含仅用于计数PN流量以便学习行为和异常的流条目）。攻击可以完全或部分地删除早期的攻击（例如TCP上的TCP端口80通过TCP或反之亦然）或不连接（例如TCP和UDP）。统计收集来自所有交通楼层：平时和攻击。基于SDN的检测器将所有统计信息汇总到总速率，确定攻击是否仍然开启。被削减的和平时间计数的交通可以显示零利率，并且计数由更高优先权的楼层计数器补充。<br>流量端口 - 北Vexternal，流量通过该端口进入PN的VTN。ProtectedLink是NetNode中的Vbridge的名称。<br>其他信息<br>安全和隐私<br>Defense4All REST API目前不检查凭据。它也不根据允许或限制某些REST API的使用来定义用户角色。</p>
<p>兼容性<br>这个Defense4All版本（1.0.7）与ODC 1.0兼容。AmsRep的参考实现是通过Radware的DefensePro版本：硬件版本ODS-VL，软件版本6.03,6.07和6.09。</p>
<p>性能和可伸缩性信息<br>TBD。</p>
<p>参考资料<br>[ODC]</p>
<p>返回Defense4All用户指南页面</p>
<p>隐私政策 关于OpenDaylight项目 免责声明<br> 的页面</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">SDN</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/02/23/SDN_defense4all/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-SDN_Link" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/08/SDN_Link/">SDN收藏夹</a>
    </h1>
  

        
        <a href="/2017/01/08/SDN_Link/" class="archive-article-date">
  	<time datetime="2017-01-08T05:24:31.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-08</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="SDN收藏夹"><a href="#SDN收藏夹" class="headerlink" title="SDN收藏夹"></a>SDN收藏夹</h2><hr>
<h3 id="OpenDayLight操作"><a href="#OpenDayLight操作" class="headerlink" title="OpenDayLight操作"></a>OpenDayLight操作</h3><p><a href="http://www.sdnlab.com/1749.html" target="_blank" rel="external">ODL与mininet</a><br><a href="http://docs.opendaylight.org/en/stable-boron/getting-started-guide/common-features/clustering.html" target="_blank" rel="external">ODL控制器集群</a><br><a href="https://github.com/yeasy/tech_writing/blob/master/SDN/OpenDaylight%20Controller%20%E7%AE%80%E6%98%93%E5%85%A5%E9%97%A8.pdf" target="_blank" rel="external">简单入门(13年12月)</a>  </p>
<hr>
<h3 id="OpenDayLight编程开发"><a href="#OpenDayLight编程开发" class="headerlink" title="OpenDayLight编程开发"></a>OpenDayLight编程开发</h3><p><a href="http://blog.csdn.net/heriam/article/details/50411303" target="_blank" rel="external">Linux编译环境搭建</a><br><a href="http://www.sdnlab.com/17124.html" target="_blank" rel="external">windows下环境搭建</a>(<a href="http://www.sdnlab.com/author/3836/" target="_blank" rel="external">该文作者系列文章</a>)<br><a href="https://wiki.opendaylight.org/view/OpenDaylight_Controller:Building_from_CLI" target="_blank" rel="external">官方maven编译安装教程</a><strong>注意maven编译的时候可能需要使用代理来访问远端maven仓库</strong><br><a href="http://www.sdnlab.com/11405.html" target="_blank" rel="external">控制器上bundle的二次开发</a><br><a href="http://blog.csdn.net/pantingting_zju/article/details/46835081" target="_blank" rel="external">开发一个bundle</a>(已经过期无法按照原文步骤演示了，但是可以看看。<a href="http://www.frank-durr.de/?p=84" target="_blank" rel="external">原文</a>)<br><a href="https://wiki.opendaylight.org/view/OpenDaylight_Controller:Sample_Applications/SampleStatisticsApplication" target="_blank" rel="external">利用北向接口NBI来写一个统计程序</a><br><a href="http://docs.opendaylight.org/en/stable-boron/developer-guide/developing-apps-on-the-opendaylight-controller.html" target="_blank" rel="external">官方开发控制器app文档</a><br><a href="http://www.sdnlab.com/18270.html" target="_blank" rel="external">YANG模型</a>  </p>
<hr>
<h3 id="OpenDayLight-源码与API"><a href="#OpenDayLight-源码与API" class="headerlink" title="OpenDayLight 源码与API"></a>OpenDayLight 源码与API</h3><p><a href="http://blog.csdn.net/sdnlab/article/details/44651161" target="_blank" rel="external">ODL 氢版本数据通讯版本源码解读</a><br><a href="https://wiki.opendaylight.org/view/Defense4All:Tutorial" target="_blank" rel="external">defenseAll (已被odl官方存档弃用)</a><br><a href="https://wiki.opendaylight.org/view/OpenDaylight_Controller:MD-SAL:Component_Map" target="_blank" rel="external">控制器mdsal组件列表</a><br><a href="https://nexus.opendaylight.org/content/sites/site/org.opendaylight.mdsal/beryllium/apidocs/" target="_blank" rel="external">ODL beryllium版本API，已过期</a><br><a href="https://nexus.opendaylight.org/content/sites/site/org.opendaylight.mdsal/boron/apidocs/" target="_blank" rel="external">ODL boron版本API，目前最新(1/6/2017)</a><br><a href="https://git.opendaylight.org/gerrit/#/admin/projects/" target="_blank" rel="external">官方Git</a>  </p>
<hr>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p><a href="http://www.muzixing.com/pages/2015/08/30/sdnkong-zhi-ping-mian-fa-zhan-li-shi-ji-qu-shi.html" target="_blank" rel="external">sdn架构</a><br><a href="http://blog.csdn.net/yuzhihui_no1/article/details/39161515" target="_blank" rel="external">ovs模块划分</a><br><a href="http://blog.csdn.net/yuzhihui_no1/article/details/41546481" target="_blank" rel="external">ovs源码分析系列</a><br><a href="https://wiki.opendaylight.org/view/Network_Intent_Composition:Use_Cases#Suspicious_DDoS_activity_monitoring" target="_blank" rel="external">ODL用户邮件(感觉有用，但是不知道怎么用)</a><br><a href="https://wiki.opendaylight.org/view/OpenDaylight_Controller:Load_Balancer_Service" target="_blank" rel="external">ODL 负载均衡演示(已过期)</a><br><a href="http://docs.opendaylight.org/en/stable-boron/getting-started-guide/security_considerations.html" target="_blank" rel="external">ODL安全措施，没啥用</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">SDN</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/01/08/SDN_Link/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-SDN_opendaylight_dev_bundle" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/08/SDN_opendaylight_dev_bundle/">在OpenDayLight控制器上开发Bundle</a>
    </h1>
  

        
        <a href="/2017/01/08/SDN_opendaylight_dev_bundle/" class="archive-article-date">
  	<time datetime="2017-01-08T05:24:31.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-08</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="在OpenDayLight控制器上开发Bundle"><a href="#在OpenDayLight控制器上开发Bundle" class="headerlink" title="在OpenDayLight控制器上开发Bundle"></a>在OpenDayLight控制器上开发Bundle</h2><hr>
<p><strong>odl远端仓库把startup project删除了。这个教程已经不再适用了。</strong><br>基于OpendayLight官网上的这篇文档翻译修改而来：<a href="http://docs.opendaylight.org/en/stable-boron/developer-guide/developing-apps-on-the-opendaylight-controller.html" target="_blank" rel="external">Developing Apps on the OpenDaylight controller
</a> </p>
<p>本文档适用于boron版本。其他版本不一定适用。</p>
<hr>
<h3 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h3><p>本文档旨在指导如何在ODL控制器上开发应用。本文档包含以下内容：</p>
<ol>
<li>创建一个简单的示例程序<code>Hello World</code>；</li>
<li>启动ODL控制器；</li>
<li>在<code>Hello World</code>测试简单的<code>Remote Procedure Call(RPC)</code>。</li>
</ol>
<h3 id="基础环境"><a href="#基础环境" class="headerlink" title="基础环境"></a>基础环境</h3><p>本文档需要以下基础开发环境：</p>
<ul>
<li>Maven 3.1.1 或更新的版本</li>
<li>JDK 7/8</li>
<li><p>合适的Maven <code>settings.xml</code>。可以通过一下途径获得默认的OpenDaylight <code>settings.xml</code></p>
  <figure class="highlight roboconf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp -n ~/.m2/settings.xml&#123;,.<span class="attribute">orig&#125; ; \wget -q -O - https</span>://raw<span class="variable">.githubusercontent</span><span class="variable">.com</span>/opendaylight/odlparent/stable/boron/settings<span class="variable">.xml</span> &gt; ~/<span class="variable">.m</span>2/settings<span class="variable">.xml</span></div></pre></td></tr></table></figure>
<p>  <strong>在除Linux和Mac OS X以外的环境中，你需要修改上诉命令中maven的本地仓库地址<code>~/.m2/repository</code></strong></p>
</li>
</ul>
<h3 id="构建一个Example模块"><a href="#构建一个Example模块" class="headerlink" title="构建一个Example模块"></a>构建一个Example模块</h3><hr>
<p>按以下步骤构建：</p>
<ol>
<li><p>从Maven远端仓库中拉取一个初始工程。（第一次拉取的时候需要一定的时间）</p>
 <figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mvn archetype:generate -DarchetypeGroupId=org.opendaylight.controller -DarchetypeArtifactId=opendaylight-startup-archetype \</div><div class="line">-<span class="ruby">DarchetypeRepository=<span class="symbol">https:</span>/<span class="regexp">/nexus.opendaylight.org/content</span><span class="regexp">/repositories/public</span><span class="regexp">/ \</span></span></div><div class="line">-<span class="ruby"><span class="regexp">DarchetypeCatalog=https:/</span><span class="regexp">/nexus.opendaylight.org/content</span><span class="regexp">/repositories/public</span><span class="regexp">/archetype-catalog.xml</span></span></div></pre></td></tr></table></figure>
<p> 在国内，由于墙的缘故，你可能需要设置代理才能较快的下载工程。设置代理的参数如下：</p>
 <figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">-DsocksProxyHost</span>=YourProxyHost -DsocksProxyPort=YourProxyPort</div></pre></td></tr></table></figure>
<p> 此外你还可以使用多线程编译，跳过生成文档，跳过测试来加快速度：</p>
 <figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-T <span class="number">1</span>C -D maven<span class="selector-class">.javadoc</span><span class="selector-class">.skip</span>=true -DskipTests</div></pre></td></tr></table></figure>
</li>
<li><p>使用如下值来初始化工程：</p>
 <figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Define <span class="keyword">value</span> <span class="keyword">for</span> property <span class="string">'groupId'</span>: : org.opendaylight.example</div><div class="line">Define <span class="keyword">value</span> <span class="keyword">for</span> property <span class="string">'artifactId'</span>: : example</div><div class="line">Define <span class="keyword">value</span> <span class="keyword">for</span> property <span class="string">'version'</span>:  <span class="number">1.0</span>-SNAPSHOT: : <span class="number">1.0</span>.<span class="number">0</span>-SNAPSHOT</div><div class="line">Define <span class="keyword">value</span> <span class="keyword">for</span> property <span class="string">'package'</span>:  org.opendaylight.example: :</div><div class="line">Define <span class="keyword">value</span> <span class="keyword">for</span> property <span class="string">'classPrefix'</span>: : $&#123;artifactId.substring(<span class="number">0</span>,<span class="number">1</span>).toUpperCase()&#125;$&#123;artifactId.substring(<span class="number">1</span>)&#125;</div><div class="line">Define <span class="keyword">value</span> <span class="keyword">for</span> property <span class="string">'copyright'</span>: : Copyright (c) <span class="number">2015</span> Yoyodyne, Inc.</div></pre></td></tr></table></figure>
<p> 其中，<code>version</code>,<code>package</code>,<code>classPrefix</code>都会默认填写，直接回车就行。</p>
</li>
<li><p>完成步骤1,2后，可以看到一个<code>example</code>文件夹。可以看到如下目录结构。</p>
 <figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$&#123;artifactId&#125;/</div><div class="line"><span class="built_in">example</span>/</div><div class="line">cd <span class="built_in">example</span>/</div><div class="line">api/</div><div class="line">artifacts/</div><div class="line"><span class="built_in">features</span>/</div><div class="line">impl/</div><div class="line">karaf/</div><div class="line">pom.xml</div></pre></td></tr></table></figure>
</li>
<li><p>构建示例工程。<br> <strong>注意，这个可能需要耗费一定的时间，你可以使用1中提到的maven参数来提升编译速度。</strong></p>
 <figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">mvn </span>clean install</div></pre></td></tr></table></figure>
</li>
<li><p>启动ODL控制器。</p>
 <figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cd</span> karaf/target/assembly/bin</div><div class="line"><span class="keyword">ls</span></div><div class="line">./karaf</div></pre></td></tr></table></figure>
</li>
<li><p>等待直至启动完毕出现以下命令行。可能需要等一段时间，这个时间和你电脑配置有关。</p>
 <figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">opendaylight-user<span class="meta">@root</span>&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>查看日志，确认<code>example</code>模块被正常加载。</p>
 <figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">lo</span><span class="variable">g:display</span> | <span class="keyword">grep</span> Example</div></pre></td></tr></table></figure>
</li>
<li><p>关闭ODL控制器。</p>
 <figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">shutdown</span> -f</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="定义一个简单的-Hello-World-RPC"><a href="#定义一个简单的-Hello-World-RPC" class="headerlink" title="定义一个简单的`Hello World RPC"></a>定义一个简单的<code>`Hello World</code> RPC</h3><ol>
<li><p>从maven远端仓库拉取初始工程。</p>
 <figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mvn archetype:generate -DarchetypeGroupId=org.opendaylight.controller -DarchetypeArtifactId=opendaylight-startup-archetype \</div><div class="line">  -<span class="ruby">DarchetypeRepository=<span class="symbol">http:</span>/<span class="regexp">/nexus.opendaylight.org/content</span><span class="regexp">/repositories/opendaylight</span>.release/ \</span></div><div class="line">  -<span class="ruby">DarchetypeCatalog=<span class="symbol">http:</span>/<span class="regexp">/nexus.opendaylight.org/content</span><span class="regexp">/repositories/opendaylight</span>.release/archetype-catalog.xml</span></div></pre></td></tr></table></figure>
<blockquote>
<p>这里需要注意，原文中使用的是<code>snapshot</code>，而使用<code>snapshot</code>会出现无法编译通过的问题。本文中使用<code>release</code>版本且目前的maven远端仓库<code>release</code>版本是<code>boron</code>。  </p>
</blockquote>
</li>
<li><p>使用如下值来初始化工程：</p>
 <figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Define <span class="keyword">value</span> <span class="keyword">for</span> property <span class="string">'groupId'</span>: : org.opendaylight.hello</div><div class="line">Define <span class="keyword">value</span> <span class="keyword">for</span> property <span class="string">'artifactId'</span>: : hello</div><div class="line">Define <span class="keyword">value</span> <span class="keyword">for</span> property <span class="string">'version'</span>:  <span class="number">1.0</span>-SNAPSHOT: : <span class="number">1.0</span>.<span class="number">0</span>-SNAPSHOT</div><div class="line">Define <span class="keyword">value</span> <span class="keyword">for</span> property <span class="string">'package'</span>:  org.opendaylight.hello: :</div><div class="line">Define <span class="keyword">value</span> <span class="keyword">for</span> property <span class="string">'classPrefix'</span>: : $&#123;artifactId.substring(<span class="number">0</span>,<span class="number">1</span>).toUpperCase()&#125;$&#123;artifactId.substring(<span class="number">1</span>)&#125;</div><div class="line">Define <span class="keyword">value</span> <span class="keyword">for</span> property <span class="string">'copyright'</span>: : Copyright (c) <span class="number">2015</span> Yoyodyne, Inc.</div></pre></td></tr></table></figure>
<p> 其中，<code>version</code>,<code>package</code>,<code>classPrefix</code>都会默认填写，直接回车就行。</p>
</li>
<li><p>查看<code>hello</code>工程。</p>
 <figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cd</span> hello/</div><div class="line"><span class="keyword">ls</span> -1</div><div class="line">api</div><div class="line">artifacts</div><div class="line">features</div><div class="line">impl</div><div class="line">karaf</div><div class="line">pom.xml</div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>构建<code>Hello</code>工程。</p>
 <figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">mvn </span>clean install</div></pre></td></tr></table></figure>
<blockquote>
<p>同样，可以利用之前提到的参数来提升编译构建速度。 </p>
</blockquote>
</li>
<li><p>启动ODL控制器。</p>
 <figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cd</span> karaf/target/assembly/bin</div><div class="line"><span class="keyword">ls</span></div><div class="line">./karaf</div></pre></td></tr></table></figure>
</li>
<li><p>等待直至启动完毕出现以下命令行。可能需要等一段时间，这个时间和你电脑配置有关。</p>
 <figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">opendaylight-user<span class="meta">@root</span>&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>查看日志，确认<code>Hello</code>模块被正常加载。</p>
 <figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">lo</span><span class="variable">g:display</span> | <span class="keyword">grep</span> Hello</div></pre></td></tr></table></figure>
</li>
<li><p>关闭ODL控制器。</p>
 <figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">shutdown</span> -f</div></pre></td></tr></table></figure>
</li>
<li><p>返回到<code>Hello</code>目录：</p>
 <figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd ../../../../</div></pre></td></tr></table></figure>
</li>
<li><p>可以通过查看<code>Hello</code>模块的实现来了解7中的日志从何而来，模块实现源文件路径如下：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">impl<span class="regexp">/src/m</span>ain<span class="regexp">/java/</span>org<span class="regexp">/opendaylight/</span>hello<span class="regexp">/impl/</span>HelloProvider.java</div></pre></td></tr></table></figure>
</li>
<li><p>可以使用<code>HelloProvider.onSessionInitiate</code>方法来添加自己的实现。 </p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onSessionInitiated</span><span class="params">(ProviderContext session)</span> </span>&#123;</div><div class="line">    LOG.info(<span class="string">"HelloProvider Session Initiated"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="添加一个简单的HelloWorld-RPC-API"><a href="#添加一个简单的HelloWorld-RPC-API" class="headerlink" title="添加一个简单的HelloWorld RPC API"></a>添加一个简单的<code>HelloWorld</code> RPC API</h3><hr>
<ol>
<li><p>修改YANG文件。</p>
 <figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi api<span class="regexp">/src/m</span>ain<span class="regexp">/yang/</span>hello.yang</div></pre></td></tr></table></figure>
</li>
<li><p>修改为如下文件，通过修改该文件来定义<code>hello-world</code> RPC：</p>
 <figure class="highlight puppet"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"> module <span class="keyword">hello</span> &#123;</div><div class="line">    yang-version <span class="number">1</span>;</div><div class="line">    namespace <span class="string">"urn:opendaylight:params:xml:ns:yang:hello"</span>;</div><div class="line">    prefix <span class="string">"hello"</span>;</div><div class="line">    revision <span class="string">"2015-01-05"</span> &#123;</div><div class="line">        <span class="literal">description</span> <span class="string">"Initial revision of hello model"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">rpc</span> <span class="keyword">hello</span>-<span class="keyword">world</span> &#123;</div><div class="line">        input &#123;</div><div class="line">            leaf <span class="literal">name</span> &#123;</div><div class="line">                <span class="built_in">type</span> string;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">output</span> &#123;</div><div class="line">            leaf greating &#123;</div><div class="line">                <span class="built_in">type</span> string;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>返回到<code>hello/api</code>目录并构建你的API:</p>
 <figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd ../../../</div><div class="line">mvn clean install</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="实现HelloWorld-RPC-API"><a href="#实现HelloWorld-RPC-API" class="headerlink" title="实现HelloWorld RPC API"></a>实现<code>HelloWorld</code> RPC API</h3><hr>
<ol>
<li><p>定义<code>HelloService</code>，该服务会被<code>HelloWorld</code>API调用。</p>
 <figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd ..<span class="regexp">/impl/</span>src<span class="regexp">/main/</span>java<span class="regexp">/org/</span>opendaylight<span class="regexp">/hello/im</span>pl<span class="regexp">/</span></div></pre></td></tr></table></figure>
</li>
<li><p>创建<code>HelloWorldImpl.java</code>文件，添加如下代码：</p>
 <figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">* Copyright © 2016 Cisco Systems and others.  All rights reserved.</div><div class="line">*</div><div class="line">* This program and the accompanying materials are made available under the</div><div class="line">* terms of the Eclipse Public License v1.0 which accompanies this distribution,</div><div class="line">* and is available at http://www.eclipse.org/legal/epl-v10.html</div><div class="line">*/</div><div class="line">package org.opendaylight.hello.impl;</div><div class="line"><span class="keyword">import</span> java.util.concurrent.Future;</div><div class="line"><span class="keyword">import</span> org.opendaylight.yang.gen.v1.urn.opendaylight.<span class="keyword">params</span>.<span class="built_in">xml</span>.ns.yang.hello.rev150105.HelloService;</div><div class="line"><span class="keyword">import</span> org.opendaylight.yang.gen.v1.urn.opendaylight.<span class="keyword">params</span>.<span class="built_in">xml</span>.ns.yang.hello.rev150105.HelloWorldInput;</div><div class="line"><span class="keyword">import</span> org.opendaylight.yang.gen.v1.urn.opendaylight.<span class="keyword">params</span>.<span class="built_in">xml</span>.ns.yang.hello.rev150105.HelloWorldOutput;</div><div class="line"><span class="keyword">import</span> org.opendaylight.yang.gen.v1.urn.opendaylight.<span class="keyword">params</span>.<span class="built_in">xml</span>.ns.yang.hello.rev150105.HelloWorldOutputBuilder;</div><div class="line"><span class="keyword">import</span> org.opendaylight.yangtools.yang.common.RpcResult;</div><div class="line"><span class="keyword">import</span> org.opendaylight.yangtools.yang.common.RpcResultBuilder;</div><div class="line"><span class="keyword">public</span> class HelloWorldImpl implements HelloService &#123;</div><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> Future&lt;RpcResult&lt;HelloWorldOutput&gt;&gt; helloWorld(HelloWorldInput input) &#123;</div><div class="line">        HelloWorldOutputBuilder helloBuilder = <span class="literal">new</span> HelloWorldOutputBuilder();</div><div class="line">        helloBuilder.setGreating(<span class="string">"Hello "</span> + input.getName());</div><div class="line">        <span class="keyword">return</span> RpcResultBuilder.success(helloBuilder.build()).buildFuture();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>修改<code>HelloProvider.java</code>.注册在<code>hello.yang</code>中创建的RPC. 你可以自己添加自己想要的实现，或者直接按如下编写：</p>
 <figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * Copyright © 2016 Cisco Systems and others.  All rights reserved.</div><div class="line"> *</div><div class="line"> * This program and the accompanying materials are made available under the</div><div class="line"> * terms of the Eclipse Public License v1.0 which accompanies this distribution,</div><div class="line"> * and is available at http://www.eclipse.org/legal/epl-v10.html</div><div class="line"> */</div><div class="line">package org.opendaylight.hello.impl;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.opendaylight.controller.md.sal.binding.api.DataBroker;</div><div class="line"><span class="keyword">import</span> org.opendaylight.controller.sal.binding.api.RpcProviderRegistry;</div><div class="line"><span class="keyword">import</span> org.opendaylight.controller.sal.binding.api.BindingAwareBroker.RpcRegistration;</div><div class="line"><span class="keyword">import</span> org.opendaylight.yang.gen.v1.urn.opendaylight.params.xml.ns.yang.hello.rev150105.HelloService;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.slf4j.Logger;</div><div class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloProvider</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="type">LOG</span> = <span class="type">LoggerFactory</span>.getLogger(<span class="type">HelloProvider</span>.<span class="keyword">class</span>);</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">DataBroker</span> dataBroker;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">RpcProviderRegistry</span> rpcProviderRegistry;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="type">RpcRegistration</span>&lt;<span class="type">HelloService</span>&gt; serviceRegistration;</div><div class="line">    <span class="keyword">public</span> <span class="type">HelloProvider</span>(<span class="keyword">final</span> <span class="type">DataBroker</span> dataBroker, <span class="type">RpcProviderRegistry</span> rpcProviderRegistry) &#123;</div><div class="line">        this.dataBroker = dataBroker;</div><div class="line">        this.rpcProviderRegistry = rpcProviderRegistry;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Method called when the blueprint container is created.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> void <span class="keyword">init</span>() &#123;</div><div class="line"> serviceRegistration = rpcProviderRegistry.addRpcImplementation(<span class="type">HelloService</span>.<span class="keyword">class</span>, new <span class="type">HelloWorldImpl</span>());</div><div class="line">        <span class="type">LOG</span>.info(<span class="string">"HelloProvider Session Initiated"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * Method called when the blueprint container is destroyed.</div><div class="line">    */</div><div class="line">    <span class="keyword">public</span> void close() &#123;</div><div class="line"> serviceRegistration.close();</div><div class="line">        <span class="type">LOG</span>.info(<span class="string">"HelloProvider Closed"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>&gt; 这边需要注意：文件开头的版权声明不能去掉，否则无法通过Maven构建。此外，官网上的源文件有问题。本文档的源文件至少通过了本地编译。
</code></pre><ol>
<li><p>此外，需要在BluePrint中注册你的RPC API.修改如下：</p>
 <figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd hello<span class="meta-keyword">/impl/</span>src<span class="meta-keyword">/main/</span>resources<span class="meta-keyword">/org/</span>opendaylight/blueprint</div><div class="line">vi impl-blueprint.xml</div></pre></td></tr></table></figure>
<p> 修改为如下。</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="comment">&lt;!-- vi: set et smarttab sw=4 tabstop=4: --&gt;</span></div><div class="line"><span class="comment">&lt;!--</span></div><div class="line">Copyright © 2016 Cisco Systems and others. All rights reserved.</div><div class="line"></div><div class="line">This program and the accompanying materials are made available under the</div><div class="line">terms of the Eclipse Public License v1.0 which accompanies this distribution,</div><div class="line">and is available at http://www.eclipse.org/legal/epl-v10.html</div><div class="line">--&gt;</div><div class="line"><span class="tag">&lt;<span class="name">blueprint</span> <span class="attr">xmlns</span>=<span class="string">"http://www.osgi.org/xmlns/blueprint/v1.0.0"</span></span></div><div class="line"><span class="attr">xmlns:odl</span>=<span class="string">"http://opendaylight.org/xmlns/blueprint/v1.0.0"</span></div><div class="line"><span class="attr">odl:use-default-for-reference-types</span>=<span class="string">"true"</span>&gt;</div><div class="line"> </div><div class="line"><span class="tag">&lt;<span class="name">reference</span> <span class="attr">id</span>=<span class="string">"dataBroker"</span></span></div><div class="line">    <span class="attr">interface</span>=<span class="string">"org.opendaylight.controller.md.sal.binding.api.DataBroker"</span></div><div class="line">    <span class="attr">odl:type</span>=<span class="string">"default"</span> /&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">reference</span> <span class="attr">id</span>=<span class="string">"rpcRegistry"</span></span></div><div class="line">    <span class="attr">interface</span>=<span class="string">"org.opendaylight.controller.sal.binding.api.RpcProviderRegistry"</span> /&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"provider"</span></span></div><div class="line">    <span class="attr">class</span>=<span class="string">"org.opendaylight.hello.impl.HelloProvider"</span></div><div class="line">    <span class="attr">init-method</span>=<span class="string">"init"</span> <span class="attr">destroy-method</span>=<span class="string">"close"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">argument</span> <span class="attr">ref</span>=<span class="string">"dataBroker"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">argument</span> <span class="attr">ref</span>=<span class="string">"rpcRegistry"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">blueprint</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>&gt; 这个文档中添加了`rpcRegistry`。需要注意&lt;?xml&gt;前不能有空格。
</code></pre><ol>
<li><p>然后回到hello/impl目录下编译。</p>
 <figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">mvn </span>clean install</div></pre></td></tr></table></figure>
</li>
<li><p>回到hello目录下编译。</p>
 <figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">mvn </span>clean install</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="通过REST来测试hello-world-RPC"><a href="#通过REST来测试hello-world-RPC" class="headerlink" title="通过REST来测试hello-world RPC"></a>通过REST来测试<code>hello-world</code> RPC</h3><hr>
<p>有很多方式可以测试RPC, 比如以下两种。</p>
<ol>
<li><p>通过HTTP使用ODL控制器自带的API Explorer</p>
</li>
<li><p>使用浏览器的REST 客户端</p>
</li>
</ol>
<h4 id="通过HTTP使用ODL控制器自带的API-Explorer"><a href="#通过HTTP使用ODL控制器自带的API-Explorer" class="headerlink" title="通过HTTP使用ODL控制器自带的API Explorer"></a>通过HTTP使用ODL控制器自带的API Explorer</h4><hr>
<ol>
<li><p>使用浏览器进入 <a href="http://localhost:8181/apidoc/explorer/index.html" target="_blank" rel="external">apidoc UI</a><code>&lt;http://localhost:8181/apidoc/explorer/index.html&gt;</code> 。</p>
<blockquote>
<p>TIP: <strong>localhost</strong>是你ODL控制器的IP地址或者Hostname。</p>
</blockquote>
</li>
<li><p>选择</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">hello(<span class="number">2015</span><span class="number">-01</span><span class="number">-05</span>)</div></pre></td></tr></table></figure>
</li>
<li><p>选择</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">POST <span class="regexp">/operations/</span><span class="string">hello:</span>hello-world</div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>在框内填写如下值</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&#123;<span class="attr">"hello:input"</span>: &#123; <span class="attr">"name"</span>:<span class="string">"Your Name"</span>&#125;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>点击按钮.</p>
</li>
<li><p>输入 username 和 password, 默认是<br><code>admin/admin</code>.</p>
</li>
<li><p>返回的Response body应该为：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="attr">"output"</span>: &#123;</div><div class="line">    <span class="attr">"greating"</span>: <span class="string">"Hello Your Name"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="使用浏览器的REST-客户端"><a href="#使用浏览器的REST-客户端" class="headerlink" title="使用浏览器的REST 客户端"></a>使用浏览器的REST 客户端</h3><hr>
<p>可以使用火狐浏览器的 <a href="https://github.com/chao/RESTClient" target="_blank" rel="external"><em>RESTClient</em></a>或者Chrome的<code>Restlet Client</code>。<br>    <figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">POST:</span> <span class="symbol">http:</span>/<span class="regexp">/192.168.1.43:8181/restconf</span><span class="regexp">/operations/hello</span><span class="symbol">:hello-world</span></div></pre></td></tr></table></figure></p>
<p>Header:  </p>
<pre><code>```
application/json
```   
</code></pre><p>Body:  </p>
<pre><code>{&quot;input&quot;: {
    &quot;name&quot;: &quot;Andrew&quot;
  }
}
</code></pre><h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><p>If you get a response code 501 while attempting to POST<br>/operations/hello:hello-world, check the file: HelloProvider.java and<br>make sure the helloService member is being set. By not invoking<br>“session.addRpcImplementation()” the REST API will be unable to map<br>/operations/hello:hello-world url to HelloWorldImpl.</p>
<blockquote>
<p>这个应该碰不到了。所以就不翻译了。</p>
</blockquote>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">SDN</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/01/08/SDN_opendaylight_dev_bundle/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Smarking Algorithm Contest 3" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/06/Smarking Algorithm Contest 3/">Smarking Algorithm Contest 3</a>
    </h1>
  

        
        <a href="/2016/11/06/Smarking Algorithm Contest 3/" class="archive-article-date">
  	<time datetime="2016-11-06T06:37:31.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-11-06</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-453-Minimum-Moves-to-Equal-Array-Elements"><a href="#1-453-Minimum-Moves-to-Equal-Array-Elements" class="headerlink" title="1.  453. Minimum Moves to Equal Array Elements"></a>1.  453. Minimum Moves to Equal Array Elements</h2><p>Given a <strong>non-empty</strong> integer array of size n, find the minimum number of moves required to make all array elements equal, where a move is incrementing n - 1 elements by 1.<br>Ex:<br><figure class="highlight inform7"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Input:</div><div class="line"><span class="comment">[1,2,3]</span></div><div class="line"></div><div class="line">Output:</div><div class="line">3</div><div class="line"></div><div class="line">Explanation:</div><div class="line">Only three moves <span class="keyword">are</span> needed (remember each move increments two elements):</div><div class="line"></div><div class="line"><span class="comment">[1,2,3]</span>  =&gt;  <span class="comment">[2,3,3]</span>  =&gt;  <span class="comment">[3,4,3]</span>  =&gt;  <span class="comment">[4,4,4]</span></div></pre></td></tr></table></figure></p>
<p>给一个长度为n的非空数组，将这个数组中的其中n-1个元素都+1，称为一次操作。求出将这个数组所有元素都变为相同大小的操作的次数。<br>解法：<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">func minMoves(nums []<span class="built_in">int</span>) <span class="built_in">int</span> &#123;</div><div class="line">	<span class="keyword">if</span> len(nums) &lt;= <span class="number">1</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span></div><div class="line">	&#125;</div><div class="line">	<span class="built_in">sum</span>,<span class="built_in">min</span>,<span class="built_in">max</span> := nums[<span class="number">0</span>],nums[<span class="number">0</span>],nums[<span class="number">0</span>]</div><div class="line">	for i:=<span class="number">1</span>;i&lt;len(nums);i++&#123;</div><div class="line">		<span class="built_in">sum</span> += nums[i]</div><div class="line">		<span class="keyword">if</span> <span class="built_in">min</span> &gt; nums[i]&#123;</div><div class="line">			<span class="built_in">min</span> = nums[i]</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> <span class="built_in">max</span> &lt; nums[i]&#123;</div><div class="line">			<span class="built_in">max</span> = nums[i]</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="built_in">sum</span> - len(nums)*<span class="built_in">min</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="2-447-Number-of-Boomerangs"><a href="#2-447-Number-of-Boomerangs" class="headerlink" title="2. 447. Number of Boomerangs"></a>2. 447. Number of Boomerangs</h2><p>Given n points in the plane that are all pairwise distinct, a “boomerang” is a tuple of points (i, j, k) such that the distance between i and j equals the distance between i and k (the order of the tuple matters).</p>
<p>Find the number of boomerangs. You may assume that n will be at most 500 and coordinates of points are all in the range [-10000, 10000] (inclusive).<br>Ex:<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Input:</div><div class="line"><span class="string">[[0,0],[1,0],[2,0]]</span></div><div class="line"></div><div class="line">Output:</div><div class="line"><span class="number">2</span></div><div class="line"></div><div class="line">Explanation:</div><div class="line">The two boomerangs are <span class="string">[[1,0],[0,0],[2,0]]</span> <span class="keyword">and</span> <span class="string">[[1,0],[2,0],[0,0]]</span></div></pre></td></tr></table></figure></p>
<p>给定平面内的坐标。求出这些坐标中，一个点到另外两个点距离相同的组合。<br>这题只要求出每个坐标到其他坐标的距离。然后再遍历就行了。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">pow</span><span class="params">(t <span class="keyword">int</span>)</span> <span class="title">int</span></span>&#123;</div><div class="line">	<span class="keyword">return</span> t*t</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">numberOfBoomerangs</span><span class="params">(points [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(points) &lt;<span class="number">3</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span></div><div class="line">	&#125;</div><div class="line">	dis := <span class="built_in">make</span>([][]<span class="keyword">int</span>,<span class="built_in">len</span>(points))</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(points);i++&#123;</div><div class="line">		dis[i] = <span class="built_in">make</span>([]<span class="keyword">int</span>,<span class="built_in">len</span>(points))</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(points);i++&#123;</div><div class="line">		<span class="keyword">for</span> j:=i+<span class="number">1</span>;j&lt;<span class="built_in">len</span>(points);j++&#123;</div><div class="line">			t := pow(points[i][<span class="number">0</span>] - points[j][<span class="number">0</span>])+pow(points[i][<span class="number">1</span>] - points[j][<span class="number">1</span>])</div><div class="line">			dis[i][j],dis[j][i] = t,t</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	count := <span class="number">0</span></div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(points);i++&#123;</div><div class="line">		<span class="keyword">for</span> j:=<span class="number">0</span>;j&lt;<span class="built_in">len</span>(points);j++&#123;</div><div class="line">			<span class="keyword">if</span> j == i&#123;</div><div class="line">				<span class="keyword">continue</span></div><div class="line">			&#125;</div><div class="line">			<span class="keyword">for</span> k := j+<span class="number">1</span>;k&lt;<span class="built_in">len</span>(points);k++&#123;</div><div class="line">				<span class="keyword">if</span> dis[i][j] == dis[i][k]&#123;</div><div class="line">					count +=<span class="number">2</span></div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> count</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="3-452-Minimum-Number-of-Arrows-to-Burst-Balloons"><a href="#3-452-Minimum-Number-of-Arrows-to-Burst-Balloons" class="headerlink" title="3. 452. Minimum Number of Arrows to Burst Balloons"></a>3. 452. Minimum Number of Arrows to Burst Balloons</h2><p>There are a number of spherical balloons spread in two-dimensional space. For each balloon, provided input is the start and end coordinates of the horizontal diameter. Since it’s horizontal, y-coordinates don’t matter and hence the x-coordinates of start and end of the diameter suffice. Start is always smaller than end. There will be at most 104 balloons.</p>
<p>An arrow can be shot up exactly vertically from different points along the x-axis. A balloon with xstart and xend bursts by an arrow shot at x if xstart ≤ x ≤ xend. There is no limit to the number of arrows that can be shot. An arrow once shot keeps travelling up infinitely. The problem is to find the minimum number of arrows that must be shot to burst all balloons.<br>Ex:<br><figure class="highlight inform7"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Input:</div><div class="line"><span class="comment">[<span class="comment">[10,16]</span>, <span class="comment">[2,8]</span>, <span class="comment">[1,6]</span>, <span class="comment">[7,12]</span>]</span></div><div class="line"></div><div class="line">Output:</div><div class="line">2</div><div class="line"></div><div class="line">Explanation:</div><div class="line">One way <span class="keyword">is</span> to shoot one arrow for example at x = 6 (bursting the balloons <span class="comment">[2,8]</span> and <span class="comment">[1,6]</span>) and another arrow at x = 11 (bursting the other two balloons).</div></pre></td></tr></table></figure></p>
<p>这题把一堆乱七八糟的背景剥开后，题目实际上是这样的：<br>给定一组区间，然后要你给出长度最小的一组数，这组数中所有的点都在区间内而且没有区间被遗漏。<br>用贪心算法就可以做。将区间按起点从小到大排列。<br>然后每一次都选一个点，能够尽量的覆盖到最多的区间。直到不能覆盖为止。依次取点，直到区间都有点落在上面。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> ranges [][]<span class="keyword">int</span> </div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span><span class="params">(r ranges)</span><span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="built_in">len</span>(r)</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span><span class="params">(r  ranges)</span><span class="title">Less</span><span class="params">(i,j <span class="keyword">int</span>)</span><span class="title">bool</span></span>&#123;</div><div class="line">	<span class="keyword">if</span> r[i][<span class="number">0</span>] != r[j][<span class="number">0</span>]&#123;</div><div class="line">		<span class="keyword">return</span> r[i][<span class="number">0</span>]&lt;r[j][<span class="number">0</span>]</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> r[i][<span class="number">1</span>]&lt;r[j][<span class="number">1</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r  ranges)</span><span class="title">Swap</span><span class="params">(i,j <span class="keyword">int</span>)</span></span>&#123;</div><div class="line">	r[i][<span class="number">0</span>],r[j][<span class="number">0</span>] = r[j][<span class="number">0</span>],r[i][<span class="number">0</span>]</div><div class="line">	r[j][<span class="number">1</span>],r[i][<span class="number">1</span>] = r[i][<span class="number">1</span>],r[j][<span class="number">1</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">findMinArrowShots</span><span class="params">(points [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	p := ranges(points)</div><div class="line">	sort.Sort(p)</div><div class="line">	count := <span class="number">0</span></div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(p);i++&#123;</div><div class="line">		count ++</div><div class="line">		j := i+<span class="number">1</span></div><div class="line">		at := p[i][<span class="number">1</span>]</div><div class="line">		<span class="keyword">for</span> j = i+<span class="number">1</span>;j&lt;<span class="built_in">len</span>(p) ;j++&#123;</div><div class="line">			<span class="keyword">if</span> p[j][<span class="number">0</span>]&gt;at&#123;</div><div class="line">				i = j<span class="number">-1</span></div><div class="line">				<span class="keyword">break</span></div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span> p[j][<span class="number">1</span>] &lt; at&#123;</div><div class="line">				at = p[j][<span class="number">1</span>]</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> j == <span class="built_in">len</span>(p)&#123;</div><div class="line">			<span class="keyword">break</span></div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> count</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="4-446-Arithmetic-Slices-II-Subsequence"><a href="#4-446-Arithmetic-Slices-II-Subsequence" class="headerlink" title="4. 446. Arithmetic Slices II - Subsequence"></a>4. 446. Arithmetic Slices II - Subsequence</h2><p>A zero-indexed array A consisting of N numbers is given. A subsequence slice of that array is any sequence of integers (P0, P1, …, Pk) such that 0 ≤ P0 &lt; P1 &lt; … &lt; Pk &lt; N.</p>
<p>A subsequence slice (P0, P1, …, Pk) of array A is called arithmetic if the sequence A[P0], A[P1], …, A[Pk-1], A[Pk] is arithmetic. In particular, this means that k ≥ 2.</p>
<p>The function should return the number of arithmetic subsequence slices in the array A.</p>
<p>Ex:<br><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">Input</span>: [2, 4, 6, 8, 10]</div><div class="line"></div><div class="line"><span class="http"><span class="attribute">Output</span>: 7</span></div><div class="line"></div><div class="line"><span class="inform7">Explanation:</span></div><div class="line">All arithmetic subsequence slices <span class="keyword">are</span>:</div><div class="line"><span class="comment">[2,4,6]</span></div><div class="line"><span class="comment">[4,6,8]</span></div><div class="line"><span class="comment">[6,8,10]</span></div><div class="line"><span class="comment">[2,4,6,8]</span></div><div class="line"><span class="comment">[4,6,8,10]</span></div><div class="line"><span class="comment">[2,4,6,8,10]</span></div><div class="line"><span class="comment">[2,6,10]</span></div></pre></td></tr></table></figure></p>
<p>这题试了下DFS会超时，用DP做会MLE。最后没做出来。<br>给个别人的代码：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></div><div class="line">	<span class="function"><span class="keyword">def</span> <span class="title">numberOfArithmeticSlices</span><span class="params">(self, A)</span>:</span></div><div class="line">		<span class="string">"""</span></div><div class="line">		:type A: List[int]</div><div class="line">		:rtype: int</div><div class="line">		"""</div><div class="line">		ans=<span class="number">0</span></div><div class="line">		dp = []</div><div class="line">		<span class="keyword">for</span> i <span class="keyword">in</span> range(len(A)):</div><div class="line">			a=A[i]</div><div class="line">			dp.append(&#123;&#125;)</div><div class="line">			<span class="keyword">for</span> j <span class="keyword">in</span> range(i):</div><div class="line">				b=A[j]</div><div class="line">				d=a-b</div><div class="line">				<span class="keyword">if</span> d <span class="keyword">in</span> dp[j]:</div><div class="line">					v=<span class="number">1</span>+dp[j][d]</div><div class="line">				<span class="keyword">else</span>:</div><div class="line">					v=<span class="number">1</span></div><div class="line">				<span class="keyword">if</span> d <span class="keyword">in</span> dp[i]:</div><div class="line">					dp[i][d]=dp[i][d]+v</div><div class="line">				<span class="keyword">else</span>:</div><div class="line">					dp[i][d]=v</div><div class="line">			ans += sum([dp[i][x] <span class="keyword">for</span> x <span class="keyword">in</span> dp[i]]) - i</div><div class="line">		<span class="keyword">return</span> ans</div></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Leetcode</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">Golang</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/11/06/Smarking Algorithm Contest 3/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Smarking Algorithm Contest 2" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/30/Smarking Algorithm Contest 2/">Smarking Algorithm Contest 2</a>
    </h1>
  

        
        <a href="/2016/10/30/Smarking Algorithm Contest 2/" class="archive-article-date">
  	<time datetime="2016-10-30T04:21:31.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-10-30</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="435-Non-overlapping-Intervals"><a href="#435-Non-overlapping-Intervals" class="headerlink" title="435. Non-overlapping Intervals"></a>435. Non-overlapping Intervals</h2><p>Given a collection of intervals, find the minimum number of intervals you need to remove to make the rest of the intervals non-overlapping.</p>
<p>Note:</p>
<ol>
<li>You may assume the interval’s end point is always bigger than its start point.</li>
<li>Intervals like [1,2] and [2,3] have borders “touching” but they don’t overlap each other.</li>
</ol>
<p>给定一组区间，你可以移除一些区间让这组区间互不重叠。</p>
<p>做法是：</p>
<ol>
<li>首先将区间按照起点大小排序。</li>
<li>将区间中所有完全覆盖其他区间的区间移除掉。</li>
<li>在剩下的区间中，如果有区间，和它之前的区间有重叠，就移除它。</li>
</ol>
<p>代码如下：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> arrI []Interval</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a arrI)</span><span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="built_in">len</span>(a)</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a arrI)</span><span class="title">Less</span><span class="params">(i,j <span class="keyword">int</span>)</span> <span class="title">bool</span></span>&#123;</div><div class="line">	<span class="keyword">if</span> a[i].Start!=a[j].Start&#123;</div><div class="line">		<span class="keyword">return</span> a[i].Start&lt;a[j].Start</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> a[i].End&gt;=a[j].End</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a arrI)</span><span class="title">Swap</span><span class="params">(i,j <span class="keyword">int</span>)</span></span>&#123;</div><div class="line">	a[i],a[j] = a[j],a[i]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">eraseOverlapIntervals</span><span class="params">(intervals []Interval)</span> <span class="title">int</span></span> &#123;</div><div class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(intervals) &lt;= <span class="number">1</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span></div><div class="line">	&#125;</div><div class="line">	tmp := arrI(intervals)</div><div class="line">    sort.Sort(tmp)</div><div class="line">	res := tmp[<span class="number">0</span>]</div><div class="line">	count :=<span class="number">0</span></div><div class="line">	ret := []Interval&#123;&#125;</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(tmp);i++&#123;</div><div class="line">		flag := <span class="literal">false</span></div><div class="line">		<span class="keyword">if</span> <span class="built_in">len</span>(ret)&gt;<span class="number">0</span> &amp;&amp; tmp[i].Start &lt;=  ret[<span class="built_in">len</span>(ret)<span class="number">-1</span>].Start&#123;</div><div class="line">			flag = <span class="literal">true</span></div><div class="line">			count ++</div><div class="line">		&#125;<span class="keyword">else</span>&#123;</div><div class="line">			<span class="keyword">for</span> j:=i+<span class="number">1</span>;j&lt;<span class="built_in">len</span>(tmp);j++&#123;</div><div class="line">				<span class="keyword">if</span> tmp[i].End &lt;= tmp[j].Start&#123;</div><div class="line">					<span class="keyword">break</span></div><div class="line">				&#125;</div><div class="line">				<span class="keyword">if</span> tmp[i].End &gt;= tmp[j].End&#123;</div><div class="line">					flag = <span class="literal">true</span></div><div class="line">					count ++</div><div class="line">					<span class="keyword">break</span></div><div class="line">				&#125;</div><div class="line">				</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> !flag&#123;</div><div class="line">			ret = <span class="built_in">append</span>(ret,tmp[i])</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(ret) == <span class="number">0</span>&#123;</div><div class="line">		<span class="keyword">return</span> count</div><div class="line">	&#125;</div><div class="line">	res =ret[<span class="number">0</span>]</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">1</span>;i&lt;<span class="built_in">len</span>(ret);i++&#123;</div><div class="line">		<span class="keyword">if</span> ret[i].Start &gt;= res.End&#123;</div><div class="line">			res = ret[i]</div><div class="line">		&#125;<span class="keyword">else</span>&#123;</div><div class="line">			count ++</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> count</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="436-Find-Right-Interval"><a href="#436-Find-Right-Interval" class="headerlink" title="436. Find Right Interval"></a>436. Find Right Interval</h2><p>Given a set of intervals, for each of the interval i, check if there exists an interval j whose start point is bigger than or equal to the end point of the interval i, which can be called that j is on the “right” of i.</p>
<p>For any interval i, you need to store the minimum interval j’s index, which means that the interval j has the minimum start point to build the “right” relationship for interval i. If the interval j doesn’t exist, store -1 for the interval i. Finally, you need output the stored value of each interval as an array.</p>
<p>Note:</p>
<ol>
<li>You may assume the interval’s end point is always bigger than its start point.</li>
<li>You may assume none of these intervals have the same start point.<br>给定一组区间，对于每一个区间，如果有其他区间的起点大于等于这个区间的终点，那么就称这个区间有右区间。找出最近的右区间的下标。没有右区间则该区间的最小右区间为-1。</li>
</ol>
<p>这题直接用o(n*n)的算法就能过。即一个个找右区间。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">findRightInterval</span><span class="params">(intervals []Interval)</span> []<span class="title">int</span></span> &#123;</div><div class="line">    ret := <span class="built_in">make</span>([]<span class="keyword">int</span>,<span class="built_in">len</span>(intervals))</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(intervals);i++&#123;</div><div class="line">		min := i</div><div class="line">		<span class="keyword">for</span> j:=<span class="number">0</span>;j&lt;<span class="built_in">len</span>(intervals);j++&#123;</div><div class="line">			<span class="keyword">if</span> j == i&#123;</div><div class="line">				<span class="keyword">continue</span></div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span> intervals[j].Start &gt;= intervals[i].End&#123;</div><div class="line">				<span class="keyword">if</span> min == i || intervals[j].Start &lt; intervals[min].Start&#123;</div><div class="line">					 min = j</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> min == i&#123;</div><div class="line">			min = <span class="number">-1</span></div><div class="line">		&#125;</div><div class="line">		ret[i] = min</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ret</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="441-Arranging-Coins"><a href="#441-Arranging-Coins" class="headerlink" title="441. Arranging Coins"></a>441. Arranging Coins</h2><p>You have a total of n coins that you want to form in a staircase shape, where every k-th row must have exactly k coins.</p>
<p>Given n, find the total number of full staircase rows that can be formed.</p>
<p>n is a non-negative integer and fits within the range of a 32-bit signed integer.</p>
<p>水题，没啥好说的。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">arrangeCoins</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">    idx  :=<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (n&gt;=idx)&#123;</div><div class="line">		n -=idx</div><div class="line">		idx ++</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> idx<span class="number">-1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="444-Sequence-Reconstruction"><a href="#444-Sequence-Reconstruction" class="headerlink" title="444. Sequence Reconstruction"></a>444. Sequence Reconstruction</h2><p>Check whether the original sequence org can be uniquely reconstructed from the sequences in seqs. The org sequence is a permutation of the integers from 1 to n, with 1 ≤ n ≤ 10^4. Reconstruction means building a shortest common supersequence of the sequences in seqs (i.e., a shortest sequence so that all sequences in seqs are subsequences of it). Determine whether there is only one sequence that can be reconstructed from seqs and it is the org sequence.</p>
<p><a href="https://leetcode.com/contest/11/problems/sequence-reconstruction/" target="_blank" rel="external">link</a><br>没做出来，贴个别人的代码。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">sequenceReconstruction</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; org, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; seqs)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = org.size();</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; to(n), in(n);</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; vis(n);</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; adj(n);</div><div class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : org) &#123;</div><div class="line">            x--;</div><div class="line">            to[x] = k++;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;vec : seqs) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;c : vec) &#123;</div><div class="line">                c--;</div><div class="line">                <span class="keyword">if</span> (c &lt; <span class="number">0</span> || c &gt;= n) &#123;</div><div class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">                &#125;</div><div class="line">                vis[to[c]] = <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; vec.size(); i++) &#123;</div><div class="line">                <span class="keyword">auto</span> x = to[vec[i - <span class="number">1</span>]], y = to[vec[i]];</div><div class="line">                adj[x].push_back(y);</div><div class="line">                in[y]++;</div><div class="line">                <span class="keyword">if</span> (x &gt; y) &#123;</div><div class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (!vis[i]) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (!in[i]) &#123;</div><div class="line">                q.push(i);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; sorted;</div><div class="line">        <span class="keyword">while</span> (!q.empty()) &#123;</div><div class="line">            <span class="keyword">if</span> (q.size() &gt; <span class="number">1</span>) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">auto</span> s = q.front();</div><div class="line">            q.pop();</div><div class="line">            sorted.push_back(s);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> v : adj[s]) &#123;</div><div class="line">                <span class="keyword">if</span> (!--in[v]) &#123;</div><div class="line">                    q.push(v);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (i != sorted[i]) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Leetcode</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">Golang</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/10/30/Smarking Algorithm Contest 2/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-leetcode_weekly_contest10" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/23/leetcode_weekly_contest10/">Leetcode第十周周赛Smarking Algorithm Contest</a>
    </h1>
  

        
        <a href="/2016/10/23/leetcode_weekly_contest10/" class="archive-article-date">
  	<time datetime="2016-10-23T06:37:31.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-10-23</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="437-Path-Sum-III"><a href="#437-Path-Sum-III" class="headerlink" title="437. Path Sum III"></a>437. Path Sum III</h2><p>You are given a binary tree in which each node contains an integer value.</p>
<p>Find the number of paths that sum to a given value.</p>
<p>The path does not need to start or end at the root or a leaf, but it must go downwards (traveling only from parent nodes to child nodes).</p>
<p>The tree has no more than 1,000 nodes and the values are in the range -1,000,000 to 1,000,000.<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">root = [<span class="number">10</span>,<span class="number">5</span>,-<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="literal">null</span>,<span class="number">11</span>,<span class="number">3</span>,-<span class="number">2</span>,<span class="literal">null</span>,<span class="number">1</span>], sum = <span class="number">8</span></div><div class="line"></div><div class="line">      <span class="number">10</span></div><div class="line">     /  <span class="string">\</span></div><div class="line">    <span class="number">5</span>   -<span class="number">3</span></div><div class="line">   / <span class="string">\</span>    <span class="string">\</span></div><div class="line">  <span class="number">3</span>   <span class="number">2</span>   <span class="number">11</span></div><div class="line"> / <span class="string">\</span>   <span class="string">\</span></div><div class="line"><span class="number">3</span>  -<span class="number">2</span>   <span class="number">1</span></div><div class="line"></div><div class="line">Return <span class="number">3.</span> The paths <span class="literal">that</span> sum <span class="keyword">to</span> <span class="number">8</span> are:</div><div class="line"></div><div class="line"><span class="number">1.</span>  <span class="number">5</span><span class="function"> -&gt;</span> <span class="number">3</span></div><div class="line"><span class="number">2.</span>  <span class="number">5</span><span class="function"> -&gt;</span> <span class="number">2</span><span class="function"> -&gt;</span> <span class="number">1</span></div><div class="line"><span class="number">3.</span> -<span class="number">3</span><span class="function"> -&gt;</span> <span class="number">11</span></div></pre></td></tr></table></figure></p>
<p>给你个树，求出所有符合路径上的节点的值的和等于给定值这个条件的路径的个数。路径要求是自上而下，但是不要求从根出发，也不要求以叶子节点作为结尾。<br>挂在这道题上面了。<br>给个别人的解法：<br>将路径分为两种走法，每个节点都有两种走法。第一种情况是以这个节点为起点，开始出发。第二种是继承之前的走法接着走下去。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> res <span class="keyword">int</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">go2</span><span class="params">(root *TreeNode, need <span class="keyword">int</span>)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span> root == <span class="literal">nil</span>&#123;</div><div class="line">		<span class="keyword">return</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> need == <span class="number">0</span>&#123;</div><div class="line">		res ++</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> root.Left != <span class="literal">nil</span>&#123;</div><div class="line">		go2(root.Left,need-root.Left.Val)</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> root.Right != <span class="literal">nil</span>&#123;</div><div class="line">		go2(root.Right,need-root.Right.Val)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">go1</span><span class="params">(root * TreeNode, need <span class="keyword">int</span>)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span> root == <span class="literal">nil</span>&#123;</div><div class="line">		<span class="keyword">return</span></div><div class="line">	&#125;</div><div class="line">	go2(root,need-root.Val)</div><div class="line">	go1(root.Left,need)</div><div class="line">	go1(root.Right,need)</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">pathSum</span><span class="params">(root *TreeNode, sum <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	res = <span class="number">0</span></div><div class="line">	go1(root, sum)</div><div class="line">	<span class="keyword">return</span> res</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="438-Find-All-Anagrams-in-a-String"><a href="#438-Find-All-Anagrams-in-a-String" class="headerlink" title="438. Find All Anagrams in a String"></a>438. Find All Anagrams in a String</h2><p>Given a string s and a non-empty string p, find all the start indices of p’s anagrams in s.</p>
<p>Strings consists of lowercase English letters only and the length of both strings s and p will not be larger than 20,100.</p>
<p>The order of output does not matter.<br>Example 1:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Input:</div><div class="line">s: "cbaebabacd" p: "abc"</div><div class="line"></div><div class="line">Output:</div><div class="line">[0, 6]</div><div class="line"></div><div class="line">Explanation:</div><div class="line">The substring with <span class="keyword">start</span> <span class="keyword">index</span> = <span class="number">0</span> <span class="keyword">is</span> <span class="string">"cba"</span>, which <span class="keyword">is</span> an anagram <span class="keyword">of</span> <span class="string">"abc"</span>.</div><div class="line">The <span class="keyword">substring</span> <span class="keyword">with</span> <span class="keyword">start</span> <span class="keyword">index</span> = <span class="number">6</span> <span class="keyword">is</span> <span class="string">"bac"</span>, which <span class="keyword">is</span> an anagram <span class="keyword">of</span> <span class="string">"abc"</span>.</div></pre></td></tr></table></figure></p>
<p>Example 2:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Input:</div><div class="line">s: "abab" p: "ab"</div><div class="line"></div><div class="line">Output:</div><div class="line">[0, 1, 2]</div><div class="line"></div><div class="line">Explanation:</div><div class="line">The substring with <span class="keyword">start</span> <span class="keyword">index</span> = <span class="number">0</span> <span class="keyword">is</span> <span class="string">"ab"</span>, which <span class="keyword">is</span> an anagram <span class="keyword">of</span> <span class="string">"ab"</span>.</div><div class="line">The <span class="keyword">substring</span> <span class="keyword">with</span> <span class="keyword">start</span> <span class="keyword">index</span> = <span class="number">1</span> <span class="keyword">is</span> <span class="string">"ba"</span>, which <span class="keyword">is</span> an anagram <span class="keyword">of</span> <span class="string">"ab"</span>.</div><div class="line">The <span class="keyword">substring</span> <span class="keyword">with</span> <span class="keyword">start</span> <span class="keyword">index</span> = <span class="number">2</span> <span class="keyword">is</span> <span class="string">"ab"</span>, which <span class="keyword">is</span> an anagram <span class="keyword">of</span> <span class="string">"ab"</span>.</div></pre></td></tr></table></figure></p>
<p>给定两个字符串s,p，求出p的所有变形（包括自己）在s中的起点。<br>解法是统计p中的词频，然后统计s中i到<code>i+len(p)</code>中的字符串的词频。相比较，如果相等则说明命中了。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">check</span><span class="params">(a,b,c [26]<span class="keyword">int</span>)</span> <span class="title">bool</span></span>&#123;</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++&#123;</div><div class="line">		<span class="keyword">if</span> a[i]-b[i] != c[i]&#123;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">findAnagrams</span><span class="params">(s <span class="keyword">string</span>, p <span class="keyword">string</span>)</span> []<span class="title">int</span></span> &#123;</div><div class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(s)&lt;<span class="built_in">len</span>(p)&#123;</div><div class="line">		<span class="keyword">return</span> []<span class="keyword">int</span>&#123;&#125;</div><div class="line">	&#125;</div><div class="line">	ret := []<span class="keyword">int</span>&#123;&#125;</div><div class="line">    start, end, mark := [<span class="number">26</span>]<span class="keyword">int</span>&#123;&#125;,[<span class="number">26</span>]<span class="keyword">int</span>&#123;&#125;,[<span class="number">26</span>]<span class="keyword">int</span>&#123;&#125;</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(p);i++&#123;</div><div class="line">		mark[p[i]-<span class="string">'a'</span>] ++</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(p);i++&#123;</div><div class="line">		end[s[i]-<span class="string">'a'</span>] ++</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> check(end,start,mark)&#123;</div><div class="line">		ret = <span class="built_in">append</span>(ret,<span class="number">0</span>)</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> i:=<span class="built_in">len</span>(p);i&lt;<span class="built_in">len</span>(s);i++&#123;</div><div class="line">		start[s[i-<span class="built_in">len</span>(p)]-<span class="string">'a'</span>] ++</div><div class="line">		end[s[i]-<span class="string">'a'</span>]++</div><div class="line">		<span class="keyword">if</span> check(end,start,mark)&#123;</div><div class="line">			ret = <span class="built_in">append</span>(ret,i-<span class="built_in">len</span>(p)+<span class="number">1</span>)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ret</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="439-Ternary-Expression-Parser"><a href="#439-Ternary-Expression-Parser" class="headerlink" title="439. Ternary Expression Parser"></a>439. Ternary Expression Parser</h2><p>Given a string representing arbitrarily nested ternary expressions, calculate the result of the expression. You can always assume that the given expression is valid and only consists of digits 0-9, ?, :, T and F (T and F represent True and False respectively).</p>
<p>Note:</p>
<ol>
<li>The length of the given string is ≤ 10000.</li>
<li>Each number will contain only one digit.</li>
<li>The conditional expressions group right-to-left (as usual in most languages).</li>
<li>The condition will always be either T or F. That is, the condition will never be a digit.</li>
<li>The result of the expression will always evaluate to either a digit 0-9, T or F.<br>Example 1:<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Input: <span class="string">"T?2:3"</span></div><div class="line">Output: <span class="string">"2"</span></div><div class="line">Explanation: If <span class="literal">true</span>, <span class="keyword">then</span> <span class="literal">result</span> <span class="keyword">is</span> <span class="number">2</span>; otherwise <span class="literal">result</span> <span class="keyword">is</span> <span class="number">3.</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>Example 2:<br><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">Input</span>: "F?1:T?4:5"</div><div class="line"><span class="attribute">Output</span>: "4"</div><div class="line"><span class="attribute">Explanation</span>: The conditional expressions group right-to-left. Using parenthesis, it is read/evaluated as:</div><div class="line"></div><div class="line"><span class="clean"></span></div><div class="line">             <span class="string">"(F ? 1 : (T ? 4 : 5))"</span>                   <span class="string">"(F ? 1 : (T ? 4 : 5))"</span></div><div class="line">          -&gt; <span class="string">"(F ? 1 : 4)"</span>                 or       -&gt; <span class="string">"(T ? 4 : 5)"</span></div><div class="line">          -&gt; <span class="string">"4"</span>                                    -&gt; <span class="string">"4"</span></div><div class="line">```   </div><div class="line"></div><div class="line"></div><div class="line">就是C语言中常见的`?:`语句。</div><div class="line">这题可以利用栈来做，也可以利用递归来做，应该也可以用正则表达式来做。</div><div class="line">下面是递归的做法：</div></pre></td></tr></table></figure></p>
<p>func parseTernary(e string) string {<br>    if e[0] != ‘T’ &amp;&amp; e[0]!=’F’{<br>        return e<br>    }<br>    c1,c2,i := 0,0,1<br>    for i=1;i<len(e);i++{ if="" e[i]="=" '?'{="" c1="" ++="" }else{="" ':'{="" c2="" c2{="" break;="" }="" i="=" len(e){="" return="" e="" e[0]="=" 't'{="" parseternary(e[2:i])="" parseternary(e[i+1:])="" <figure="" class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">## 440. K-th Smallest in Lexicographical Order</span></div><div class="line">Given integers n <span class="keyword">and</span> k, find <span class="keyword">the</span> lexicographically k-th smallest <span class="keyword">integer</span> <span class="keyword">in</span> <span class="keyword">the</span> range <span class="built_in">from</span> <span class="number">1</span> <span class="built_in">to</span> n.</div><div class="line"></div><div class="line">Note: <span class="number">1</span> ≤ k ≤ n ≤ <span class="number">109.</span></div><div class="line"></div><div class="line">Example:</div></pre></td></tr></table></len(e);i++{></p>
<p>Input:<br>n: 13   k: 2</p>
<p>Output:<br>10</p>
<p>Explanation:<br>The lexicographical order is [1, 10, 11, 12, 13, 2, 3, 4, 5, 6, 7, 8, 9], so the second smallest number is 10.<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">求字典序的题。和头条的校招面试题一模一样。</div></pre></td></tr></table></figure></p>
<p>var Len,n,m,ret int<br>var num,ans [20]int</p>
<p>func valueOfBegin(b int ) int{<br>    cnt :=0<br>    for i:=b;i&lt;=Len;i++{<br>        cnt = cnt <em>10 + num[Len-i+1]<br>    }<br>    return cnt<br>}<br>func countofNum(a [20]int,anslen int) int{<br>    k,cnt :=1,0<br>    for i:=0;i+anslen &lt;Len;i++{<br>        cnt +=k<br>        k</em>=10<br>    }<br>    op :=0<br>    for i:=1;i&lt;=anslen;i++{<br>        id := Len-i+1<br>        if num[id]&gt;a[i]{<br>            op = -1<br>            break<br>        }else if num[id] &lt; a[i]{<br>            op = 1<br>            break<br>        }<br>    }<br>    if op == 0{<br>        if anslen == Len{<br>            return 1<br>        }<br>        return valueOfBegin(anslen+1)+1+cnt<br>    }<br>    if op == 1{<br>        return cnt<br>    }<br>        k = 1<br>        for i:=0;i&lt;Len-anslen;i++{<br>            k*=10</p>
<pre><code>}
return cnt +k
</code></pre><p>}</p>
<p>func dfs(ans [20]int, cur,m int){<br>    if m == 1{<br>        ret = 0<br>        for i:=1;i&lt;=cur;i++{<br>            ret = ret *10 + ans[i]<br>        }<br>        return<br>    }<br>    m –<br>    for i:=0;i&lt;=9;i++{<br>        ans[cur+1] = i<br>        cnt := countofNum(ans,cur+1)<br>        if cnt &gt;=m{<br>            dfs(ans,cur+1,m)<br>            return<br>        }else{<br>            m -= cnt<br>        }<br>    }<br>}</p>
<p>func findKthNumber(a int, k int) int {<br>    Len = 0<br>    n = a<br>    m = k<br>    for n&gt;0{<br>        Len ++<br>        num[Len] = n%10<br>        n/=10<br>    }<br>    for i:=1;i&lt;=9;i++{<br>        ans[1] = i<br>        cnt := countofNum(ans,1)<br>        if cnt &gt;=m{<br>            dfs(ans,1,m)<br>            break<br>        }else{<br>            m -= cnt<br>        }<br>    }<br>    return ret<br>}<br>```</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Leetcode</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">Golang</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/10/23/leetcode_weekly_contest10/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-leetcode_weekly_contest9" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/16/leetcode_weekly_contest9/">LeetCode Weekly Contest 9 第九周周赛</a>
    </h1>
  

        
        <a href="/2016/10/16/leetcode_weekly_contest9/" class="archive-article-date">
  	<time datetime="2016-10-16T06:11:31.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-10-16</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="422-Valid-Word-Square"><a href="#422-Valid-Word-Square" class="headerlink" title="422. Valid Word Square"></a>422. Valid Word Square</h2><p>Given a sequence of words, check whether it forms a valid word square.</p>
<p>A sequence of words forms a valid word square if the kth row and column read the exact same string, where 0 ≤ k &lt; max(numRows, numColumns).<br>Note:</p>
<pre><code>1. The number of words given is at least 1 and does not exceed 500.
2. Word length will be at least 1 and does not exceed 500.
3. Each word contains only lowercase English alphabet a-z.
</code></pre><p>大致就是讲给定一组string数组，判断string数组是不是符合要求。要求方块横着读和竖着读是一样的。<br>直接判断就行了。<br>golang AC代码：<br><figure class="highlight golang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">validWordSquare</span><span class="params">(words []<span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</div><div class="line">	str := <span class="string">""</span></div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span> ;i&lt; <span class="built_in">len</span>(words);i++&#123;</div><div class="line">		str = <span class="string">""</span></div><div class="line">		<span class="keyword">for</span> j:=<span class="number">0</span>;j&lt;<span class="built_in">len</span>(words);j++&#123;</div><div class="line">			<span class="keyword">if</span> i &lt; <span class="built_in">len</span>(words[j])&#123;</div><div class="line">				str += <span class="keyword">string</span>(words[j][i])</div><div class="line">			&#125;<span class="keyword">else</span>&#123;</div><div class="line">				<span class="keyword">break</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> str != words[i]&#123;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span></div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="423-Reconstruct-Original-Digits-from-English"><a href="#423-Reconstruct-Original-Digits-from-English" class="headerlink" title="423. Reconstruct Original Digits from English"></a>423. Reconstruct Original Digits from English</h2><p>Given a non-empty string containing an out-of-order English representation of digits 0-9, output the digits in ascending order.</p>
<p>Note:</p>
<ol>
<li>Input contains only lowercase English letters.</li>
<li>Input is guaranteed to be valid and can be transformed to its original digits. That means invalid inputs such as “abc” or “zerone” are not permitted.</li>
<li>Input length is less than 50,000.</li>
</ol>
<p>给一串乱序的字母序列，求这个字母序列重组之后所代表的数字串。<br>比如：<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">Input:</span> <span class="string">"owoztneoer"</span></div><div class="line"></div><div class="line"><span class="symbol">Output:</span> <span class="string">"012"</span></div></pre></td></tr></table></figure></p>
<p>题目中说给出的字母序列都是必定合法而且唯一的。</p>
<p>这题主要是根据0-9的英文中独占的字母来进行判断的。判断的顺序如下：</p>
<table>
<thead>
<tr>
<th>数字</th>
<th>英文</th>
<th>字母   </th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>zero</td>
<td>z</td>
</tr>
<tr>
<td>6</td>
<td>six</td>
<td>s</td>
</tr>
<tr>
<td>2</td>
<td>two</td>
<td>w</td>
</tr>
<tr>
<td>7</td>
<td>seven</td>
<td>s</td>
</tr>
<tr>
<td>4</td>
<td>four</td>
<td>u</td>
</tr>
<tr>
<td>5</td>
<td>five</td>
<td>v</td>
</tr>
<tr>
<td>1</td>
<td>one</td>
<td>o</td>
</tr>
<tr>
<td>9</td>
<td>nine</td>
<td>n</td>
</tr>
<tr>
<td>8</td>
<td>eight</td>
<td>i</td>
</tr>
<tr>
<td>3</td>
<td>three</td>
<td>t</td>
</tr>
</tbody>
</table>
<p>从表的第一项开始，我们首先可以通过z的个数确定0的个数，然后通过s确定6的个数。依次类推。需要注意的是9的个数是n的个数的一半。最后就能得到乱序序列的原来的数字组合了。<br>golang AC代码：<br><figure class="highlight golang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">originalDigits</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</div><div class="line">    nums := []<span class="keyword">string</span>&#123;<span class="string">"zero"</span>,<span class="string">"one"</span>,<span class="string">"two"</span>,<span class="string">"three"</span>,<span class="string">"four"</span>,<span class="string">"five"</span>,<span class="string">"six"</span>,<span class="string">"seven"</span>,<span class="string">"eight"</span>,<span class="string">"nine"</span>&#125;</div><div class="line">	<span class="keyword">var</span> count [<span class="number">10</span>]<span class="keyword">int</span></div><div class="line">	<span class="keyword">var</span> acount [<span class="number">26</span>]<span class="keyword">int</span></div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(s);i++&#123;</div><div class="line">		acount[<span class="keyword">int</span>(s[i]-<span class="string">'a'</span>)] ++</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> acount[<span class="number">25</span>]&gt;<span class="number">0</span>&#123;</div><div class="line">		str := nums[<span class="number">0</span>]</div><div class="line">		count[<span class="number">0</span>] = acount[<span class="number">25</span>]</div><div class="line">		<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(str);i++&#123;</div><div class="line">			acount[<span class="keyword">int</span>(str[i]-<span class="string">'a'</span>)] -= count[<span class="number">0</span>]</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (acount[<span class="keyword">int</span>(<span class="string">'x'</span>-<span class="string">'a'</span>)]&gt;<span class="number">0</span>)&#123;</div><div class="line">		str := nums[<span class="number">6</span>]</div><div class="line">		count[<span class="number">6</span>] = acount[<span class="keyword">int</span>(<span class="string">'x'</span>-<span class="string">'a'</span>)]</div><div class="line">		<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(str);i++&#123;</div><div class="line">			acount[<span class="keyword">int</span>(str[i]-<span class="string">'a'</span>)] -= count[<span class="number">6</span>]</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (acount[<span class="keyword">int</span>(<span class="string">'w'</span>-<span class="string">'a'</span>)]&gt;<span class="number">0</span>)&#123;</div><div class="line">		str := nums[<span class="number">2</span>]</div><div class="line">		count[<span class="number">2</span>] = acount[<span class="keyword">int</span>(<span class="string">'w'</span>-<span class="string">'a'</span>)]</div><div class="line">		<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(str);i++&#123;</div><div class="line">			acount[<span class="keyword">int</span>(str[i]-<span class="string">'a'</span>)] -= count[<span class="number">2</span>]</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (acount[<span class="keyword">int</span>(<span class="string">'s'</span>-<span class="string">'a'</span>)]&gt;<span class="number">0</span>)&#123;</div><div class="line">		str := nums[<span class="number">7</span>]</div><div class="line">		count[<span class="number">7</span>] = acount[<span class="keyword">int</span>(<span class="string">'s'</span>-<span class="string">'a'</span>)]</div><div class="line">		<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(str);i++&#123;</div><div class="line">			acount[<span class="keyword">int</span>(str[i]-<span class="string">'a'</span>)] -= count[<span class="number">7</span>]</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (acount[<span class="keyword">int</span>(<span class="string">'u'</span>-<span class="string">'a'</span>)]&gt;<span class="number">0</span>)&#123;</div><div class="line">		str := nums[<span class="number">4</span>]</div><div class="line">		count[<span class="number">4</span>] = acount[<span class="keyword">int</span>(<span class="string">'u'</span>-<span class="string">'a'</span>)]</div><div class="line">		<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(str);i++&#123;</div><div class="line">			acount[<span class="keyword">int</span>(str[i]-<span class="string">'a'</span>)] -= count[<span class="number">4</span>]</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (acount[<span class="keyword">int</span>(<span class="string">'v'</span>-<span class="string">'a'</span>)]&gt;<span class="number">0</span>)&#123;</div><div class="line">		str := nums[<span class="number">5</span>]</div><div class="line">		count[<span class="number">5</span>] = acount[<span class="keyword">int</span>(<span class="string">'v'</span>-<span class="string">'a'</span>)]</div><div class="line">		<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(str);i++&#123;</div><div class="line">			acount[<span class="keyword">int</span>(str[i]-<span class="string">'a'</span>)] -= count[<span class="number">5</span>]</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">		<span class="keyword">if</span> (acount[<span class="keyword">int</span>(<span class="string">'o'</span>-<span class="string">'a'</span>)]&gt;<span class="number">0</span>)&#123;</div><div class="line">		str := nums[<span class="number">1</span>]</div><div class="line">		count[<span class="number">1</span>] = acount[<span class="keyword">int</span>(<span class="string">'o'</span>-<span class="string">'a'</span>)]</div><div class="line">		<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(str);i++&#123;</div><div class="line">			acount[<span class="keyword">int</span>(str[i]-<span class="string">'a'</span>)] -= count[<span class="number">1</span>]</div><div class="line">		&#125;</div><div class="line">	&#125;	</div><div class="line">	<span class="keyword">if</span> (acount[<span class="keyword">int</span>(<span class="string">'n'</span>-<span class="string">'a'</span>)]&gt;<span class="number">0</span>)&#123;</div><div class="line">		str := nums[<span class="number">9</span>]</div><div class="line">		count[<span class="number">9</span>] = acount[<span class="keyword">int</span>(<span class="string">'n'</span>-<span class="string">'a'</span>)]/<span class="number">2</span></div><div class="line">		<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(str);i++&#123;</div><div class="line">			acount[<span class="keyword">int</span>(str[i]-<span class="string">'a'</span>)] -= count[<span class="number">9</span>]</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (acount[<span class="keyword">int</span>(<span class="string">'i'</span>-<span class="string">'a'</span>)]&gt;<span class="number">0</span>)&#123;</div><div class="line">		str := nums[<span class="number">8</span>]</div><div class="line">		count[<span class="number">8</span>] = acount[<span class="keyword">int</span>(<span class="string">'i'</span>-<span class="string">'a'</span>)]</div><div class="line">		<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(str);i++&#123;</div><div class="line">			acount[<span class="keyword">int</span>(str[i]-<span class="string">'a'</span>)] -= count[<span class="number">8</span>]</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	count[<span class="number">3</span>] = acount[<span class="keyword">int</span>(<span class="string">'r'</span>-<span class="string">'a'</span>)]</div><div class="line">	str := <span class="string">""</span></div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;=<span class="number">9</span>;i++&#123;</div><div class="line">		<span class="keyword">for</span> j:=<span class="number">0</span>;j&lt;count[i];j++&#123;</div><div class="line">			str += <span class="keyword">string</span>(i+<span class="string">'0'</span>)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> str</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="424-Longest-Repeating-Character-Replacement"><a href="#424-Longest-Repeating-Character-Replacement" class="headerlink" title="424. Longest Repeating Character Replacement"></a>424. Longest Repeating Character Replacement</h2><p>Given a string that consists of only uppercase English letters, you can replace any letter in the string with another letter at most k times. Find the length of a longest substring containing all repeating letters you can get after performing the above operations.<br>给定一串仅由大写字母组成的字符串，和一个数字k。假定这个字符串最多有k个字母能被替换成其他字母。求这个替换的过程中，最长的连续重复序列的长度。<br>这道题可以用枚举法，先假设以求最长的连续的A,那么在整个序列中，把不是A的点都标出来。然后看看把这些点中的某K个换成A。求出这个换的过程中的最长长度。<br>算法复杂度是o(n).<br>AC golang代码如下：<br><figure class="highlight golang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">characterReplacement</span><span class="params">(s <span class="keyword">string</span>, k <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">    dp := <span class="built_in">make</span>([]<span class="keyword">int</span>,<span class="built_in">len</span>(s)+<span class="number">1</span>)</div><div class="line">	<span class="keyword">var</span> ch [<span class="number">26</span>]<span class="keyword">bool</span></div><div class="line">	max := <span class="number">0</span></div><div class="line">	<span class="keyword">if</span> k == <span class="number">0</span>&#123;</div><div class="line">		length := <span class="number">1</span></div><div class="line">		<span class="keyword">for</span> i :=<span class="number">1</span>;i&lt;<span class="built_in">len</span>(s);i++&#123;</div><div class="line">			<span class="keyword">if</span> s[i<span class="number">-1</span>] == s[i]&#123;</div><div class="line">				length ++</div><div class="line">			&#125;<span class="keyword">else</span>&#123;</div><div class="line">				<span class="keyword">if</span> max &lt; length&#123;</div><div class="line">					max = length</div><div class="line">				&#125;</div><div class="line">				length = <span class="number">1</span></div><div class="line">			&#125;</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> max &lt; length&#123;</div><div class="line">					max = length</div><div class="line">				&#125;</div><div class="line">		<span class="keyword">return</span> max;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//length := 0</span></div><div class="line">	<span class="keyword">for</span> i :=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(s);i++&#123;</div><div class="line">		ch[s[i]-<span class="string">'A'</span>] = <span class="literal">true</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> i :=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++&#123;</div><div class="line">		<span class="keyword">if</span> ch[i] == <span class="literal">false</span>&#123;</div><div class="line">			<span class="keyword">continue</span></div><div class="line">		&#125;</div><div class="line">		c := <span class="string">'A'</span> + i</div><div class="line">	<span class="comment">//	if c == 75&#123;</span></div><div class="line">	<span class="comment">//		fmt.Println("break")</span></div><div class="line">	<span class="comment">//	&#125;</span></div><div class="line">		idx :=<span class="number">0</span></div><div class="line">		<span class="keyword">for</span> j:=<span class="number">0</span>;j&lt;<span class="built_in">len</span>(s);j++&#123;</div><div class="line">			<span class="keyword">if</span> <span class="keyword">int</span>(s[j])!=c&#123;</div><div class="line">				dp[idx] = j</div><div class="line">				idx++</div><div class="line">			<span class="comment">//else&#123;</span></div><div class="line">		<span class="comment">//		fmt.Print(j," ")</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="comment">//fmt.Println("|",c)</span></div><div class="line">		<span class="keyword">if</span> idx &lt;= k&#123;</div><div class="line">			<span class="keyword">return</span> <span class="built_in">len</span>(s)</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> max &lt; dp[k]&#123;</div><div class="line">			max = dp[k]</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span> j:= k+<span class="number">1</span>;j &lt;idx;j++&#123;</div><div class="line">			<span class="keyword">if</span> dp[j] - dp[j-k<span class="number">-1</span>] - <span class="number">1</span> &gt;= max&#123;</div><div class="line">				max = dp[j] - dp[j-k<span class="number">-1</span>] - <span class="number">1</span></div><div class="line">				<span class="comment">//fmt.Println(c)</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> max</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="425-Word-Squares"><a href="#425-Word-Squares" class="headerlink" title="425 Word Squares"></a>425 Word Squares</h2><p>没做出来，贴一个别人的python代码，用了trie树加dfs：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wordSquares</span><span class="params">(self, words)</span>:</span></div><div class="line">        <span class="string">"""</span></div><div class="line">        :type words: List[str]</div><div class="line">        :rtype: List[List[str]]</div><div class="line">        """</div><div class="line">        self.l = len(words[<span class="number">0</span>])</div><div class="line">        </div><div class="line">        self.trie = self.build(words)</div><div class="line">    </div><div class="line">        self.res = []</div><div class="line">    </div><div class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> words:</div><div class="line">            self.dfs(words, self.trie, [word])</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> self.res</div><div class="line">        </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(self, words, trie, lst)</span>:</span></div><div class="line">        <span class="keyword">if</span> len(lst) == self.l:</div><div class="line">            self.res.append(lst)</div><div class="line">            <span class="keyword">return</span></div><div class="line">        </div><div class="line">        prefix = <span class="string">''</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(lst)):</div><div class="line">            prefix += lst[i][len(lst)]</div><div class="line">        </div><div class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> self.get(trie, prefix):</div><div class="line">            self.dfs(words, trie, lst + [s])</div><div class="line">        </div><div class="line">        </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(self, words)</span>:</span></div><div class="line">        trie = &#123;&#125;</div><div class="line">        </div><div class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> words:</div><div class="line">            t = trie</div><div class="line">            </div><div class="line">            <span class="keyword">for</span> c <span class="keyword">in</span> word:</div><div class="line">                <span class="keyword">if</span> c <span class="keyword">not</span> <span class="keyword">in</span> t:</div><div class="line">                    t[c] = &#123;&#125;</div><div class="line">                t = t[c]</div><div class="line">            </div><div class="line">            t[<span class="string">'#'</span>] = <span class="string">'#'</span></div><div class="line">        </div><div class="line">        <span class="keyword">return</span> trie</div><div class="line">        </div><div class="line">        </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, trie, prefix)</span>:</span></div><div class="line">        res = []</div><div class="line">        </div><div class="line">        t = trie</div><div class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> prefix:</div><div class="line">            <span class="keyword">if</span> c <span class="keyword">not</span> <span class="keyword">in</span> t:</div><div class="line">                <span class="keyword">return</span> res</div><div class="line">            t = t[c]</div><div class="line">        </div><div class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> self.getall(t):</div><div class="line">            res.append(prefix + s)</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> res</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getall</span><span class="params">(self, t)</span>:</span></div><div class="line">        res = []</div><div class="line">        <span class="keyword">if</span> <span class="string">'#'</span> <span class="keyword">in</span> t: <span class="keyword">return</span> [<span class="string">''</span>]</div><div class="line">        </div><div class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> t:</div><div class="line">            <span class="keyword">if</span> c != <span class="string">'#'</span>:</div><div class="line">                <span class="keyword">for</span> s <span class="keyword">in</span> self.getall(t[c]):</div><div class="line">                    res.append(c + s)</div><div class="line">        <span class="keyword">return</span> res</div></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Leetcode</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">Golang</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/10/16/leetcode_weekly_contest9/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 NachtZ
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="./",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var e=/\/|index.html/g;return t.replace(e,"")===n.replace(e,"")}function i(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,e=0,r=t.length;e<r;e++){var i=t[e];o(n,i.getAttribute("href"))&&(0,d.default)(i,"active")}}function u(t){for(var n=t.offsetLeft,e=t.offsetParent;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n}function f(t){for(var n=t.offsetTop,e=t.offsetParent;null!==e;)n+=e.offsetTop,e=e.offsetParent;return n}function c(t,n,e,r,o){var i=u(t),c=f(t)-n;if(c-e<=o){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,h.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(e||c)+"px",a.style.left=i+"px",a.style.zIndex=r||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");c(t,document.body.scrollTop,-63,2,0),c(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}function l(){x.default.versions.mobile&&window.screen.width<800&&(i(),s())}var p=e(71),d=r(p),v=e(72),y=(r(v),e(84)),h=r(y),b=e(69),x=r(b),m=e(75),g=r(m),w=e(70);l(),(0,w.addLoadEvent)(function(){g.default.init()}),t.exports={}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(49),o=e(15);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=!e(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(6),o=e(12);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(10),o=e(30),i=e(24),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(22)("wks"),o=e(13),i=e(1).Symbol,u="function"==typeof i,f=t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))};f.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(35),o=e(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(6).f,o=e(2),i=e(7)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){var r=e(22)("keys"),o=e(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){var r=e(1),o=e(14),i=e(18),u=e(26),f=e(6).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||f(n,t,{value:u.f(t)})}},function(t,n,e){n.f=e(7)},function(t,n,e){var r=e(1),o=e(14),i=e(46),u=e(5),f="prototype",c=function(t,n,e){var a,s,l,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,h=t&c.B,b=t&c.W,x=d?o:o[n]||(o[n]={}),m=x[f],g=d?r:v?r[n]:(r[n]||{})[f];d&&(e=n);for(a in e)s=!p&&g&&void 0!==g[a],s&&a in x||(l=s?g[a]:e[a],x[a]=d&&"function"!=typeof g[a]?e[a]:h&&s?i(l,r):b&&g[a]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[f]=t[f],n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((x.virtual||(x.virtual={}))[a]=l,t&c.R&&m&&!m[a]&&u(m,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(11),o=e(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){t.exports=!e(4)&&!e(8)(function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){"use strict";var r=e(18),o=e(27),i=e(36),u=e(5),f=e(2),c=e(17),a=e(51),s=e(20),l=e(58),p=e(7)("iterator"),d=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",h="values",b=function(){return this};t.exports=function(t,n,e,x,m,g,w){a(e,n,x);var O,S,_,j=function(t){if(!d&&t in A)return A[t];switch(t){case y:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",E=m==h,M=!1,A=t.prototype,T=A[p]||A[v]||m&&A[m],L=T||j(m),N=m?E?j("entries"):L:void 0,C="Array"==n?A.entries||T:T;if(C&&(_=l(C.call(new t)),_!==Object.prototype&&(s(_,P,!0),r||f(_,p)||u(_,p,b))),E&&T&&T.name!==h&&(M=!0,L=function(){return T.call(this)}),r&&!w||!d&&!M&&A[p]||u(A,p,L),c[n]=L,c[P]=b,m)if(O={values:E?L:j(h),keys:g?L:j(y),entries:N},w)for(S in O)S in A||i(A,S,O[S]);else o(o.P+o.F*(d||M),n,O);return O}},function(t,n,e){var r=e(10),o=e(55),i=e(16),u=e(21)("IE_PROTO"),f=function(){},c="prototype",a=function(){var t,n=e(29)("iframe"),r=i.length,o="<",u=">";for(n.style.display="none",e(48).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+u+"document.F=Object"+o+"/script"+u),t.close(),a=t.F;r--;)delete a[c][i[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f[c]=r(t),e=new f,f[c]=null,e[u]=t):e=a(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35),o=e(16).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(2),o=e(3),i=e(45)(!1),u=e(21)("IE_PROTO");t.exports=function(t,n){var e,f=o(t),c=0,a=[];for(e in f)e!=u&&r(f,e)&&a.push(e);for(;n.length>c;)r(f,e=n[c++])&&(~i(a,e)||a.push(e));return a}},function(t,n,e){t.exports=e(5)},function(t,n,e){var r=e(15);t.exports=function(t){return Object(r(t))}},function(t,n,e){t.exports={default:e(41),__esModule:!0}},function(t,n,e){t.exports={default:e(42),__esModule:!0}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=e(39),i=r(o),u=e(38),f=r(u),c="function"==typeof f.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":typeof t};n.default="function"==typeof f.default&&"symbol"===c(i.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,n,e){e(65),e(63),e(66),e(67),t.exports=e(14).Symbol},function(t,n,e){e(64),e(68),t.exports=e(26).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,e){var r=e(3),o=e(61),i=e(60);t.exports=function(t){return function(n,e,u){var f,c=r(n),a=o(c.length),s=i(u,a);if(t&&e!=e){for(;a>s;)if(f=c[s++],f!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(43);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(9),o=e(34),i=e(19);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,f=e(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&n.push(u);return n}},function(t,n,e){t.exports=e(1).document&&document.documentElement},function(t,n,e){var r=e(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){"use strict";var r=e(32),o=e(12),i=e(20),u={};e(5)(u,e(7)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){var r=e(9),o=e(3);t.exports=function(t,n){for(var e,i=o(t),u=r(i),f=u.length,c=0;f>c;)if(i[e=u[c++]]===n)return e}},function(t,n,e){var r=e(13)("meta"),o=e(11),i=e(2),u=e(6).f,f=0,c=Object.isExtensible||function(){return!0},a=!e(8)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:"O"+ ++f,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},p=function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},d=function(t){return a&&v.NEED&&c(t)&&!i(t,r)&&s(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,n,e){var r=e(6),o=e(10),i=e(9);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),f=u.length,c=0;f>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(19),o=e(12),i=e(3),u=e(24),f=e(2),c=e(30),a=Object.getOwnPropertyDescriptor;n.f=e(4)?a:function(t,n){if(t=i(t),n=u(n,!0),c)try{return a(t,n)}catch(t){}if(f(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),o=e(33).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?f(t):o(r(t))}},function(t,n,e){var r=e(2),o=e(37),i=e(21)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){var r=e(23),o=e(15);t.exports=function(t){return function(n,e){var i,u,f=String(o(n)),c=r(e),a=f.length;return c<0||c>=a?t?"":void 0:(i=f.charCodeAt(c),i<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return t=r(t),t<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(44),o=e(52),i=e(17),u=e(3);t.exports=e(31)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,e):"values"==n?o(0,t[e]):o(0,[e,t[e]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){},function(t,n,e){"use strict";var r=e(59)(!0);e(31)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,e){"use strict";var r=e(1),o=e(2),i=e(4),u=e(27),f=e(36),c=e(54).KEY,a=e(8),s=e(22),l=e(20),p=e(13),d=e(7),v=e(26),y=e(25),h=e(53),b=e(47),x=e(50),m=e(10),g=e(3),w=e(24),O=e(12),S=e(32),_=e(57),j=e(56),P=e(6),E=e(9),M=j.f,A=P.f,T=_.f,L=r.Symbol,N=r.JSON,C=N&&N.stringify,k="prototype",F=d("_hidden"),q=d("toPrimitive"),I={}.propertyIsEnumerable,B=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),H=Object[k],K="function"==typeof L,R=r.QObject,J=!R||!R[k]||!R[k].findChild,U=i&&a(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=M(H,n);r&&delete H[n],A(t,n,e),r&&t!==H&&A(H,n,r)}:A,G=function(t){var n=D[t]=S(L[k]);return n._k=t,n},$=K&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},z=function(t,n,e){return t===H&&z(W,n,e),m(t),n=w(n,!0),m(e),o(D,n)?(e.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),e=S(e,{enumerable:O(0,!1)})):(o(t,F)||A(t,F,O(1,{})),t[F][n]=!0),U(t,n,e)):A(t,n,e)},Y=function(t,n){m(t);for(var e,r=b(n=g(n)),o=0,i=r.length;i>o;)z(t,e=r[o++],n[e]);return t},Q=function(t,n){return void 0===n?S(t):Y(S(t),n)},X=function(t){var n=I.call(this,t=w(t,!0));return!(this===H&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,F)&&this[F][t])||n)},V=function(t,n){if(t=g(t),n=w(n,!0),t!==H||!o(D,n)||o(W,n)){var e=M(t,n);return!e||!o(D,n)||o(t,F)&&t[F][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=T(g(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==F||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===H,r=T(e?W:g(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(H,n)||i.push(D[n]);return i};K||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===H&&n.call(W,e),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),U(this,t,O(1,e))};return i&&J&&U(H,t,{configurable:!0,set:n}),G(t)},f(L[k],"toString",function(){return this._k}),j.f=V,P.f=z,e(33).f=_.f=Z,e(19).f=X,e(34).f=tt,i&&!e(18)&&f(H,"propertyIsEnumerable",X,!0),v.f=function(t){return G(d(t))}),u(u.G+u.W+u.F*!K,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)d(nt[et++]);for(var nt=E(d.store),et=0;nt.length>et;)y(nt[et++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if($(t))return h(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),u(u.S+u.F*!K,"Object",{create:Q,defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&u(u.S+u.F*(!K||a(function(){var t=L();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return n=r[1],"function"==typeof n&&(e=n),!e&&x(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!$(n))return n}),r[1]=n,C.apply(N,r)}}}),L[k][q]||e(5)(L[k],q,L[k].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){e(25)("asyncIterator")},function(t,n,e){e(25)("observable")},function(t,n,e){e(62);for(var r=e(1),o=e(5),i=e(17),u=e(7)("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,n){"use strict";var e={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,weixin:t.indexOf("MicroMessenger")==-1}}()};t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=e(40),i=r(o),u=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):o[t]||t}function n(t){return l[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,r=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},f=/\u00a0/g,c=/<br\s*\/?>/gi,a=/\r?\n/g,s=/\s/g,l={};for(var p in o)l[o[p]]=p;return o["&apos;"]="'",l["'"]="&#39;",{encode:function(t){return t?(""+t).replace(r,n).replace(a,"<br/>").replace(s,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(c,"\n").replace(e,t).replace(f," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e+=2)n.push(String.fromCharCode("0x"+t.slice(e,e+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,e=t.length;e>n;n++)t[n]=u.encodeObject(t[n]);else if("object"==("undefined"==typeof t?"undefined":(0,i.default)(t)))for(var r in t)t[r]=u.encodeObject(t[r]);else if("string"==typeof t)return u.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=u},function(t,n){function e(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=e},function(t,n){function e(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(e," ")}}t.exports=e},,,function(t,n){"use strict";function e(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){var n=document.querySelectorAll(".article-entry a:not(.article-more-a)");n.forEach(function(t){t.setAttribute("target","_blank")})}var e=document.querySelector("#js-aboutme");e&&0!==e.length&&(e.innerHTML=e.innerText)}t.exports={init:e}},,,,,,,,,function(t,n){function e(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var e=t.nextSibling;return e?t.parentNode.insertBefore(n,e):t.parentNode.appendChild(n)}t.exports=e}])</script><script src="/./main.2d7529.js"></script><script>!function(){var e=function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)};e("/slider.885efe.js")}()</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 50%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
        
      
      <li style="width: 50%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">SDN</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Leetcode</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Golang</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Algorithm</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">DPDK</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Snort</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Docker</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">活得&lt;br&gt;比别人幸运一点点&lt;br&gt;就好&lt;br&gt;最上川</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>