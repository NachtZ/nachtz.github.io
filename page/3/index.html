<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="dns-prefetch" href="http://nachtz.top">
  <title>一元硬币</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="北邮本科信安，硕士软件。">
<meta property="og:type" content="website">
<meta property="og:title" content="一元硬币">
<meta property="og:url" content="http://nachtz.top/page/3/index.html">
<meta property="og:site_name" content="一元硬币">
<meta property="og:description" content="北邮本科信安，硕士软件。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一元硬币">
<meta name="twitter:description" content="北邮本科信安，硕士软件。">
  
    <link rel="alternative" href="/atom.xml" title="一元硬币" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.f6a68c.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

</head>
</html>
<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="https://raw.githubusercontent.com/NachtZ/odl_test/master/11970866.jpg" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">NachtZ</a></h1>
		</hgroup>
		
		<p class="header-subtitle">闷声发大财，可以为师矣。</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/Resume/">面经</a></li>
	        
				<li><a href="/tags/DPDK/">DPDK</a></li>
	        
				<li><a href="/tags/Leetcode/">Leetcode</a></li>
	        
				<li><a href="/tags/Golang/">Golang</a></li>
	        
				<li><a href="/tags/SDN/">SDN</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/NachtZ" title="github" rel="external nofollow noopener noreferrer"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="http://weibo.com/nachtz" title="weibo" rel="external nofollow noopener noreferrer"><i class="icon-weibo"></i></a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/nachtz" title="zhihu" rel="external nofollow noopener noreferrer"><i class="icon-zhihu"></i></a>
		        
					<a class="mail" target="_blank" href="mailto:nachtz@outlook.com" title="mail" rel="external nofollow noopener noreferrer"><i class="icon-mail"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="https://raw.githubusercontent.com/NachtZ/odl_test/master/11970866.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">NachtZ</h1>
			</hgroup>
			
			<p class="header-subtitle"><i class="icon icon-quo-left"></i>闷声发大财，可以为师矣。<i class="icon icon-quo-right"></i></p>
			
			
			
				
			
				
			
				
			
				
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/NachtZ" title="github" rel="external nofollow noopener noreferrer"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/nachtz" title="weibo" rel="external nofollow noopener noreferrer"><i class="icon-weibo"></i></a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/nachtz" title="zhihu" rel="external nofollow noopener noreferrer"><i class="icon-zhihu"></i></a>
			        
						<a class="mail" target="_blank" href="mailto:nachtz@outlook.com" title="mail" rel="external nofollow noopener noreferrer"><i class="icon-mail"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 70%">
				
				
					<li style="width: 16.666666666666668%"><a href="/">主页</a></li>
		        
					<li style="width: 16.666666666666668%"><a href="/tags/Resume/">面经</a></li>
		        
					<li style="width: 16.666666666666668%"><a href="/tags/DPDK/">DPDK</a></li>
		        
					<li style="width: 16.666666666666668%"><a href="/tags/Leetcode/">Leetcode</a></li>
		        
					<li style="width: 16.666666666666668%"><a href="/tags/Golang/">Golang</a></li>
		        
					<li style="width: 16.666666666666668%"><a href="/tags/SDN/">SDN</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionheight="100" data-contentid="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-dpdk_docker" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/dpdk_docker.html">在Docker中运行DPDK</a>
    </h1>
  

        
        <a href="/dpdk_docker.html" class="archive-article-date">
  	<time datetime="2016-10-16T04:37:31.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-10-16</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><p>Docker：<code>1.12.1</code><br>DPDK:<code>16.07</code></p>
<h3 id="Docker的安装"><a href="#Docker的安装" class="headerlink" title="Docker的安装"></a>Docker的安装</h3><p>在Ubuntu中docker的安装还是很简单的。参考官方文档<a href="[Docker安装指南](https://docs.docker.com/engine/installation/linux/ubuntulinux/)">^1</a>就行了。需要注意的是只能在64位，linux版本号不低于<code>3.11.0-15-generic</code>的发行版上运行。所以在OpenVZ的VPS上不能运行。</p>
<h3 id="制造DPDK的Docker镜像"><a href="#制造DPDK的Docker镜像" class="headerlink" title="制造DPDK的Docker镜像"></a>制造DPDK的Docker镜像</h3><p>这边主要参考的是网上的一篇博客<a href="[Docker安装指南](https://docs.docker.com/engine/installation/linux/ubuntulinux/)">^1</a>和红帽的Github[^2]来写Dockerfile的。Dockerfile如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">FROM ubuntu</div><div class="line">MAINTAINER NachtZ&lt;nachtz@outlook.com&gt;</div><div class="line"></div><div class="line">LABEL RUN docker run -it --privileged -v /sys/bus/pci/devices:/sys/bus/pci/devices -v /sys/kernel/mm/hugepages:/sys/kernel/mm/hugepages -v /sys/devices/system/node:/sys/devices/system/node -v /dev:/dev --name NAME -e NAME=NAME -e IMAGE=IMAGE IMAGE&quot;</div><div class="line"></div><div class="line"># Setup yum repos, or use subscription-manager</div><div class="line"></div><div class="line"># Install DPDK support packages.</div><div class="line">RUN  apt-get update &amp;&amp; apt-get install -y libpcap-dev wget xz-utils gcc automake autoconf libtool make</div><div class="line">    </div><div class="line"></div><div class="line"># Build DPDK and pktgen-dpdk for x86_64-native-linuxapp-gcc.</div><div class="line">WORKDIR /root</div><div class="line">COPY ./build_dpdk.sh /root/build_dpdk.sh</div><div class="line">COPY ./dpdk-profile.sh /etc/profile.d/</div><div class="line">#RUN /root/build_dpdk.sh</div><div class="line"></div><div class="line"># Defaults to a bash shell, you could put your DPDK-based application here.</div><div class="line">CMD [&quot;/bin/bash&quot;]</div></pre></td></tr></table></figure></p>
<p>这个Dockerfile的注解如下：<br><code>FROM ubuntu</code>：说明该镜像的源镜像是Ubuntu。<br><code>MAINTAINER NachtZ&lt;nachtz@outlook.com&gt;</code>:介绍镜像的作者。</p>
<p><code>LABEL RUN docker run -it --privileged -v /sys/bus/pci/devices:/sys/bus/pci/devices -v /sys/kernel/mm/hugepages:/sys/kernel/mm/hugepages -v /sys/devices/system/node:/sys/devices/system/node -v /dev:/dev --name NAME -e NAME=NAME -e· IMAGE=IMAGE IMAGE&quot;</code>: 镜像的标签。</p>
<p><code>RUN  apt-get update &amp;&amp; apt-get install -y libpcap-dev wget xz-utils gcc automake autoconf libtool make</code>：安装DPDK所需要的依赖程序，因为在Docker中的系统都是比较精简的，所以很多程序都需要自己安装。</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">WORKDIR</span><span class="bash"> /root</span></div><div class="line"><span class="keyword">COPY</span><span class="bash"> ./build_dpdk.sh /root/build_dpdk.sh</span></div><div class="line"><span class="keyword">COPY</span><span class="bash"> ./dpdk-profile.sh /etc/profile.d/</span></div></pre></td></tr></table></figure>
<p>上面这段话是把Dockerfile同目录下<code>./build_dpdk.sh</code>,<code>./dpdk-profile.sh</code>拷贝到镜像里面去。</p>
<p><code>CMD [&quot;/bin/bash&quot;]</code>:指定动作是打开一个bash。</p>
<p>到此为止，一个可以用来安装DPDK的镜像就完成了。接下来就是打开它。</p>
<h3 id="在Docker中安装DPDK"><a href="#在Docker中安装DPDK" class="headerlink" title="在Docker中安装DPDK"></a>在Docker中安装DPDK</h3><p>在shell中运行：<br><code>docker run -it --privileged -v /sys/bus/pci/devices:/sys/bus/pci/devices -v /sys/kernel/mm/hugepages:/sys/kernel/mm/hugepages -v /sys/devices/system/node:/sys/devices/system/node -v /dev:/dev xxx</code>（最后的xxx表示的是之前的镜像的名字）<br>在运行这个之前，需要将宿主机的DPDK环境都配置好。比如hugepage，以及转载好DPDK驱动的端口。之后运行docker run，</p>
<blockquote>
<p><code>--privileged -v /sys/bus/pci/devices:/sys/bus/pci/devices -v /sys/kernel/mm/hugepages:/sys/kernel/mm/hugepages -v /sys/devices/system/node:/sys/devices/system/node</code>  这段话的意思就是给Docker容器权限来使用宿主机的端口，hugepage等。</p>
</blockquote>
<p>之后我们进入到Docker的容器中。<br>在容器的<code>root</code>目录下可以看到之前拷贝的<code>./build_dpdk.sh</code>。内容如下：<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/bin/bash</span></div><div class="line"><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">##</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#  build_dpdk.sh</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#             - Build DPDK and pktgen-dpdk for </span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#  Usage:     Adjust variables below before running, if necessary.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#  MAINTAINER:  jeder@redhat.com</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">##</span></div><div class="line"></div><div class="line"><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">##</span></div><div class="line"><span class="comment">#  Define Global Variables and Functions</span></div><div class="line"><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">##</span></div><div class="line"></div><div class="line">URL=http:<span class="regexp">//</span>fast.dpdk.org/rel/dpdk<span class="number">-16.04</span>.tar.xz</div><div class="line">BASEDIR=/root</div><div class="line">VERSION=<span class="number">16.04</span></div><div class="line">PACKAGE=dpdk</div><div class="line">DPDKROOT=$BASEDIR/$PACKAGE-$VERSION</div><div class="line">CONFIG=x86_64-native-linuxapp-gcc</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># Download/Build DPDK</span></div><div class="line">cd $BASEDIR</div><div class="line">wget $URL</div><div class="line">tar -xf $PACKAGE-$VERSION.tar.xz</div><div class="line">cd $DPDKROOT</div><div class="line"> sed -i <span class="string">'s/CONFIG_RTE_EAL_IGB_UIO=y/CONFIG_RTE_EAL_IGB_UIO=n/'</span> $&#123;DPDKROOT&#125;/config/common_linuxapp \</div><div class="line">  &amp;&amp; sed -i <span class="string">'s/CONFIG_RTE_LIBRTE_KNI=y/CONFIG_RTE_LIBRTE_KNI=n/'</span> $&#123;DPDKROOT&#125;/config/common_linuxapp \</div><div class="line">  &amp;&amp; sed -i <span class="string">'s/CONFIG_RTE_KNI_KMOD=y/CONFIG_RTE_KNI_KMOD=n/'</span> $&#123;DPDKROOT&#125;/config/common_linuxapp</div><div class="line"> </div><div class="line"><span class="comment"># don't build unnecessary stuff, can be reversed in dpdk_config.sh</span></div><div class="line">sed -i <span class="string">'s/CONFIG_RTE_APP_TEST=y/CONFIG_RTE_APP_TEST=n/'</span> $&#123;DPDKROOT&#125;/config/common_base \</div><div class="line">  &amp;&amp; sed -i <span class="string">'s/CONFIG_RTE_TEST_PMD=y/CONFIG_RTE_TEST_PMD=n/'</span> $&#123;DPDKROOT&#125;/config/common_base \</div><div class="line">  &amp;&amp; sed -i <span class="string">'s/CONFIG_RTE_EAL_IGB_UIO=y/CONFIG_RTE_EAL_IGB_UIO=n/'</span> $&#123;DPDKROOT&#125;/config/common_base \</div><div class="line">  &amp;&amp; sed -i <span class="string">'s/CONFIG_RTE_LIBRTE_IGB_PMD=y/CONFIG_RTE_LIBRTE_IGB_PMD=n/'</span> $&#123;DPDKROOT&#125;/config/common_base \</div><div class="line">  &amp;&amp; sed -i <span class="string">'s/CONFIG_RTE_LIBRTE_IXGBE_PMD=y/CONFIG_RTE_LIBRTE_IXGBE_PMD=n/'</span> $&#123;DPDKROOT&#125;/config/common_base \</div><div class="line">make config T=$CONFIG</div><div class="line">sed -ri <span class="string">'s,(PMD_PCAP=).*,\1y,'</span> build/.config</div><div class="line">make config T=$CONFIG install</div></pre></td></tr></table></figure></p>
<p>这个文档来自<a href="[Redhat的DPDK_docker](https://github.com/redhat-performance/docker-dpdk)">^3</a>。我依照<code>DPDK 16.04</code>中的文档和博客[^2]来改造的。在博客[^2]中提到：</p>
<blockquote>
<p>One thing that is important is to not rely on kernel headers; doing so would be seriously non portable.  The uio and igb_uio kernel modules have to be built and installed by the host that will run the DPDK container. Therefore, we configure the SDK to not compile kernel modules, and therefore not require installing kernel headers on the build system.    </p>
</blockquote>
<p>就是说在Docker中，用到的网卡驱动是宿主机的驱动，所以不需要编译网卡内核驱动。在<code>./build_dpdk.sh</code>中，的两行sed语句就是在修改编译配置。</p>
<p>手动运行完<code>./build_dpdk.sh</code>之后，就可以正常编译运行DPDK的程序了。<br>比如可以：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$:export RTE_SDK=/root/dpdk-16.04</div><div class="line">$:export RTE_TARGET=x86_64-native-linuxapp-gcc</div><div class="line">$:cd dpdk-16.04/example/helloworld</div><div class="line">$:make</div><div class="line">$:./build/helloworld</div></pre></td></tr></table></figure></p>
<p>就可以看到helloworld正常的运行了。</p>
<h3 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h3><p>这是修改完成之后的Docker的Dockerfile和两个sh文件。<a href="https://github.com/NachtZ/docker-dpdk" rel="external nofollow noopener noreferrer" target="_blank">NachtZ/docker-dpdk</a></p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ol>
<li>Jason的博客[^2]</li>
<li>Redhat的dpdk_docker<a href="[Redhat的DPDK_docker](https://github.com/redhat-performance/docker-dpdk)">^3</a></li>
</ol>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>[^2]:<a href="http://jason.digitalinertia.net/dockered-dpdk-packaging-open-vswitch/" rel="external nofollow noopener noreferrer" target="_blank">Jason 的博客</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">DPDK</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">Docker</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/dpdk_docker.html">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-leetcode_weekly_contest8" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/leetcode_weekly_contest8.html">LeetCode Weekly Contest 8 第八周周赛</a>
    </h1>
  

        
        <a href="/leetcode_weekly_contest8.html" class="archive-article-date">
  	<time datetime="2016-10-09T06:37:31.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-10-09</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>不知为何生成该博客会出现内存溢出问题。贴个其他地方的链接。<br><a href="http://blog.csdn.net/nachtz/article/details/52766639" rel="external nofollow noopener noreferrer" target="_blank">LeetCode Weekly Contest 8 第八周周赛</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Leetcode</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">Golang</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/leetcode_weekly_contest8.html">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-leetcode_weekly_contest6" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/leetcode_weekly_contest6.html">LeetCode Weekly Contest 6 第六周周赛</a>
    </h1>
  

        
        <a href="/leetcode_weekly_contest6.html" class="archive-article-date">
  	<time datetime="2016-09-25T06:08:49.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-09-25</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="404-Sum-of-Left-Leaves"><a href="#404-Sum-of-Left-Leaves" class="headerlink" title="404. Sum of Left Leaves"></a>404. Sum of Left Leaves</h2><p>不解释<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">isLeaf</span><span class="params">(root * TreeNode)</span> <span class="title">bool</span></span>&#123;</div><div class="line">	<span class="keyword">if</span> root == <span class="literal">nil</span> || root.Left!=<span class="literal">nil</span> || root.Right!=<span class="literal">nil</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sumOfLeftLeaves</span><span class="params">(root *TreeNode)</span> <span class="title">int</span></span> &#123;</div><div class="line">    res := <span class="number">0</span></div><div class="line">	<span class="keyword">if</span> root != <span class="literal">nil</span>&#123;</div><div class="line">		<span class="keyword">if</span> isLeaf(root.Left)&#123;</div><div class="line">			res += root.Left.Val</div><div class="line">		&#125;<span class="keyword">else</span>&#123;</div><div class="line">			res += sumOfLeftLeaves(root.Left)</div><div class="line">		&#125;</div><div class="line">		res += sumOfLeftLeaves(root.Right)</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> res</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="405-Convert-a-Number-to-Hexadecimal"><a href="#405-Convert-a-Number-to-Hexadecimal" class="headerlink" title="405. Convert a Number to Hexadecimal"></a>405. Convert a Number to Hexadecimal</h2><p>常规的10进制转16进制。<br>负数的转换需要先转为补码再计算。注意用long long int 防止溢出。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="function"><span class="built_in">string</span> <span class="title">toHex</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</div><div class="line">		<span class="built_in">string</span> a[] = &#123; <span class="string">"0"</span>, <span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>, <span class="string">"4"</span>, <span class="string">"5"</span>, <span class="string">"6"</span>, <span class="string">"7"</span>, <span class="string">"8"</span>, <span class="string">"9"</span>, <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>, <span class="string">"f"</span> &#125;;</div><div class="line">		<span class="built_in">string</span> res;</div><div class="line">		<span class="keyword">if</span> (num == <span class="number">0</span>)&#123;</div><div class="line">			<span class="keyword">return</span> <span class="string">"0"</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> t;</div><div class="line">		<span class="keyword">if</span> (num &lt;<span class="number">0</span>)&#123;</div><div class="line">			t = <span class="keyword">unsigned</span>(num);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span>&#123;</div><div class="line">			t = num;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">while</span> (t&gt;<span class="number">0</span>)&#123;</div><div class="line">			res = a[t % <span class="number">16</span>] + res;</div><div class="line">			t /= <span class="number">16</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> res;</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2 id="406-Queue-Reconstruction-by-Height"><a href="#406-Queue-Reconstruction-by-Height" class="headerlink" title="406. Queue Reconstruction by Height"></a>406. Queue Reconstruction by Height</h2><p>o(n*n)的复杂度。<br>1.将人排序，以前置比他高的人数大小排列，相等的时候按照高度从低到高。<br>2.取排列完第一位，将其取出队列。然后更新下排列中的人情况。即将比他矮的人中，front的人数-1。<br>3.重复操作1，2直到队列中的人都被取出。<br>4.还原队列中的front的情况。因为在第二步中，front的情况会被改写，所以需要恢复。<br><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">type P <span class="string">[]</span><span class="string">[]</span>int </div><div class="line">func(p P) Len()int&#123;</div><div class="line">	return len(p)</div><div class="line">&#125;</div><div class="line">func(p P)Swap(i,j int)&#123;</div><div class="line">	p<span class="string">[i]</span><span class="string">[0]</span>,p<span class="string">[i]</span><span class="string">[1]</span>,p<span class="string">[j]</span><span class="string">[0]</span>,p<span class="string">[j]</span><span class="string">[1]</span> = p<span class="string">[j]</span><span class="string">[0]</span>,p<span class="string">[j]</span><span class="string">[1]</span>,p<span class="string">[i]</span><span class="string">[0]</span>,p<span class="string">[i]</span><span class="string">[1]</span></div><div class="line">&#125;</div><div class="line">func (p P)Less(i,j int)bool&#123;</div><div class="line">	if p<span class="string">[i]</span><span class="string">[1]</span>!=p<span class="string">[j]</span><span class="string">[1]</span>&#123;</div><div class="line">		return p<span class="string">[i]</span><span class="string">[1]</span> &lt; p<span class="string">[j]</span><span class="string">[1]</span></div><div class="line">	&#125;</div><div class="line">	return p<span class="string">[i]</span><span class="string">[0]</span> &lt; p<span class="string">[j]</span><span class="string">[0]</span></div><div class="line">&#125;</div><div class="line">//<span class="number">1</span>.sort</div><div class="line">//<span class="number">2</span>.取当前队列</div><div class="line">func reconstructQueue(people <span class="string">[]</span><span class="string">[]</span>int) <span class="string">[]</span><span class="string">[]</span>int &#123;</div><div class="line">	res := make(<span class="string">[]</span><span class="string">[]</span>int,len(people))</div><div class="line">	for i:=<span class="number">0</span>;i&lt;len(res);i++&#123;</div><div class="line">		res<span class="string">[i]</span>  = make(<span class="string">[]</span>int,<span class="number">2</span>)</div><div class="line">	&#125;</div><div class="line">	n := len(people)</div><div class="line">	for  i:=<span class="number">0</span>;i&lt;n;i++&#123;</div><div class="line">		</div><div class="line">		sort.Sort(P(people))</div><div class="line">		res<span class="string">[i]</span><span class="string">[0]</span>,res<span class="string">[i]</span><span class="string">[1]</span> = people<span class="string">[0]</span><span class="string">[0]</span>,people<span class="string">[0]</span><span class="string">[1]</span></div><div class="line">		for j:=<span class="number">1</span>;j&lt;len(people);j++&#123;</div><div class="line">			if people<span class="string">[0]</span><span class="string">[0]</span> &gt;=people<span class="string">[j]</span><span class="string">[0]</span>&#123;</div><div class="line">				people<span class="string">[j]</span><span class="string">[1]</span> --;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		people = people<span class="string">[1:]</span></div><div class="line">	&#125;</div><div class="line">	for i :=<span class="number">1</span>;i&lt;len(res);i++ &#123;</div><div class="line">		count :=<span class="number">0</span></div><div class="line">		for j :=<span class="number">0</span>;j&lt;i;j++ &#123;</div><div class="line">			if res<span class="string">[i]</span><span class="string">[0]</span> &lt;= res<span class="string">[j]</span><span class="string">[0]</span>&#123;</div><div class="line">				count ++;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		res<span class="string">[i]</span><span class="string">[1]</span> = count</div><div class="line">	&#125;</div><div class="line">	return res;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="407-Trapping-Rain-Water-II"><a href="#407-Trapping-Rain-Water-II" class="headerlink" title="407. Trapping Rain Water II"></a>407. Trapping Rain Water II</h2><p>下面的做法超时了。正解网上找了一个。<a href="http://www.cnblogs.com/easonliu/p/4743644.html" rel="external nofollow noopener noreferrer" target="_blank">1</a><br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">dfs</span><span class="params">(heightMap [][]<span class="keyword">int</span>, x,y <span class="keyword">int</span>)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span> x &lt; <span class="number">0</span> || x &gt;= <span class="built_in">len</span>(heightMap) || y &lt;<span class="number">0</span> || y &gt;= <span class="built_in">len</span>(heightMap[<span class="number">0</span>])&#123;</div><div class="line">		<span class="keyword">return</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> heightMap[x][y] != <span class="number">0</span>&#123;</div><div class="line">		<span class="keyword">return</span></div><div class="line">	&#125;</div><div class="line">	heightMap[x][y] = <span class="number">65535</span></div><div class="line">	dfs(heightMap,x+<span class="number">1</span>,y)</div><div class="line">	dfs(heightMap,x<span class="number">-1</span>,y)</div><div class="line">	dfs(heightMap,x,y+<span class="number">1</span>)</div><div class="line">	dfs(heightMap,x,y<span class="number">-1</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">getArea</span><span class="params">(heightMap [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span>&#123;</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(heightMap[<span class="number">0</span>]);i++&#123;</div><div class="line">		dfs(heightMap,<span class="number">0</span>,i)</div><div class="line">		dfs(heightMap,<span class="built_in">len</span>(heightMap)<span class="number">-1</span>,i)</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(heightMap);i++&#123;</div><div class="line">		dfs(heightMap,i,<span class="number">0</span>)</div><div class="line">		dfs(heightMap,i,<span class="built_in">len</span>(heightMap[<span class="number">0</span>])<span class="number">-1</span>)</div><div class="line">	&#125;</div><div class="line">	count :=<span class="number">0</span></div><div class="line">	<span class="keyword">for</span> i :=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(heightMap);i++&#123;</div><div class="line">		<span class="keyword">for</span> j:=<span class="number">0</span>;j&lt;<span class="built_in">len</span>(heightMap[<span class="number">0</span>]);j++&#123;</div><div class="line">			<span class="keyword">if</span> heightMap[i][j] == <span class="number">0</span>&#123;</div><div class="line">				count ++</div><div class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span> heightMap[i][j] ==<span class="number">65535</span>&#123;</div><div class="line">				heightMap[i][j] = <span class="number">0</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> count</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line">func getMin(heightMap [][]int) int&#123;</div><div class="line">	min := 65535</div><div class="line">	m,n := len(heightMap),len(heightMap[0])</div><div class="line">	for i:=1;i&lt;m-1;i++&#123;</div><div class="line">		for j:=1;j&lt;n-1;j++&#123;</div><div class="line">			if heightMap[i][j] == 0&#123;</div><div class="line">				continue;</div><div class="line">			&#125;</div><div class="line">			if min &gt; heightMap[i][j]&#123;</div><div class="line">				min = heightMap[i][j]</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	return min</div><div class="line">&#125;*/</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">getMin2</span><span class="params">(heightMap [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span>&#123;</div><div class="line">	min := <span class="number">65535</span></div><div class="line">	m,n := <span class="built_in">len</span>(heightMap),<span class="built_in">len</span>(heightMap[<span class="number">0</span>])</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;m;i++&#123;</div><div class="line">		<span class="keyword">for</span> j:=<span class="number">0</span>;j&lt;n;j++&#123;</div><div class="line">			<span class="keyword">if</span> heightMap[i][j] == <span class="number">0</span>&#123;</div><div class="line">				<span class="keyword">continue</span>;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span> min &gt; heightMap[i][j]&#123;</div><div class="line">				min = heightMap[i][j]</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> min</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">trapRainWater</span><span class="params">(heightMap [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">    res ,tmp:= <span class="number">0</span>,<span class="number">1</span></div><div class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(heightMap) == <span class="number">0</span> || <span class="built_in">len</span>(heightMap[<span class="number">0</span>]) == <span class="number">0</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span></div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">for</span> <span class="literal">true</span>&#123;</div><div class="line">		m,n := <span class="built_in">len</span>(heightMap),<span class="built_in">len</span>(heightMap[<span class="number">0</span>])</div><div class="line">		min := getMin2(heightMap)</div><div class="line">		<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;m;i++&#123;</div><div class="line">			<span class="keyword">for</span> j:=<span class="number">0</span>;j&lt;n;j++&#123;</div><div class="line">				<span class="keyword">if</span> heightMap[i][j] &lt; min&#123;</div><div class="line">					heightMap[i][j] = <span class="number">0</span></div><div class="line">					<span class="keyword">continue</span>;</div><div class="line">				&#125;</div><div class="line">				heightMap[i][j] -= min</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		min = getMin2(heightMap)</div><div class="line">		<span class="keyword">if</span> min == <span class="number">65535</span>&#123;</div><div class="line">			<span class="keyword">break</span></div><div class="line">		&#125;</div><div class="line">		tmp  = min* getArea(heightMap)</div><div class="line">		res += tmp</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> res</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Leetcode</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">Golang</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/leetcode_weekly_contest6.html">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-leetcode_weekly_contest5" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/leetcode_weekly_contest5.html">LeetCode Weekly Contest 5 第五周周赛</a>
    </h1>
  

        
        <a href="/leetcode_weekly_contest5.html" class="archive-article-date">
  	<time datetime="2016-09-18T10:10:18.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-09-18</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="第一题-400-Nth-Digit"><a href="#第一题-400-Nth-Digit" class="headerlink" title="第一题: 400. Nth Digit"></a>第一题: 400. Nth Digit</h2><p>这道题用暴力的直接写出从1到n的所有数字组合而成的字符串会超时。<br>一种解法是：<br>先计算出第n个字符是属于哪个数字的。边计算边统计之前的字符个数total。<br>然后得到这个数字后，将这个数字转为字符串，并取n-total-1这个下标的字符，就是所求。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">findNthDigit</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	i := <span class="number">0</span></div><div class="line">	mark, l := <span class="number">1</span>, <span class="number">0</span></div><div class="line">	total := <span class="number">0</span></div><div class="line">	<span class="keyword">for</span> i = <span class="number">1</span>; total &lt; n; i++ &#123;</div><div class="line">		<span class="keyword">if</span> i &gt;= mark &#123;</div><div class="line">			total += l + <span class="number">1</span></div><div class="line">			l++</div><div class="line">			mark *= <span class="number">10</span></div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			total += l</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	i--</div><div class="line">	total -= l</div><div class="line">	t := strconv.Itoa(i)</div><div class="line">	<span class="keyword">return</span> <span class="keyword">int</span>(t[n-total<span class="number">-1</span>] - <span class="string">'0'</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="第二题：401-Binary-Watch"><a href="#第二题：401-Binary-Watch" class="headerlink" title="第二题：401. Binary Watch"></a>第二题：401. Binary Watch</h2><p>没过，应该是题目有问题。题目中说顺序无所谓但是实际上顺序貌似还是有关系的。<br>用二进制来进行计算。<br>先递归的计算出所有可能的num情况。然后将对应的num读为时间即可。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> b = []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span>, <span class="number">64</span>, <span class="number">128</span>, <span class="number">256</span>, <span class="number">512</span>&#125;</div><div class="line"><span class="keyword">var</span> ret []<span class="keyword">string</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">readTime</span><span class="params">(num <span class="keyword">int</span>)</span></span> &#123;</div><div class="line">	str := <span class="string">""</span></div><div class="line">	t := num &gt;&gt; <span class="number">6</span></div><div class="line">	<span class="keyword">if</span> t &gt;= <span class="number">12</span> &#123;</div><div class="line">		<span class="keyword">return</span></div><div class="line">	&#125;</div><div class="line">	str += strconv.Itoa(t) + <span class="string">":"</span></div><div class="line">	t = num &amp; <span class="number">63</span></div><div class="line">	<span class="keyword">if</span> t &gt;= <span class="number">60</span> &#123;</div><div class="line">		<span class="keyword">return</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> t &lt; <span class="number">10</span> &#123;</div><div class="line">		str += <span class="string">"0"</span> + strconv.Itoa(t)</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		str += strconv.Itoa(t)</div><div class="line">	&#125;</div><div class="line">	ret = <span class="built_in">append</span>(ret, str)</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">help</span><span class="params">(now, num, idx <span class="keyword">int</span>)</span></span> &#123;</div><div class="line">	<span class="keyword">if</span> num == <span class="number">0</span> &#123;</div><div class="line">		readTime(now)</div><div class="line">		<span class="keyword">return</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> idx &gt;= <span class="number">10</span> &#123;</div><div class="line">		<span class="keyword">return</span></div><div class="line">	&#125;</div><div class="line">	help(now, num, idx+<span class="number">1</span>)</div><div class="line">	help(now|b[idx], num<span class="number">-1</span>, idx+<span class="number">1</span>)</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">readBinaryWatch</span><span class="params">(num <span class="keyword">int</span>)</span> []<span class="title">string</span></span> &#123;</div><div class="line">	ret = []<span class="keyword">string</span>&#123;&#125;</div><div class="line">	<span class="keyword">if</span> num == <span class="number">0</span> &#123;</div><div class="line">		<span class="keyword">return</span> []<span class="keyword">string</span>&#123;<span class="string">"0:00"</span>&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(b); i++ &#123;</div><div class="line">		help(b[i], num<span class="number">-1</span>, i+<span class="number">1</span>)</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ret</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="第三题：402-Remove-K-Digits"><a href="#第三题：402-Remove-K-Digits" class="headerlink" title="第三题：402. Remove K Digits"></a>第三题：402. Remove K Digits</h2><p>在裁剪的过程中，如果要裁剪掉k个字符，那么在一个字符串中，前k+1一个字符中一定会有至少一个字符被保留下来。所以算法的目的就是递归的找到这个字符，并对这个字符之后的字符串继续进行裁剪，直到得到最后的结果。<br>另外，题目中要求不能有0，所以在得到结果之后还要去掉首部的0。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> res <span class="keyword">string</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">help</span><span class="params">(num <span class="keyword">string</span>, k <span class="keyword">int</span>)</span></span> &#123;</div><div class="line">    <span class="keyword">if</span> k &lt;= <span class="number">0</span>&#123;</div><div class="line">		res = res + num</div><div class="line">		<span class="keyword">return</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> k &gt;= <span class="built_in">len</span>(num)&#123;</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line">	&#125;</div><div class="line">	minIdx := <span class="number">0</span></div><div class="line">	<span class="keyword">for</span> i:=<span class="number">1</span>;i&lt;=k;i++&#123;</div><div class="line">		<span class="keyword">if</span> num[i] &lt; num[minIdx]&#123;</div><div class="line">			minIdx = i</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	res = res + <span class="keyword">string</span>(num[minIdx])</div><div class="line">	<span class="built_in">new</span> := num[minIdx+<span class="number">1</span>:]</div><div class="line">	help(<span class="built_in">new</span>,k - minIdx)</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeKdigits</span><span class="params">(num <span class="keyword">string</span>, k <span class="keyword">int</span>)</span> <span class="title">string</span></span> &#123;</div><div class="line">    res = <span class="string">""</span></div><div class="line">	help(num,k)</div><div class="line">	i:=<span class="number">0</span></div><div class="line">	<span class="keyword">for</span> i=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(res)&amp;&amp;res[i]==<span class="string">'0'</span>;i++&#123;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> i&lt;<span class="built_in">len</span>(res)&#123;</div><div class="line">		res = res[i:]</div><div class="line">	&#125;<span class="keyword">else</span>&#123;</div><div class="line">		res = <span class="string">"0"</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> res</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="第四题：403-Frog-Jump"><a href="#第四题：403-Frog-Jump" class="headerlink" title="第四题：403. Frog Jump"></a>第四题：403. Frog Jump</h2><p>很明显的递归的例子。<br>用一个映射来讲stones[下标]距离 改成 map[距离]下标.<br>然后从0开始起跳。距离为1。<br>每一次进行判断，首先是是不是最后一个石头了，是则返回true。程序over。<br>然后判断判断下目前所在的石头是哪一个。（检索map[stone[idx]+stp]即可知道，为0即不存在，返回false。）<br>接下来就是继续进行跳跃，分别尝试跳跃stp,stp+1,stp-1的距离即可。需要注意stp==0的时候是没有意义的，直接返回false.<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> m <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">help</span><span class="params">(stones []<span class="keyword">int</span>, idx <span class="keyword">int</span>, stp <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</div><div class="line">	<span class="keyword">if</span> stp == <span class="number">0</span> &#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> idx == <span class="built_in">len</span>(stones)<span class="number">-1</span> &#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">true</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> m[stones[idx]+stp] == <span class="number">0</span> &#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span></div><div class="line">	&#125;</div><div class="line">	idx = m[stones[idx]+stp]</div><div class="line">	<span class="keyword">return</span> help(stones, idx, stp<span class="number">-1</span>) || help(stones, idx, stp+<span class="number">1</span>) || help(stones, idx, stp)</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">canCross</span><span class="params">(stones []<span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</div><div class="line">	m = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>)</div><div class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(stones); i++ &#123;</div><div class="line">		m[stones[i]] = i</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> help(stones, <span class="number">0</span>, <span class="number">1</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Leetcode</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">Golang</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/leetcode_weekly_contest5.html">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-leetcode_weekly_contest4" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/leetcode_weekly_contest4.html">LeetCode Weekly Contest 4 第四周周赛</a>
    </h1>
  

        
        <a href="/leetcode_weekly_contest4.html" class="archive-article-date">
  	<time datetime="2016-09-12T04:10:18.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-09-12</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>用golang做了1，2，4题，第3题golang总是有问题换成c++来做。<br>代码地址：<a href="https://github.com/NachtZ/leetcode" rel="external nofollow noopener noreferrer" target="_blank">leetcode solution(golang)</a></p>
<p>###396. Rotate Function###<br>最暴力的方法莫过于一遍一遍计算。可以得到结果。<br>第二种方法就是利用了前一次的结果。<br>假设数组为<br><code>[a,b,c,d]</code><br>那么第一次计算的结果就是：<br><code>0*a + 1*b + 2*c + 3*d</code><br>第二次计算的结果是（从右往左旋转）：<br><code>1*a + 2*b + 3*c + 0*d</code><br>和之前的结果比：差值为：<br><code>1*a+1*a+1*a-3*d == 1*a+1*a+1*a+1*d - 3*d</code><br>所以基于前一次的结果f,可以得到下一次的结果的计算公式：<br><code>t :=f+sum - A[len(A)-i]*len(A)</code>  </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxRotateFunction</span><span class="params">(A []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">    sum,f:= <span class="number">0</span>,<span class="number">0</span></div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(A);i++&#123;</div><div class="line">		sum += A[i]</div><div class="line">		f += i*A[i]</div><div class="line">	&#125;</div><div class="line">	m := f</div><div class="line">	<span class="keyword">for</span> i:=<span class="number">1</span>;i&lt;<span class="built_in">len</span>(A);i++&#123;</div><div class="line">		t :=f+sum - A[<span class="built_in">len</span>(A)-i]*<span class="built_in">len</span>(A)</div><div class="line">		<span class="keyword">if</span> m &lt; t&#123;</div><div class="line">			m = t</div><div class="line">		&#125;</div><div class="line">		f += sum - A[<span class="built_in">len</span>(A)-i]*<span class="built_in">len</span>(A)</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> m</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###397. Integer Replacement###<br>很简单的递归计算题目。不过这么做复杂度比较高，能过也说明Leetcode的test case 有点简单了。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">integerReplacement</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">    <span class="keyword">if</span> n &lt;= <span class="number">1</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> n %<span class="number">2</span> == <span class="number">0</span>&#123;</div><div class="line">        <span class="keyword">return</span> integerReplacement(n/<span class="number">2</span>)+<span class="number">1</span></div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        t1,t2 := integerReplacement(n+<span class="number">1</span>),integerReplacement(n<span class="number">-1</span>)</div><div class="line">        <span class="keyword">if</span> t1 &lt;t2&#123;</div><div class="line">            <span class="keyword">return</span> t1 +<span class="number">1</span></div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">return</span> t2 +<span class="number">1</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>###398. Random Pick Index###<br>这道题的解法，第一种是创建一个hash表<code>map&lt;int,vector&lt;int&gt;&gt;</code>来保存对应的映射关系。在初始化的时候建表。时间复杂度和空间复杂度都是o(n).在检索的时候直接查表取随机值，时间复杂度为o(1).不过最后会出现MLE错误。原因是leetcode这道题考察的点不是hash表，于是将内存限制为o(1).<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//MLE代码</span></div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; m;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	Solution(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nums) &#123;</div><div class="line">		srand(time(<span class="number">0</span>));</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;nums.size(); i++)&#123;</div><div class="line">			<span class="keyword">if</span> (m.count(nums[i]) == <span class="number">0</span>)&#123;</div><div class="line">				<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; t;</div><div class="line">				t.push_back(i);</div><div class="line">				m[nums[i]] = t;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span>&#123;</div><div class="line">				m[nums[i]].push_back(i);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">pick</span><span class="params">(<span class="keyword">int</span> target)</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> r = rand() % m[target].size();</div><div class="line">		<span class="keyword">return</span> m[target][r];</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>这道题实际上考察的是蓄水池抽样，具体的可以看看<a href="http://www.cnblogs.com/HappyAngel/archive/2011/02/07/1949762.html" rel="external nofollow noopener noreferrer" target="_blank">这篇Blog</a>。<br>利用蓄水池抽样算法，就可以在不知道整个数组长度的情况下，就能保证各个元素获取的概率是相同的。<br>不过貌似不用蓄水池抽样的方法也能通过。<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line">	vector&lt;<span class="built_in">int</span>&gt; num;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	Solution(vector&lt;<span class="built_in">int</span>&gt; nums) &#123;</div><div class="line">		num = nums;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="built_in">int</span> pick(<span class="built_in">int</span> <span class="keyword">target</span>) &#123;</div><div class="line">		<span class="built_in">int</span> <span class="built_in">index</span> = -<span class="number">1</span>;</div><div class="line">		<span class="built_in">int</span> <span class="built_in">count</span> = <span class="number">0</span>;</div><div class="line">		for (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; num.<span class="built_in">size</span>(); i++)&#123;</div><div class="line">			<span class="keyword">if</span> (num[i] == <span class="keyword">target</span>)&#123;</div><div class="line">				<span class="built_in">count</span>++;</div><div class="line">				<span class="built_in">int</span> r = rand() % <span class="built_in">count</span> + <span class="number">1</span>;</div><div class="line">				<span class="keyword">if</span> (r == <span class="built_in">count</span>)&#123;</div><div class="line">					<span class="built_in">index</span> = i;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="built_in">index</span>;</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>顺带吐槽下leetcode的Golang. 这道题让我意识到Golang不适合在leetcode下刷题用。碰到大数据的题目几乎都会挂，比如109题和239题。还得发邮件给support才能在后台改成通过。这道题的golang解法提示WA。但是错误的test case在本地运行是可以通过的。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> Solution <span class="keyword">struct</span> &#123;</div><div class="line">    nums []<span class="keyword">int</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Constructor</span><span class="params">(nums []<span class="keyword">int</span>)</span> <span class="title">Solution</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> s Solution</div><div class="line">	s.nums = nums</div><div class="line">	<span class="keyword">return</span> s</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Solution)</span> <span class="title">Pick</span><span class="params">(target <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	idx,count := <span class="number">-1</span>,<span class="number">0</span></div><div class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(this.nums);i++&#123;</div><div class="line">		<span class="keyword">if</span> this.nums[i] == target&#123;</div><div class="line">			count ++ </div><div class="line">			r := rand.Intn(count) + <span class="number">1</span></div><div class="line">			<span class="keyword">if</span> r== count&#123;</div><div class="line">				idx = i</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> idx</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>###399. Evaluate Division###<br>这种解法最后也能过也是DIAO.<br>o(n*n)的复杂度。<br>遍历两遍。<br>第一遍遍历提供的数据，利用提供的数据计算出所有的两两可提供的结果。<br>比如提供给你 <code>a/b b/c</code>能得到<br><code>a/b b/a a/a /b/b a/c c/a</code>这几个结果。用map记录这些元素。<br>第二遍遍历第一遍所得到的map进行同样的操作，来二次推导得到的结果。<br>之后的检索操作就是查表操作。<br>没想到这样的方法也能过。<br><figure class="highlight inform7"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line">func calcEquation(equations <span class="comment">[]</span><span class="comment">[]</span>string, values <span class="comment">[]</span>float64, query <span class="comment">[]</span><span class="comment">[]</span>string) <span class="comment">[]</span>float64 &#123;</div><div class="line">    m := make(map<span class="comment">[<span class="comment">[2]</span>string]</span>float64)</div><div class="line">	//tm := make(map<span class="comment">[string]</span>float64)</div><div class="line">    for i:=0;i&lt;len(equations);i++&#123;</div><div class="line">		a,b :=equations<span class="comment">[i]</span><span class="comment">[0]</span>,equations<span class="comment">[i]</span><span class="comment">[1]</span></div><div class="line">		m<span class="comment">[<span class="comment">[2]</span>string&#123;a,b&#125;]</span> =values<span class="comment">[i]</span></div><div class="line">		m<span class="comment">[<span class="comment">[2]</span>string&#123;b,a&#125;]</span> = 1/values<span class="comment">[i]</span></div><div class="line">		m<span class="comment">[<span class="comment">[2]</span>string&#123;a,a&#125;]</span> =1.0</div><div class="line">		m<span class="comment">[<span class="comment">[2]</span>string&#123;b,b&#125;]</span> =1.0</div><div class="line">		for j :=i+1;j&lt;len(equations);j++&#123;</div><div class="line">			//in here to construct the map</div><div class="line">			c,d := equations<span class="comment">[j]</span><span class="comment">[0]</span>,equations<span class="comment">[j]</span><span class="comment">[1]</span></div><div class="line">			if a!=c &amp;&amp;a!=d &amp;&amp; b!=c &amp;&amp; b!=d&#123;</div><div class="line">				continue// can't get any new info</div><div class="line">			&#125;</div><div class="line">			if a == c &amp;&amp;b == d || a == d&amp;&amp; b == c&#123;</div><div class="line">				continue// can't get any new info</div><div class="line">			&#125;</div><div class="line">			if a == c&#123;</div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;d,b&#125;]</span> = values<span class="comment">[i]</span>/values<span class="comment">[j]</span></div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;b,d&#125;]</span> = values<span class="comment">[j]</span>/values<span class="comment">[i]</span></div><div class="line">			&#125;</div><div class="line">			if a == d&#123;</div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;c,b&#125;]</span> = values<span class="comment">[i]</span>*values<span class="comment">[j]</span></div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;b,c&#125;]</span> = 1/(values<span class="comment">[i]</span>*values<span class="comment">[j]</span>)</div><div class="line">			&#125;</div><div class="line">			if b == c&#123;</div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;a,d&#125;]</span> = values<span class="comment">[i]</span>*values<span class="comment">[j]</span></div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;d,a&#125;]</span> = 1/(values<span class="comment">[j]</span>*values<span class="comment">[i]</span>)				</div><div class="line">			&#125;</div><div class="line">			if b == d&#123;</div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;a,c&#125;]</span> = values<span class="comment">[i]</span>/values<span class="comment">[j]</span></div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;c,a&#125;]</span> = values<span class="comment">[j]</span>/values<span class="comment">[i]</span>						</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">    for	k,v := range m&#123;</div><div class="line">		a,b := k<span class="comment">[0]</span>,k<span class="comment">[1]</span></div><div class="line">		m<span class="comment">[<span class="comment">[2]</span>string&#123;a,b&#125;]</span> =v</div><div class="line">		m<span class="comment">[<span class="comment">[2]</span>string&#123;b,a&#125;]</span> = 1/v</div><div class="line">		m<span class="comment">[<span class="comment">[2]</span>string&#123;a,a&#125;]</span> =1.0</div><div class="line">		m<span class="comment">[<span class="comment">[2]</span>string&#123;b,b&#125;]</span> =1.0</div><div class="line">		for k1,v1 := range m&#123;</div><div class="line">			//in here to construct the map</div><div class="line">			c,d := k1<span class="comment">[0]</span>,k1<span class="comment">[1]</span></div><div class="line">			if a!=c &amp;&amp;a!=d &amp;&amp; b!=c &amp;&amp; b!=d&#123;</div><div class="line">				continue// can't get any new info</div><div class="line">			&#125;</div><div class="line">			if a == c &amp;&amp;b == d || a == d&amp;&amp; b == c&#123;</div><div class="line">				continue// can't get any new info</div><div class="line">			&#125;</div><div class="line">			if a == c&#123;</div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;d,b&#125;]</span> = v/v1</div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;b,d&#125;]</span> = v1/v</div><div class="line">			&#125;</div><div class="line">			if a == d&#123;</div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;c,b&#125;]</span> = v*v1</div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;b,c&#125;]</span> = 1/(v*v1)</div><div class="line">			&#125;</div><div class="line">			if b == c&#123;</div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;a,d&#125;]</span> = v*v1</div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;d,a&#125;]</span> = 1/(v*v1)				</div><div class="line">			&#125;</div><div class="line">			if b == d&#123;</div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;a,c&#125;]</span> = v/v1</div><div class="line">				m<span class="comment">[<span class="comment">[2]</span>string&#123;c,a&#125;]</span> = v1/v					</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	tmp := <span class="comment">[2]</span>string&#123;<span class="string">""</span>,<span class="string">""</span>&#125;</div><div class="line">	var ret <span class="comment">[]</span>float64</div><div class="line">	for i:=0;i&lt;len(query);i++&#123;</div><div class="line">		tmp<span class="comment">[0]</span>,tmp<span class="comment">[1]</span> = query<span class="comment">[i]</span><span class="comment">[0]</span>,query<span class="comment">[i]</span><span class="comment">[1]</span></div><div class="line">		v, ok := m<span class="comment">[tmp]</span></div><div class="line">		if ok&#123;</div><div class="line">			ret = append(ret,v)</div><div class="line">		&#125;else&#123;</div><div class="line">			ret = append(ret,-1.0)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	return ret</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Leetcode</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">Golang</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/leetcode_weekly_contest4.html">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-dpdk_daq" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/dpdk_daq.html">将DPDK移植到snort上的DAQ</a>
    </h1>
  

        
        <a href="/dpdk_daq.html" class="archive-article-date">
  	<time datetime="2016-08-06T10:16:34.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-08-06</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h2 id="DAQ-与Snort"><a href="#DAQ-与Snort" class="headerlink" title="DAQ 与Snort"></a>DAQ 与Snort</h2><p>在snort-daq中，daq的控制流程是这样的。<br><img src="http://img.blog.csdn.net/20160806194647769" alt="snort_daq"><br>如上所述，Snort在初始化的时候载入了daq。这个时候snort的所调用的api是<code>daq_load_modules</code>。也就是说，这个时候在主线程没有启动网卡，初始化实例的操作。<br>在初始化整个snort之后（载入配置，载入daq及其他各个模块等等）。snort就进入了分析的阶段了。这个阶段的主角是<br><code>pig</code>，或者说更本质的，是<code>pig</code>下的<code>analyzer</code>。<br>Snort下面开n个<code>pig</code>线程。<code>pig</code>线程下面调用<code>analyzer</code>来进行包解析。<br>包解析的过程中是在<code>pig</code>线程中多线程并行进行的。每一个<code>analyzer</code>下面都初始化一个<code>daq instance</code>并调用<code>acquire</code>进行抓包并分析。每一个<code>daq instance</code>下面都有一个或多个网卡来获取数据。因为目的主要是介绍daq，所以怎么解析就不提了。<br><img src="http://img.blog.csdn.net/20160806194734629" alt="pig_daq"><br>从上图和上面的介绍就可以看得出来，一个snort下面有多个<code>daq instance</code>并行运行。每一个<code>daq instance</code>都会进行初始化操作，占用系统资源，获取网卡，抓包，调用<code>callback</code>，之间相互独立。并且是<strong>单线程</strong>的。</p>
<hr>
<h2 id="DAQ与DPDK"><a href="#DAQ与DPDK" class="headerlink" title="DAQ与DPDK"></a>DAQ与DPDK</h2><p>如上面所介绍的。DAQ在设计的时候是单线程的。在本身的实现的几个模块中（Netmap,pcap等等）完全没有涉及到多线程的事情。在snort中的调用也是单线程并行调用的，相互之间各不影响。而Inter的DPDK在多线程方面则有限制。它所初始化的<code>EAL</code>层只能初始化一次。一个程序中只能运行一个dpdk主程序。所以就没有办法在snort中使用多线程。因为如果在snort中使用了多线程。那么实际上每个线程都会去尝试初始化dpdk的<code>EAL</code>。那么就会出错，导致最后只有一个线程能够成功初始化并启动。<br>所以如果要想实现一个支持snort多线程的daq。就需要修改daq中api的逻辑。<br>在实现中，利用线程id来绑定网卡。<br>在daq的content中加入了一个<code>nic</code>-<code>threadid</code>的映射表。然后每个网卡都有一个独立的<code>instance</code>存储原本在<code>daq_content</code>中的信息。然后在线程调用daq相关函数的时候，都会先利用threadid来进行检索这个<code>instance</code>进行操作。通过这个方法就能够将dpdk中的各个网卡独立运行。</p>
<hr>
<h2 id="Github地址"><a href="#Github地址" class="headerlink" title="Github地址"></a>Github地址</h2><p><a href="https://github.com/NachtZ/daq_dpdk" rel="external nofollow noopener noreferrer" target="_blank">daq_dpdk</a><br>基于的是<code>dpdk16.04</code>, <code>daq2.1.0</code>,<code>snort 3.0 a04</code>.<br>使用方法在项目主页中。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">DPDK</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">Snort</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/dpdk_daq.html">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-dpdk_ring" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/dpdk_ring.html">dpdk_ring剥离（单线程版）</a>
    </h1>
  

        
        <a href="/dpdk_ring.html" class="archive-article-date">
  	<time datetime="2016-06-17T10:19:59.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-06-17</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="DPDK-RING-剥离-sc"><a href="#DPDK-RING-剥离-sc" class="headerlink" title="DPDK_RING 剥离(sc)"></a>DPDK_RING 剥离(sc)</h1><p>dpdk中的ring结构的原理在<a href="http://dpdk.org/doc/guides/prog_guide/ring_lib.html" rel="external nofollow noopener noreferrer" target="_blank">官方的doc</a>中有。详细的介绍了单线程和多线程下的ring的结构的实现。其中线程安全的ring的出入队中没有用到锁，这个结构是比较巧妙的。<br>此外，和一般的ring设计相比，dpdk的ring中减少了比较的次数和减法的次数。考虑了很多性能方面的东西。<br>目前就剥离了单线程版的。<br>代码如下：</p>
<ul>
<li><strong>daq_ring.h</strong><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> DAQ_RING_H</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> DAQ_RING_H</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="comment">//#include &lt;pthread.h&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> _daq_ring&#123;</div><div class="line">  <span class="comment">//  pthread_mutex_t mutex;</span></div><div class="line">    <span class="keyword">int</span> size;</div><div class="line">    <span class="keyword">int</span> mask;</div><div class="line">    <span class="keyword">int</span> cons_head;</div><div class="line">    <span class="keyword">int</span> cons_tail;</div><div class="line">    <span class="keyword">int</span> prod_head;</div><div class="line">    <span class="keyword">int</span> prod_tail;</div><div class="line">    <span class="keyword">void</span> * ring[<span class="number">0</span>];</div><div class="line">&#125;;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> _daq_ring daq_ring;</div><div class="line"><span class="comment">//create a ring which can contain size's objects.</span></div><div class="line"><span class="function">daq_ring * <span class="title">daq_ring_create</span><span class="params">(<span class="keyword">int</span> num)</span></span>;</div><div class="line"><span class="comment">//fre a ring.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_free</span><span class="params">(daq_ring * r)</span></span>;</div><div class="line"><span class="comment">//see whether a ring is empty.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_isEmpty</span><span class="params">(daq_ring * r)</span></span>;</div><div class="line"><span class="comment">//see whether a ring is full.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_isFull</span><span class="params">(daq_ring * r)</span></span>;</div><div class="line"><span class="comment">//see the number of objects in ring now.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_count</span><span class="params">(daq_ring * r)</span></span>;</div><div class="line"><span class="comment">//see the size of a ring.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_getSize</span><span class="params">(daq_ring *r)</span></span>;</div><div class="line"><span class="comment">//see the number of objects can be inputed into the ring now.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_freeCount</span><span class="params">(daq_ring * r)</span></span>;</div><div class="line"><span class="comment">//enqueue objects into a ring.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_enqueue</span><span class="params">(daq_ring * r, <span class="keyword">void</span> * <span class="keyword">const</span> *obj_table, <span class="keyword">int</span> num,<span class="keyword">int</span> mc)</span></span>;</div><div class="line"><span class="comment">//dequeue objects from a ring.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_dequeue</span><span class="params">(daq_ring * r, <span class="keyword">void</span> **obj_table, <span class="keyword">int</span> num,<span class="keyword">int</span> mc)</span></span>;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line"><span class="comment">//end of daq_ring.h</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>-<strong>daq_ring.c</strong><br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"daq_ring.h"</span></span></div><div class="line"></div><div class="line"><span class="comment">/*typedef struct _daq_ring&#123;</span></div><div class="line">    pthread_mutex_t mutex;</div><div class="line">    unsigned int size;</div><div class="line">    void * head;</div><div class="line">    void * tail;</div><div class="line">    void * memhead;</div><div class="line">&#125;daq_ring;*/</div><div class="line"></div><div class="line"><span class="function">daq_ring * <span class="title">daq_ring_create</span><span class="params">(<span class="keyword">int</span> num)</span></span>&#123;</div><div class="line">    daq_ring * r = <span class="literal">NULL</span>;</div><div class="line">    <span class="keyword">if</span>(num &lt;=<span class="number">0</span>)<span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">    r = (daq_ring *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(daq_ring) + num*<span class="keyword">sizeof</span>(<span class="keyword">void</span>*));</div><div class="line">    <span class="keyword">if</span>(r == <span class="literal">NULL</span>)&#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">    &#125;</div><div class="line">    r-&gt;size = num;</div><div class="line">    r-&gt;mask = num<span class="number">-1</span>;</div><div class="line">    r-&gt;prod_head = r-&gt;prod_tail = r-&gt;cons_head = r-&gt;cons_tail = <span class="number">0</span>;</div><div class="line">   <span class="comment">// pthread_mutex_init(&amp;r-&gt;mutex,NULL);</span></div><div class="line">    <span class="keyword">return</span> r;</div><div class="line">&#125;</div><div class="line"><span class="comment">//fre a ring.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_free</span><span class="params">(daq_ring * r)</span></span>&#123;</div><div class="line">    <span class="built_in">free</span>(r);</div><div class="line">&#125;</div><div class="line"><span class="comment">//see whether a ring is empty.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_isEmpty</span><span class="params">(daq_ring * r)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> r-&gt;cons_tail == r-&gt;prod_tail;</div><div class="line">&#125;</div><div class="line"><span class="comment">//see whether a ring is full.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_isFull</span><span class="params">(daq_ring * r)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> (((r-&gt;cons_tail - r-&gt;prod_tail <span class="number">-1</span>)&amp;r-&gt;mask)==<span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">//see the number of objects in ring now.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_count</span><span class="params">(daq_ring * r)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> ((r-&gt;prod_tail - r-&gt;cons_tail)&amp;r-&gt;mask);</div><div class="line">&#125;</div><div class="line"><span class="comment">//see the size of a ring.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_getSize</span><span class="params">(daq_ring *r)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> r-&gt;size;</div><div class="line">&#125;</div><div class="line"><span class="comment">//see the number of objects can be inputed into the ring now.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_freeCount</span><span class="params">(daq_ring * r)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> ((r-&gt;cons_tail - r-&gt;prod_tail - <span class="number">1</span>) &amp; r-&gt;mask);</div><div class="line">&#125;</div><div class="line"><span class="comment">//enqueue objects into a ring.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_enqueue</span><span class="params">(daq_ring * r, <span class="keyword">void</span> * <span class="keyword">const</span> *obj_table, <span class="keyword">int</span> num,<span class="keyword">int</span> mc)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> prod_head = r-&gt;prod_head;</div><div class="line">    <span class="keyword">int</span> cons_tail = r-&gt;cons_tail;</div><div class="line">    <span class="keyword">int</span> prod_next = prod_head +<span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> mask = r-&gt;mask;</div><div class="line">    <span class="keyword">int</span> i ;</div><div class="line">    <span class="keyword">int</span> <span class="built_in">free</span> = mask + cons_tail -prod_head;</div><div class="line">    <span class="keyword">if</span>(num &gt;<span class="built_in">free</span>)&#123;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">free</span> == <span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        num = <span class="built_in">free</span>;</div><div class="line">    &#125;</div><div class="line">    prod_next = prod_head +num;</div><div class="line">    r-&gt;prod_head = prod_next;</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">const</span> <span class="keyword">int</span> size = r-&gt;size;</div><div class="line">        <span class="keyword">int</span> idx = prod_head &amp; mask;</div><div class="line">        <span class="keyword">if</span>(idx + num &lt; size)&#123;</div><div class="line">            <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; (num &amp; ((~(<span class="keyword">unsigned</span>)<span class="number">0x3</span>))); i+=<span class="number">4</span>, idx+=<span class="number">4</span>) &#123; </div><div class="line">                r-&gt;ring[idx] = obj_table[i]; </div><div class="line">                r-&gt;ring[idx+<span class="number">1</span>] = obj_table[i+<span class="number">1</span>]; </div><div class="line">                r-&gt;ring[idx+<span class="number">2</span>] = obj_table[i+<span class="number">2</span>]; </div><div class="line">                r-&gt;ring[idx+<span class="number">3</span>] = obj_table[i+<span class="number">3</span>]; </div><div class="line">            &#125;</div><div class="line">            <span class="keyword">switch</span> (num &amp; <span class="number">0x3</span>) &#123; </div><div class="line">            <span class="keyword">case</span> <span class="number">3</span>: r-&gt;ring[idx++] = obj_table[i++]; </div><div class="line">            <span class="keyword">case</span> <span class="number">2</span>: r-&gt;ring[idx++] = obj_table[i++]; </div><div class="line">            <span class="keyword">case</span> <span class="number">1</span>: r-&gt;ring[idx++] = obj_table[i++]; </div><div class="line">            &#125; </div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">for</span> (i =<span class="number">0</span>;idx&lt;size;++i,++idx)</div><div class="line">                r-&gt;ring[idx] = obj_table[i];</div><div class="line">            <span class="keyword">for</span>(idx = <span class="number">0</span>;i&lt;num;++i,++idx)</div><div class="line">                r-&gt;ring[idx] = obj_table[i];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    r-&gt;prod_tail = prod_next;</div><div class="line">    <span class="keyword">return</span> num;</div><div class="line">&#125;</div><div class="line"><span class="comment">//dequeue objects from a ring.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">daq_ring_dequeue</span><span class="params">(daq_ring * r, <span class="keyword">void</span> **obj_table, <span class="keyword">int</span> num,<span class="keyword">int</span> mc)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> cons_head,prod_tail;</div><div class="line">    <span class="keyword">int</span> cons_next,entries;</div><div class="line">    <span class="keyword">int</span> i;</div><div class="line">    <span class="keyword">int</span> mask = r-&gt;mask;</div><div class="line">    cons_head = r-&gt;cons_head;</div><div class="line">    prod_tail = r-&gt;prod_tail;</div><div class="line">    entries = prod_tail - cons_head;</div><div class="line">    <span class="keyword">if</span>(num &gt; entries)&#123;</div><div class="line">        <span class="keyword">if</span>(entries == <span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        num = entries;</div><div class="line">    &#125;</div><div class="line">    cons_next = cons_head + num;</div><div class="line">    r -&gt; cons_head = cons_next;</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">int</span> idx = cons_head &amp; mask;</div><div class="line">        <span class="keyword">int</span> size = r-&gt; size; </div><div class="line">    <span class="keyword">if</span> (idx + num &lt; size) &#123; </div><div class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; (num &amp; (~(<span class="keyword">unsigned</span>)<span class="number">0x3</span>)); i+=<span class="number">4</span>, idx+=<span class="number">4</span>) &#123;</div><div class="line">            obj_table[i] = r-&gt;ring[idx]; </div><div class="line">            obj_table[i+<span class="number">1</span>] = r-&gt;ring[idx+<span class="number">1</span>]; </div><div class="line">            obj_table[i+<span class="number">2</span>] = r-&gt;ring[idx+<span class="number">2</span>]; </div><div class="line">            obj_table[i+<span class="number">3</span>] = r-&gt;ring[idx+<span class="number">3</span>]; </div><div class="line">        &#125; </div><div class="line">        <span class="keyword">switch</span> (num &amp; <span class="number">0x3</span>) &#123; </div><div class="line">            <span class="keyword">case</span> <span class="number">3</span>: obj_table[i++] = r-&gt;ring[idx++]; </div><div class="line">            <span class="keyword">case</span> <span class="number">2</span>: obj_table[i++] = r-&gt;ring[idx++]; </div><div class="line">            <span class="keyword">case</span> <span class="number">1</span>: obj_table[i++] = r-&gt;ring[idx++]; </div><div class="line">        &#125; </div><div class="line">    &#125; <span class="keyword">else</span> &#123; </div><div class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; idx &lt; size; i++, idx++) </div><div class="line">            obj_table[i] = r-&gt;ring[idx]; </div><div class="line">        <span class="keyword">for</span> (idx = <span class="number">0</span>; i &lt; num; i++, idx++) </div><div class="line">            obj_table[i] = r-&gt;ring[idx]; </div><div class="line">    &#125; </div><div class="line">    &#125;</div><div class="line">    r-&gt;cons_tail = cons_next;</div><div class="line">    <span class="keyword">return</span> num;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">daq_ring_stat</span><span class="params">(daq_ring * r)</span></span>&#123;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"***********************************************\n"</span>);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"Daq_ring's size is %d\n"</span>,daq_ring_getSize(r));</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"Daq_ring's objects now is %d.\n"</span>,daq_ring_count(r));</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"Daq_ring's free space is %d\n"</span>,daq_ring_freeCount(r));</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"Daq_ring is %s now.\n"</span>,daq_ring_isEmpty(r)?<span class="string">"empty"</span>:<span class="string">"not empty"</span>);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"Daq_ring is %s now.\n"</span>,daq_ring_isFull(r)?<span class="string">"full"</span>:<span class="string">"not full"</span>);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"***********************************************\n"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_ptr</span><span class="params">(daq_ring *r)</span></span>&#123;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"r-&gt;cons:%p %p\n"</span>, r-&gt;cons_head, r-&gt;cons_tail);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"r-&gt;prod:%p %p\n"</span>,r-&gt;prod_head,r-&gt;prod_tail);</div><div class="line"></div><div class="line">    <span class="built_in">printf</span>(<span class="string">"r-&gt;ring[0]:%p\n"</span>,&amp;r-&gt;ring[<span class="number">0</span>]);</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">char</span> * str[] = &#123;</div><div class="line">        <span class="string">"t1"</span>,<span class="string">"t2"</span>,<span class="string">"t3"</span>,<span class="string">"t4"</span>,<span class="string">"t5"</span>,<span class="string">"t6"</span>,<span class="string">"t7"</span>,<span class="string">"t8"</span>,<span class="string">"t9"</span>,<span class="string">"t10"</span>,<span class="string">"t11"</span>,<span class="string">"t12"</span>,<span class="string">"t13"</span></div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">void</span> * ctx[<span class="number">12</span>];</div><div class="line">    <span class="keyword">int</span> i;</div><div class="line">    <span class="keyword">for</span>(i =<span class="number">0</span>;i&lt;<span class="number">10</span>;++i)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>,str[i]);</div><div class="line">    daq_ring * r = daq_ring_create(<span class="number">9</span>);</div><div class="line">    daq_ring_stat(r);</div><div class="line">    print_ptr(r);</div><div class="line">    daq_ring_enqueue(r,str,<span class="number">8</span>,<span class="number">1</span>);</div><div class="line">    daq_ring_stat(r);</div><div class="line">    print_ptr(r);</div><div class="line">    daq_ring_dequeue(r,ctx,<span class="number">8</span>,<span class="number">1</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;<span class="number">8</span>;++i)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>,(<span class="keyword">char</span> *)ctx[i]);</div><div class="line">    daq_ring_stat(r);</div><div class="line"></div><div class="line">print_ptr(r);</div><div class="line">    daq_ring_enqueue(r,str,<span class="number">8</span>,<span class="number">1</span>);</div><div class="line">    daq_ring_stat(r);</div><div class="line">    print_ptr(r);</div><div class="line">    daq_ring_dequeue(r,ctx,<span class="number">8</span>,<span class="number">1</span>);</div><div class="line">    <span class="keyword">for</span>(i =<span class="number">0</span>;i&lt;<span class="number">10</span>;++i)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>,(<span class="keyword">char</span> *)ctx[i]);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> i;</div><div class="line">    <span class="keyword">char</span> * str[] = &#123;</div><div class="line">		<span class="string">"t1"</span>, <span class="string">"t2"</span>, <span class="string">"t3"</span>, <span class="string">"t4"</span>, <span class="string">"t5"</span>, <span class="string">"t6"</span>, <span class="string">"t7"</span>, <span class="string">"t8"</span>, <span class="string">"t9"</span>, <span class="string">"t10"</span>, <span class="string">"t11"</span>, <span class="string">"t12"</span>, <span class="string">"t13"</span>, <span class="string">"t14"</span>, <span class="string">"t15"</span>, <span class="string">"t16"</span>, <span class="string">"t17"</span></div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">void</span> * ctx[<span class="number">18</span>];</div><div class="line">    daq_ring * r = daq_ring_create(<span class="number">16</span>);</div><div class="line">    daq_ring_enqueue(r,str,<span class="number">14</span>,<span class="number">1</span>);</div><div class="line">    daq_ring_stat(r);</div><div class="line">    print_ptr(r);</div><div class="line">    daq_ring_dequeue(r,ctx,<span class="number">4</span>,<span class="number">1</span>);</div><div class="line">    <span class="keyword">for</span>(i =<span class="number">0</span>;i&lt;<span class="number">4</span>;++i)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>,(<span class="keyword">char</span> *)ctx[i]);</div><div class="line">    daq_ring_stat(r);</div><div class="line">    print_ptr(r);</div><div class="line">    daq_ring_enqueue(r,&amp;str[<span class="number">5</span>],<span class="number">5</span>,<span class="number">1</span>);</div><div class="line">    daq_ring_stat(r);</div><div class="line">    print_ptr(r);</div><div class="line">    daq_ring_dequeue(r,ctx,<span class="number">15</span>,<span class="number">1</span>);</div><div class="line">    <span class="keyword">for</span>(i =<span class="number">0</span>;i&lt;<span class="number">15</span>;++i)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>,(<span class="keyword">char</span> *)ctx[i]);</div><div class="line">    daq_ring_stat(r);</div><div class="line">    print_ptr(r);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    test2();</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">DPDK</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/dpdk_ring.html">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-dpdk_note" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/dpdk_note.html">DPDK杂记</a>
    </h1>
  

        
        <a href="/dpdk_note.html" class="archive-article-date">
  	<time datetime="2016-06-17T10:19:02.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-06-17</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="DPDK编译动态库"><a href="#DPDK编译动态库" class="headerlink" title="DPDK编译动态库"></a>DPDK编译动态库</h3><p>将common_linuxapp中的CONFIG_RTE_BUILD_SHARED_LIB和<em>CONFIG_RTE_BUILD_COMBINE_LIBS</em>都改为y，重新编译。将生成的lib文件拷贝到linux的lib中。<br>（在dpdk16.04中，combine这个选项被取消了。邮件组中提到说是默认就是combine了。但是实际编译中发现不同的网卡驱动还是没有编译在一起。拷贝的时候都需要拷贝过去。）<br>之后就是修改Makefile.<br>将makefile中的<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">include</span> <span class="variable">$(</span>RTE_SDK)/mk/rteextapp.mk</div></pre></td></tr></table></figure></p>
<p>改为<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">include $(RTE_SDK)/mk/rte<span class="selector-class">.extshared</span><span class="selector-class">.mk</span></div></pre></td></tr></table></figure></p>
<p>把binary name中的app改为<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">SHARED</span> = yourname.so</div></pre></td></tr></table></figure></p>
<p>最后再加上库：<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LDLIBS += -L/home/nachtz/dpdk-<span class="number">2.2</span>.<span class="number">0</span>/x86_64-native-linuxapp-gcc/<span class="class"><span class="keyword">lib</span> -<span class="title">ldpdk</span> -<span class="title">lrt</span> -<span class="title">lm</span> -<span class="title">lgcc_s</span> -<span class="title">ldl</span></span></div></pre></td></tr></table></figure></p>
<p>就行了。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">DPDK</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/dpdk_note.html">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 NachtZ
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank" rel="external nofollow noopener noreferrer">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="./",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var e=/\/|index.html/g;return t.replace(e,"")===n.replace(e,"")}function i(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,e=0,r=t.length;e<r;e++){var i=t[e];o(n,i.getAttribute("href"))&&(0,d.default)(i,"active")}}function u(t){for(var n=t.offsetLeft,e=t.offsetParent;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n}function f(t){for(var n=t.offsetTop,e=t.offsetParent;null!==e;)n+=e.offsetTop,e=e.offsetParent;return n}function c(t,n,e,r,o){var i=u(t),c=f(t)-n;if(c-e<=o){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,h.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(e||c)+"px",a.style.left=i+"px",a.style.zIndex=r||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");c(t,document.body.scrollTop,-63,2,0),c(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}function l(){x.default.versions.mobile&&window.screen.width<800&&(i(),s())}var p=e(71),d=r(p),v=e(72),y=(r(v),e(84)),h=r(y),b=e(69),x=r(b),g=e(75),m=r(g),w=e(70);l(),(0,w.addLoadEvent)(function(){m.default.init()}),t.exports={}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(49),o=e(15);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=!e(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(6),o=e(12);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(10),o=e(30),i=e(24),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(22)("wks"),o=e(13),i=e(1).Symbol,u="function"==typeof i,f=t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))};f.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(35),o=e(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(6).f,o=e(2),i=e(7)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){var r=e(22)("keys"),o=e(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){var r=e(1),o=e(14),i=e(18),u=e(26),f=e(6).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||f(n,t,{value:u.f(t)})}},function(t,n,e){n.f=e(7)},function(t,n,e){var r=e(1),o=e(14),i=e(46),u=e(5),f="prototype",c=function(t,n,e){var a,s,l,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,h=t&c.B,b=t&c.W,x=d?o:o[n]||(o[n]={}),g=x[f],m=d?r:v?r[n]:(r[n]||{})[f];d&&(e=n);for(a in e)s=!p&&m&&void 0!==m[a],s&&a in x||(l=s?m[a]:e[a],x[a]=d&&"function"!=typeof m[a]?e[a]:h&&s?i(l,r):b&&m[a]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[f]=t[f],n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((x.virtual||(x.virtual={}))[a]=l,t&c.R&&g&&!g[a]&&u(g,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(11),o=e(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){t.exports=!e(4)&&!e(8)(function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){"use strict";var r=e(18),o=e(27),i=e(36),u=e(5),f=e(2),c=e(17),a=e(51),s=e(20),l=e(58),p=e(7)("iterator"),d=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",h="values",b=function(){return this};t.exports=function(t,n,e,x,g,m,w){a(e,n,x);var O,S,_,j=function(t){if(!d&&t in A)return A[t];switch(t){case y:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",E=g==h,M=!1,A=t.prototype,T=A[p]||A[v]||g&&A[g],L=T||j(g),N=g?E?j("entries"):L:void 0,C="Array"==n?A.entries||T:T;if(C&&(_=l(C.call(new t)),_!==Object.prototype&&(s(_,P,!0),r||f(_,p)||u(_,p,b))),E&&T&&T.name!==h&&(M=!0,L=function(){return T.call(this)}),r&&!w||!d&&!M&&A[p]||u(A,p,L),c[n]=L,c[P]=b,g)if(O={values:E?L:j(h),keys:m?L:j(y),entries:N},w)for(S in O)S in A||i(A,S,O[S]);else o(o.P+o.F*(d||M),n,O);return O}},function(t,n,e){var r=e(10),o=e(55),i=e(16),u=e(21)("IE_PROTO"),f=function(){},c="prototype",a=function(){var t,n=e(29)("iframe"),r=i.length,o="<",u=">";for(n.style.display="none",e(48).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+u+"document.F=Object"+o+"/script"+u),t.close(),a=t.F;r--;)delete a[c][i[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f[c]=r(t),e=new f,f[c]=null,e[u]=t):e=a(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35),o=e(16).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(2),o=e(3),i=e(45)(!1),u=e(21)("IE_PROTO");t.exports=function(t,n){var e,f=o(t),c=0,a=[];for(e in f)e!=u&&r(f,e)&&a.push(e);for(;n.length>c;)r(f,e=n[c++])&&(~i(a,e)||a.push(e));return a}},function(t,n,e){t.exports=e(5)},function(t,n,e){var r=e(15);t.exports=function(t){return Object(r(t))}},function(t,n,e){t.exports={default:e(41),__esModule:!0}},function(t,n,e){t.exports={default:e(42),__esModule:!0}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=e(39),i=r(o),u=e(38),f=r(u),c="function"==typeof f.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":typeof t};n.default="function"==typeof f.default&&"symbol"===c(i.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,n,e){e(65),e(63),e(66),e(67),t.exports=e(14).Symbol},function(t,n,e){e(64),e(68),t.exports=e(26).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,e){var r=e(3),o=e(61),i=e(60);t.exports=function(t){return function(n,e,u){var f,c=r(n),a=o(c.length),s=i(u,a);if(t&&e!=e){for(;a>s;)if(f=c[s++],f!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(43);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(9),o=e(34),i=e(19);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,f=e(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&n.push(u);return n}},function(t,n,e){t.exports=e(1).document&&document.documentElement},function(t,n,e){var r=e(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){"use strict";var r=e(32),o=e(12),i=e(20),u={};e(5)(u,e(7)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){var r=e(9),o=e(3);t.exports=function(t,n){for(var e,i=o(t),u=r(i),f=u.length,c=0;f>c;)if(i[e=u[c++]]===n)return e}},function(t,n,e){var r=e(13)("meta"),o=e(11),i=e(2),u=e(6).f,f=0,c=Object.isExtensible||function(){return!0},a=!e(8)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:"O"+ ++f,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},p=function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},d=function(t){return a&&v.NEED&&c(t)&&!i(t,r)&&s(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,n,e){var r=e(6),o=e(10),i=e(9);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),f=u.length,c=0;f>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(19),o=e(12),i=e(3),u=e(24),f=e(2),c=e(30),a=Object.getOwnPropertyDescriptor;n.f=e(4)?a:function(t,n){if(t=i(t),n=u(n,!0),c)try{return a(t,n)}catch(t){}if(f(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),o=e(33).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?f(t):o(r(t))}},function(t,n,e){var r=e(2),o=e(37),i=e(21)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){var r=e(23),o=e(15);t.exports=function(t){return function(n,e){var i,u,f=String(o(n)),c=r(e),a=f.length;return c<0||c>=a?t?"":void 0:(i=f.charCodeAt(c),i<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return t=r(t),t<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(44),o=e(52),i=e(17),u=e(3);t.exports=e(31)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,e):"values"==n?o(0,t[e]):o(0,[e,t[e]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){},function(t,n,e){"use strict";var r=e(59)(!0);e(31)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,e){"use strict";var r=e(1),o=e(2),i=e(4),u=e(27),f=e(36),c=e(54).KEY,a=e(8),s=e(22),l=e(20),p=e(13),d=e(7),v=e(26),y=e(25),h=e(53),b=e(47),x=e(50),g=e(10),m=e(3),w=e(24),O=e(12),S=e(32),_=e(57),j=e(56),P=e(6),E=e(9),M=j.f,A=P.f,T=_.f,L=r.Symbol,N=r.JSON,C=N&&N.stringify,k="prototype",F=d("_hidden"),q=d("toPrimitive"),I={}.propertyIsEnumerable,B=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),H=Object[k],K="function"==typeof L,R=r.QObject,J=!R||!R[k]||!R[k].findChild,U=i&&a(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=M(H,n);r&&delete H[n],A(t,n,e),r&&t!==H&&A(H,n,r)}:A,G=function(t){var n=D[t]=S(L[k]);return n._k=t,n},$=K&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},z=function(t,n,e){return t===H&&z(W,n,e),g(t),n=w(n,!0),g(e),o(D,n)?(e.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),e=S(e,{enumerable:O(0,!1)})):(o(t,F)||A(t,F,O(1,{})),t[F][n]=!0),U(t,n,e)):A(t,n,e)},Y=function(t,n){g(t);for(var e,r=b(n=m(n)),o=0,i=r.length;i>o;)z(t,e=r[o++],n[e]);return t},Q=function(t,n){return void 0===n?S(t):Y(S(t),n)},X=function(t){var n=I.call(this,t=w(t,!0));return!(this===H&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,F)&&this[F][t])||n)},V=function(t,n){if(t=m(t),n=w(n,!0),t!==H||!o(D,n)||o(W,n)){var e=M(t,n);return!e||!o(D,n)||o(t,F)&&t[F][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=T(m(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==F||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===H,r=T(e?W:m(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(H,n)||i.push(D[n]);return i};K||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===H&&n.call(W,e),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),U(this,t,O(1,e))};return i&&J&&U(H,t,{configurable:!0,set:n}),G(t)},f(L[k],"toString",function(){return this._k}),j.f=V,P.f=z,e(33).f=_.f=Z,e(19).f=X,e(34).f=tt,i&&!e(18)&&f(H,"propertyIsEnumerable",X,!0),v.f=function(t){return G(d(t))}),u(u.G+u.W+u.F*!K,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)d(nt[et++]);for(var nt=E(d.store),et=0;nt.length>et;)y(nt[et++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if($(t))return h(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),u(u.S+u.F*!K,"Object",{create:Q,defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&u(u.S+u.F*(!K||a(function(){var t=L();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return n=r[1],"function"==typeof n&&(e=n),!e&&x(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!$(n))return n}),r[1]=n,C.apply(N,r)}}}),L[k][q]||e(5)(L[k],q,L[k].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){e(25)("asyncIterator")},function(t,n,e){e(25)("observable")},function(t,n,e){e(62);for(var r=e(1),o=e(5),i=e(17),u=e(7)("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,n){"use strict";var e={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,weixin:t.indexOf("MicroMessenger")==-1}}()};t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=e(40),i=r(o),u=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):o[t]||t}function n(t){return l[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,r=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},f=/\u00a0/g,c=/<br\s*\/?>/gi,a=/\r?\n/g,s=/\s/g,l={};for(var p in o)l[o[p]]=p;return o["&apos;"]="'",l["'"]="&#39;",{encode:function(t){return t?(""+t).replace(r,n).replace(a,"<br/>").replace(s,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(c,"\n").replace(e,t).replace(f," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e+=2)n.push(String.fromCharCode("0x"+t.slice(e,e+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,e=t.length;e>n;n++)t[n]=u.encodeObject(t[n]);else if("object"==("undefined"==typeof t?"undefined":(0,i.default)(t)))for(var r in t)t[r]=u.encodeObject(t[r]);else if("string"==typeof t)return u.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=u},function(t,n){function e(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=e},function(t,n){function e(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(e," ")}}t.exports=e},,,function(t,n){"use strict";function e(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){var n=document.querySelectorAll(".article-entry a:not(.article-more-a)");n.forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")})}var e=document.querySelector("#js-aboutme");e&&0!==e.length&&(e.innerHTML=e.innerText)}t.exports={init:e}},,,,,,,,,function(t,n){function e(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var e=t.nextSibling;return e?t.parentNode.insertBefore(n,e):t.parentNode.appendChild(n)}t.exports=e}])</script><script src="/./main.f6a68c.js"></script><script>!function(){var e=function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)};e("/slider.885efe.js")}()</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">SDN</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Linux</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Shell</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Leetcode</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Golang</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Algorithm</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">DPDK</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Snort</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Docker</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">网络</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Resume</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">面经</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br>1、请确保node版本大于6.2<br>2、在博客根目录（注意不是yilia根目录）执行以下命令：<br> npm i hexo-generator-json-content --save<br><br>
            3、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title" rel="external nofollow noopener noreferrer"><i class="icon-quo-left icon"></i>友情链接1</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title" rel="external nofollow noopener noreferrer"><i class="icon-quo-left icon"></i>友情链接2</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title" rel="external nofollow noopener noreferrer"><i class="icon-quo-left icon"></i>友情链接3</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title" rel="external nofollow noopener noreferrer"><i class="icon-quo-left icon"></i>友情链接4</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title" rel="external nofollow noopener noreferrer"><i class="icon-quo-left icon"></i>友情链接5</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title" rel="external nofollow noopener noreferrer"><i class="icon-quo-left icon"></i>友情链接6</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">闷声&lt;br&gt;发大财&lt;br&gt;最上川</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
